<body class="graphistry-body">

    <script type="text/javascript" src="libs/jquery-2.1.1.js"></script>

    <!-- copied from index.fragment.handlebars -->
    <script type="text/javascript">

        var templatePaths = {
            API_ROOT: window.location.protocol + "//" + window.location.host + "/"
        };

        window.heap=window.heap||[],heap.load=function(t,e){window.heap.appid=t,window.heap.config=e;var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.heapanalytics.com/js/heap.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(t){return function(){heap.push([t].concat(Array.prototype.slice.call(arguments,0)))}},p=["clearEventProperties","identify","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("348604669");

        // Track JavaScript errors
        window.addEventListener('error', function(e) {
            var msg = {
                type: 'JSError',
                content: {
                    message: e.message,
                    location: e.filename + ':  ' + e.lineno,
                    error: e.error
                }
            }

            $.post(templatePaths.API_ROOT + 'error', JSON.stringify(msg));
            window.heap.track('error', msg.content);
        });

        // Track AJAX errors (jQuery API)
        $(document).ajaxError(function(e, request, settings, thrownError) {
            // Skip ajaxError caused by posting errors to /error
            var errorPage = '/error'
            if (settings.url.indexOf(errorPage, settings.url.length - errorPage.length) !== -1)
                return;

            var msg = {
                type: 'AjaxError',
                content: {
                    url: settings.url,
                    result: e.result,
                    error: thrownError
                }
            }

            $.post(templatePaths.API_ROOT + 'error', JSON.stringify(msg));
            window.heap.track('error', msg.content);
        });
    </script>

    <!-- copied from index.fragment.handlebars -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-59712214-1', 'auto');
      ga('require', 'linkid', 'linkid.js');
      ga('send', 'pageview');

    </script>

    <!-- Libs (bootstrap etc.) -->
    <script type="text/javascript" src="libs/jquery-ui-1.10.4.min.js"></script>
    <script type="text/javascript" src="libs/underscore-min.js"></script>
    <script type="text/javascript" src="libs/jquery.mousewheel-3.1.9.js"></script>
    <script type="text/javascript" src="libs/jQRangeSlider-5.6.0/jQAllRangeSliders-min.js"></script>
    <script type="text/javascript" src="libs/colorpicker/colorpicker.js"></script>
    <script type="text/javascript" src="libs/spin.min.js"></script>


    <!-- FIXME: Package Quo and bundle with StreamGL -->
    <script type="text/javascript" src="libs/quo.js"></script>


    <link rel="stylesheet" href="css/jquery-ui-1.10.4.css">
    <link rel="stylesheet" href="libs/jQRangeSlider-5.6.0/css/classic-min.css">
    <link rel="stylesheet" href="libs/colorpicker/colorpicker.css">

    <link rel="stylesheet" href="libs/bootstrap/css/bootstrap.css">
    <script type="text/javascript" src="libs/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="libs/bootstrap-slider/js/bootstrap-slider.js"></script>
    <script type="text/javascript" src="libs/bootstrap-switch.min.js"></script>

    <link rel="stylesheet" href="libs/bootstrap-slider/css/bootstrap-slider.css">
    <link rel="stylesheet" href="libs/bootstrap-switch.min.css">
    <link rel="stylesheet" href="libs/bootstrap.vertical-tabs.min.css">

    <link rel="stylesheet" href="libs/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="css/nunito.css">

    <link rel="stylesheet" href="libs/backgrid.min.css">
    <link rel="stylesheet" href="libs/backgrid-paginator.min.css">

    <!-- App -->
    <link rel="stylesheet" href="css/gpustreaming.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="css/graph.css" type="text/css" media="screen" charset="utf-8">

    <!-- FIXME: Include fpsmeter as part of the StreamGL bundle -->
    <script type="text/javascript" src="libs/fpsmeter.js" charset="utf-8"></script>
    <script type="text/javascript" src="StreamGL.js" charset="utf-8"></script>


    <script type="text/javascript">
        window.addEventListener("beforeunload", function(){console.clear();});
        window.addEventListener("DOMContentLoaded", function() {$('[data-toggle="tooltip"]').tooltip();});
        $.fn.bootstrapSwitch.defaults.size = 'small';
    </script>


    <div class="content">
        <div class="sim-container">

            <canvas id="simulation" class="sim"> WebGL not supported </canvas>

            <div id="marquee" class="marquee-outline off"></div>
            <div id="brush" class="marquee-outline off"></div>

            <!-- over canvas but below interactions -->
            <div id="highlighted-point-cont">
                <div class="highlighted-point">
                    <div class="highlighted-point-center"></div>
                </div>
            </div>

        </div>


    </div>

    <div id="sliders">
        <div class="heading">
            <div class="controls">
              <button type=button id="do-disconnect" class="control-button">Disconnect</button>
            </div>

            <div id="timeSlider"></div>
        </div>
    </div>

    <div class='section' id="menus">


        <div class="accordian" id="controlState">
            <div class="accordian-group">

                <div class="accordion-heading">

                    <div class="options-group">

                      <a href="#" id="zoomin" data-container="body" data-toggle="tooltip" data-placement="right" title="Zoom in">
                        <i class="fa fa-search-plus fa-2x"></i>
                      </a>

                      <div class="divide-line"></div>

                      <a href="#" id="zoomout" data-container="body" data-toggle="tooltip" data-placement="right" title="Zoom out">
                        <i class="fa fa-search-minus fa-2x"></i>
                      </a>

                      <div class="divide-line"></div>

                      <a href="#" id="center" data-container="body" data-toggle="tooltip" data-placement="right" title="Center View">
                          <i class="fa fa-compress fa-2x"></i>
                      </a>

                    </div>


                    <div class="options-group">

                      <a href="#" id="mouser">
                        <i class="fa fa-arrows fa-2x"></i>
                      </a>

                      <a href="#" id="simulate" data-container="body" data-toggle="tooltip" data-placement="right" title="Start/Stop Visual Clustering">
                        <i class="fa fa-play-circle fa-2x"></i>
                      </a>


                      <div class="divide-line"></div>

                      <a href="#" id="layoutSettingsButton" data-container="body" data-toggle="tooltip" data-placement="right" title="Layout Settings">
                        <i class="fa fa-cogs fa-2x"></i>
                      </a>

                      <div class="divide-line"></div>

                      <a href="#" id="marqueerectangle" data-container="body" data-toggle="tooltip" data-placement="right" title="Move Nodes">

                              <i class="fa fa-square-o"></i>
                              <i class="fa fa-long-arrow-right" style="font-size: 0.9em; position: absolute; margin-left: -0.5em; margin-top: 0.1em"></i>

                      </a>

                      <div class="divide-line" style="display:none"></div>

                      <!--
                      <a href="#" id="shortestpath" data-container="body" data-toggle="tooltip" data-placement="right" title="Find routes between two points" style="display:none">
                          <i class="fa fa-road fa-2x"></i>
                      </a>
                      -->




<style>
.colorpicker {
    z-index: 100000;
    right: 7em;
}

#colorpickers .colorSelector {
    position: relative;
    top: 0;
    left: 0;
    width: 36px;
    height: 36px;
    background: url(libs/images/select2.png);
}

#colorpickers .colorSelector div {
    position: relative;
    top: 4px;
    left: 4px;
    width: 28px;
    height: 28px;
    background: url(libs/images/select2.png) center;
}
</style>

                      <div id="colorpickers">
                            <div class="divide-line"></div>

                            <div id="foregroundColor">

                                <div class="colorSelector">
                                    <div style="opacity: 0.3; background-color: #000"></div>
                                </div>
                                <div class="colorHolder"></div>

                            </div>

                            <div class="divide-line"></div>

                            <div id="backgroundColor">

                                <div class="colorSelector">
                                    <div style="opacity: 0.3; background-color: #fff"></div>
                                </div>
                                <div class="colorHolder"></div>

                            </div>
                      </div>

                    </div> <!-- last options group -->


                    <div class="options-group">
                      <a href="#" id="histogramBrush" data-container="body" data-toggle="tooltip" data-placement="right" title="Histogram Brush">
                          <i class="fa fa-bar-chart fa-2x"></i>
                      </a>
                    </div>



                </div> <!-- accordion heading -->

            </div>
        </div>

        <div id="renderingItems" class="settingsPanel">
            <div class="form-horizontal">
            </div>  <!-- /form-horizontal -->
        </div> <!-- /renderingItems -->

    </div> <!-- /section -->

    <div class="status-bar"></div>


    <div id="graph-legend" class="legend-container on">
        <div class="toggles">
            <a href="#hideLegend"><i class="fa fa-minus-square hider" style="color: rgb(51,51,102)"></i></a>
            <a href="#revealLegend"><i class="fa fa-plus-square revealer" style="color: rgb(51,51,102)"></i></a>
        </div>
        <div class="legend-title"></div>
        <table>
            <tr>
                <td><span class="legend-label">Nodes</span></td>
                <td><span class="legend-nodes"></span></td>
            </tr>
            <tr>
                <td><span class="legend-label">Edges</span></td>
                <td><span class="legend-edges"></span></td>
            </tr>
        </table>
    </div>

    <div id="inspector">
        <div class="inspector-panels">
            <div class="inspector-tabs">
                <ul class="nav nav-tabs tabs-left sideways">
                    <li class="active"><a href="#inspector-nodes" data-toggle="tab">Nodes</a></li>
                    <li><a href="#inspector-edges" data-toggle="tab">Edges</a></li>
                </ul>
            </div>
            <div class="tab-content">
                <div id="inspector-nodes" class="tab-pane active">
                    <div class="inspector panel"></div>
                </div>
                <div id="inspector-edges" class="tab-pane">
                    <div class="inspector panel"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="inspector-overlay" class="panel"></div>
    <div id="histogram" class="panel">
        <div id="histograms"></div>
        <div id="addHistogram"></div>
    </div>

    <script>
    $(function () {
        var legend = $('#graph-legend');
        $('.hider', legend).on('click', function () {
            legend.removeClass('on').addClass('off');
        });
        $('.revealer', legend).on('click', function () {
            legend.removeClass('off').addClass('on');
        });
    });
    </script>

    <script>
    $(function () {
        var opts = {
            lines: 13, // The number of lines to draw
            length: 0, // The length of each line
            width: 15, // The line thickness
            radius: 30, // The radius of the inner circle
            corners: 1, // Corner roundness (0..1)
            rotate: 0, // The rotation offset
            direction: 1, // 1: clockwise, -1: counterclockwise
            color: '#333366', // #rgb or #rrggbb or array of colors
            speed: 1, // Rounds per second
            trail: 60, // Afterglow percentage
            shadow: false, // Whether to render a shadow
            hwaccel: true, // Whether to use hardware acceleration
            className: 'spinner', // The CSS class to assign to the spinner
            zIndex: 2e9, // The z-index (defaults to 2000000000)
            top: '50%', // Top position relative to parent
            left: '50%' // Left position relative to parent
        };
        var spinner = new Spinner(opts).spin();
        var $text = $('<div>').attr('id', 'load-text').text('locating graphistry\'s farm');
        var $spinner= $(spinner.el).append($text);
        $('<div>').addClass('load-spinner').append($spinner).appendTo($('body'));
    });
    </script>

</div>

<div class="meter meter-graphnodes" style="left: 21em;">
    <span class="flavor">graph</span>
    <div style="padding: 0px; min-width: 95px; height: 30px; line-height: 30px; text-align: right; text-shadow: rgba(0, 0, 0, 0.498039) 1px 1px 0px; color: rgb(255, 255, 255); position: absolute; z-index: 10; left: 5px; top: 5px; right: auto; bottom: auto; margin: 0px; cursor: pointer;">
        <div style="position: absolute; top: 0px; right: 0px; padding: 0px 5px; height: 40px; font-size: 24px; font-family: Consolas, 'Andale Mono', monospace; z-index: 2; line-height: 27px; text-align: right">
            <span id="graph-node-count">0</span>
        </div>
        <div style="position: absolute; top: 20px; right: 0px; padding: 0px 5px; height: 40px; font-size: 24px; font-family: Consolas, 'Andale Mono', monospace; z-index: 2; line-height: 27px; text-align: right">
            <span id="graph-edge-count">0</span>
        </div>
        <div style="position: absolute; top: 15px; left: 0px; padding: 0px 5px; height: 40px; font-size: 12px; line-height: 15px; font-family: sans-serif; text-align: left; z-index: 2;">nodes<br/>edges</div>
        <div style="position: relative; height: 40px; z-index: 1; width: 145px;">&nbsp;</div>
    </div>
</div>

<div class="logo-container">
    <img src="img/logo_stroked.png" />
</div>

<!-- TEMPLATES -->
<script type="text/template" id="histogramTemplate">
    <div class="topMenu">
        <div class="col-xs-1 expandButton">
            <a href="#">
                <i class="fa fa-play expandHistogramButton" id="expandHistogramButton{{id}}" cid="{{id}}"></i>
            </a>
        </div>
        <div class="col-xs-9">
            <div class="dropdown">
                <button class="btn btn-default btn-block dropdown-toggle pull-right" type="button" id="dropdownMenu{{id}}" data-toggle="dropdown" aria-expanded="true">
                    {{attribute}}
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu{{id}}">
                    {{#each fields}}
                        <li role="presentation"><a class="histogramDropdownField" role="menuitem" tabindex="-1" href="#">
                            {{this}}
                        </a></li>
                    {{/each}}
                </ul>
            </div>
        </div>
        <div class="col-xs-1 closeButton">
            <a href="#">
                <i class="fa fa-times closeHistogramButton" id="closeHistogramButton{{id}}" cid="{{id}}"></i>
            </a>
        </div>
    </div>
    <div class="vizContainer"></div>
    <div class="divide-line"></div>
</script>

<script type="text/template" id="histogramTemplateNoDropdown">
    <div class="topMenu">
        <div class="col-xs-1 expandButton">
            <a href="#">
                <i class="fa fa-play expandHistogramButton" id="expandHistogramButton{{id}}" cid="{{id}}"></i>
            </a>
        </div>
        <div class="col-xs-9 attributeName">
            {{attribute}}
        </div>
        <div class="col-xs-1 closeButton">
            <a href="#">
                <i class="fa fa-times closeHistogramButton" id="closeHistogramButton{{id}}" cid="{{id}}"></i>
            </a>
        </div>
    </div>
    <div class="vizContainer"></div>
    <div class="divide-line"></div>
</script>

<script type="text/template" id="addHistogramTemplate">
    <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" id="addHistogramButton" data-toggle="dropdown" aria-expanded="true">
            Add Histogram
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu{{id}}">
            {{#each fields}}
                <li role="presentation"><a class="addHistogramDropdownField" role="menuitem" tabindex="-1" href="#">
                    {{this}}
                </a></li>
            {{/each}}
        </ul>
    </div>
</script>



</body>
