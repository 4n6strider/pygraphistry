<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex, nofollow">
    <script type="text/javascript" src="libs/jquery-2.1.1.js"></script>
    <link rel="stylesheet" href="css/jquery-ui-1.10.4.css">
    <link rel="stylesheet" href="libs/jQRangeSlider-5.6.0/css/classic-min.css">
    <link rel="stylesheet" href="libs/colorpicker/colorpicker.css">

    <!-- Libs (bootstrap etc.) -->
    <script type="text/javascript" src="libs/jquery-ui-1.10.4.min.js"></script>
    <script type="text/javascript" src="libs/underscore-min.js"></script>
    <script type="text/javascript" src="libs/jquery.mousewheel-3.1.9.js"></script>
    <script type="text/javascript" src="libs/jQRangeSlider-5.6.0/jQAllRangeSliders-min.js"></script>
    <script type="text/javascript" src="libs/colorpicker/colorpicker.js"></script>
    <script type="text/javascript" src="libs/spin.min.js"></script>

    <!-- FIXME: Package Quo and bundle with StreamGL -->
    <script type="text/javascript" src="libs/quo.js"></script>

    <link rel="stylesheet" href="libs/bootstrap/css/bootstrap.css">
    <script type="text/javascript" src="libs/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="libs/bootstrap-slider/js/bootstrap-slider.js"></script>
    <script type="text/javascript" src="libs/bootstrap-switch.min.js"></script>

    <link rel="stylesheet" href="libs/bootstrap-slider/css/bootstrap-slider.css">
    <link rel="stylesheet" href="libs/bootstrap-switch.min.css">
    <link rel="stylesheet" href="libs/bootstrap.vertical-tabs.min.css">

    <link rel="stylesheet" href="libs/font-awesome/css/font-awesome.css">
    <link rel="stylesheet" href="css/nunito.css">

    <link rel="stylesheet" href="libs/backgrid.min.css">
    <link rel="stylesheet" href="libs/backgrid-paginator.min.css">

    <!-- App -->
    <link rel="stylesheet" href="css/gpustreaming.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="css/graph.css" type="text/css" media="screen" charset="utf-8">

    <link rel="shortcut icon" "/favicon.ico" />

</head>
<body class="graphistry-body">

    <!-- copied from index.fragment.handlebars -->
    <script type="text/javascript">

        var templatePaths = {
            API_ROOT: window.location.protocol + "//" + window.location.host + "/"
        };

        // Track JavaScript errors
        window.addEventListener('error', function(e) {
            var content = {
                message: e.message,
                filename: e.filename,
                lineno: e.lineno
            };

            if (e.error) { // Modern browsers report the stack trace
                content.stack = e.error.stack;
            }

            var msg = {
                type: 'JSError',
                content: content
            };

            $.post(templatePaths.API_ROOT + 'error', JSON.stringify(msg));
        });

        // Track AJAX errors (jQuery API)
        $(document).ajaxError(function(e, request, settings, thrownError) {
            // Skip ajaxError caused by posting errors to /error
            var errorPage = '/error'
            if (settings.url.indexOf(errorPage, settings.url.length - errorPage.length) !== -1)
                return;

            var msg = {
                type: 'AjaxError',
                content: {
                    url: settings.url,
                    result: e.result,
                    error: thrownError
                }
            };

            $.post(templatePaths.API_ROOT + 'error', JSON.stringify(msg));
        });
    </script>

    <!-- GA init is done in StreamGL -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>

    <!-- FIXME: Include fpsmeter as part of the StreamGL bundle -->
    <script type="text/javascript" src="libs/fpsmeter.js" charset="utf-8"></script>
    <!-- TODO: Offer a way to dynamically include the bundle contents individually. -->
    <script type="text/javascript" src="StreamGL.js" charset="utf-8"></script>


    <script type="text/javascript">
        window.addEventListener("beforeunload", function(){console.clear();});
        window.addEventListener("DOMContentLoaded", function() {$('[data-toggle="tooltip"]').tooltip();});
        $.fn.bootstrapSwitch.defaults.size = 'small';
    </script>


    <div class="content">
        <div class="sim-container">

            <canvas id="simulation" class="sim"> WebGL not supported </canvas>

            <div id="marquee" class="marquee-outline off"></div>
            <div id="brush" class="marquee-outline off"></div>

            <!-- over canvas but below interactions -->
            <div id="highlighted-point-cont">
                <div class="highlighted-point">
                    <div class="highlighted-point-center"></div>
                </div>
            </div>

        </div>


    </div>

    <div class='section' id="menus">


        <div class="accordian" id="controlState">
            <div class="accordian-group">

                <div class="accordion-heading">

                    <div class="options-group">

                      <a href="#" id="zoomin" data-container="body" data-toggle="tooltip" data-placement="right" title="Zoom in">
                        <i class="fa fa-search-plus fa-2x"></i>
                      </a>

                      <div class="divide-line"></div>

                      <a href="#" id="zoomout" data-container="body" data-toggle="tooltip" data-placement="right" title="Zoom out">
                        <i class="fa fa-search-minus fa-2x"></i>
                      </a>

                      <div class="divide-line"></div>

                      <a href="#" id="center" data-container="body" data-toggle="tooltip" data-placement="right" title="Center View">
                          <i class="fa fa-compress fa-2x"></i>
                      </a>

                    </div>


                    <div class="options-group">

                      <a href="#" id="mouser">
                        <i class="fa fa-arrows fa-2x"></i>
                      </a>

                      <a href="#" id="simulate" data-container="body" data-toggle="tooltip" data-placement="right" title="Start/Stop Visual Clustering">
                        <i class="fa fa-play-circle fa-2x"></i>
                      </a>

                      <div class="divide-line"></div>

                      <a href="#" id="marqueerectangle" data-container="body" data-toggle="tooltip" data-placement="right" title="Move Nodes">

                              <i class="fa fa-square-o"></i>
                              <i class="fa fa-long-arrow-right" style="font-size: 0.9em; position: absolute; margin-left: -0.5em; margin-top: 0.1em"></i>

                      </a>

                      <div class="divide-line"></div>

                      <a href="#" id="layoutSettingsButton" data-container="body" data-toggle="tooltip" data-placement="right" title="Layout Settings">
                        <i class="fa fa-cogs fa-2x"></i>
                      </a>

                      <div class="divide-line"></div>

                      <a href="#" id="histogramPanelControl" data-container="body" data-toggle="tooltip" data-placement="right" title="Expand/Shrink Histogram Panel">
                        <i class="fa fa-bar-chart fa-2x"></i>
                      </a>

                      <div class="divide-line"></div>

                      <a href="#" id="histogramBrush" data-container="body" data-toggle="tooltip" data-placement="right" title="Data Inspector">
                          <i class="fa fa-table fa-2x"></i>
                      </a>

                      <div class="divide-line"></div>

                      <a href="#" id="filterButton" data-container="body" data-toggle="tooltip" data-placement="right" title="Filter">
                          <i class="fa fa-filter fa-2x"></i>
                      </a>

                      <!--
                      <a href="#" id="shortestpath" data-container="body" data-toggle="tooltip" data-placement="right" title="Find routes between two points" style="display:none">
                          <i class="fa fa-road fa-2x"></i>
                      </a>
                      -->



                    </div> <!-- last options group -->

                    <div class="options-group">

                      <a href="#" id="forkButton" data-container="body" data-toggle="tooltip" data-placement="right" title="Save A Copy">
                          <i class="fa fa-code-fork fa-2x"></i>
                      </a>

                      <div class="divide-line"></div>

                      <a href="#" id="persistButton" data-container="body" data-toggle="tooltip" data-placement="right" title="Share/Embed Snapshot">
                            <i class="fa fa-share-alt fa-2x"></i>
                        </a>
                        <a href="#" id="goLiveButton" data-container="body" data-toggle="tooltip" data-placement="right" title="Go Live">
                            <i class="fa fa-share-square fa-2x"></i>
                        </a>
                    </div>

                    <div class="options-group">
                      <!-- only show if in iframe -->
                      <a href="#" id="externalLinkButton" data-container="body" data-toggle="tooltip" data-placement="right" title="Open in New Tab">
                          <i class="fa fa-external-link fa-2x"></i>
                      </a>
                    </div>

                </div> <!-- accordion heading -->

            </div>
        </div>

        <div id="renderingItems" class="settingsPanel">
            <div class="form-horizontal">


                <div class="control-title">Background</div>

                    <style scoped="scoped">
                    .colorpicker {
                        right: 7em;
                    }
                    .colorSelector {
                        position: relative;
                        top: 0;
                        left: 0;
                        width: 36px;
                        height: 36px;
                        background: url(libs/images/select2.png);
                    }

                    .colorSelector div {
                        position: relative;
                        top: 4px;
                        left: 4px;
                        width: 28px;
                        height: 28px;
                        background: url(libs/images/select2.png) center;
                    }
                    </style>

                    <div id="colorpickers">

                        <div class="form-group colorer">
                            <label  class="control-label col-xs-4">Foreground</label>
                            <div class="col-xs-8">

                                <div id="foregroundColor">

                                    <div class="colorSelector">
                                        <div style="background-color: #000"></div>
                                    </div>
                                    <div class="colorHolder"></div>

                                </div>
                            </div>
                        </div><!-- /form-group -->

                        <div class="form-group colorer">
                            <label  class="control-label col-xs-4">Background</label>
                            <div class="col-xs-8">

                                <div id="backgroundColor">

                                    <div class="colorSelector">
                                        <div style="background-color: #fff"></div>
                                    </div>
                                    <div class="colorHolder"></div>

                                </div>
                            </div>
                        </div><!-- /form-group -->

                    </div><!-- /colorpickers -->


            </div>  <!-- /form-horizontal -->
        </div> <!-- /renderingItems -->

        <div id="filteringItems" class="settingsPanel">
            <div class="form-horizontal">
            <!-- Placeholder -->
            </div>  <!-- /form-horizontal -->
        </div> <!-- /filteringItems -->


    </div> <!-- /section -->

    <div class="status-bar"></div>


    <div id="graph-legend" class="legend-container on">
        <div class="toggles">
            <a href="#hideLegend"><i class="fa fa-minus-square hider" style="color: rgb(51,51,102)"></i></a>
            <a href="#revealLegend"><i class="fa fa-plus-square revealer" style="color: rgb(51,51,102)"></i></a>
        </div>
        <div class="legend-title"></div>
        <table>
            <tr>
                <td><span class="legend-label">Nodes</span></td>
                <td><span class="legend-nodes"></span></td>
            </tr>
            <tr>
                <td><span class="legend-label">Edges</span></td>
                <td><span class="legend-edges"></span></td>
            </tr>
        </table>
    </div>

    <div id="inspector">
        <div class="inspector-panels">
            <div class="inspector-tabs">
                <ul class="nav nav-tabs tabs-left sideways">
                    <li class="active"><a href="#inspector-nodes" data-toggle="tab">Nodes</a></li>
                    <li><a href="#inspector-edges" data-toggle="tab">Edges</a></li>
                </ul>
            </div>
            <div class="tab-content">
                <div id="inspector-nodes" class="tab-pane active">
                    <div class="inspector panel backgrid-container"></div>
                </div>
                <div id="inspector-edges" class="tab-pane">
                    <div class="inspector panel backgrid-container"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="inspector-overlay" class="panel"></div>
    <div id="histogram" class="panel">
        <div id="histograms"></div>
        <div id="histogramErrors"></div>
        <div id="addHistogram"></div>
    </div>

    <script>
    $(function () {
        var legend = $('#graph-legend');
        $('.hider', legend).on('click', function () {
            legend.removeClass('on').addClass('off');
        });
        $('.revealer', legend).on('click', function () {
            legend.removeClass('off').addClass('on');
        });
    });
    </script>

<!--</div>-->

<div class="meter meter-graphnodes" style="left: 21em;">
    <span class="flavor">graph</span>
    <div style="padding: 0; min-width: 95px; height: 30px; line-height: 30px; text-align: right; text-shadow: rgba(0, 0, 0, 0.498039) 1px 1px 0; color: rgb(255, 255, 255); position: absolute; z-index: 10; left: 5px; top: 5px; right: auto; bottom: auto; margin: 0; cursor: pointer;">
        <div style="position: absolute; top: 0; right: 0; padding: 0 5px; height: 40px; font-size: 24px; font-family: Consolas, 'Andale Mono', monospace; z-index: 2; line-height: 27px; text-align: right">
            <span id="graph-node-count">0</span>
        </div>
        <div style="position: absolute; top: 20px; right: 0; padding: 0 5px; height: 40px; font-size: 24px; font-family: Consolas, 'Andale Mono', monospace; z-index: 2; line-height: 27px; text-align: right">
            <span id="graph-edge-count">0</span>
        </div>
        <div style="position: absolute; top: 15px; left: 0; padding: 0 5px; height: 40px; font-size: 12px; line-height: 15px; font-family: sans-serif; text-align: left; z-index: 2;">nodes<br/>edges</div>
        <div style="position: relative; height: 40px; z-index: 1; width: 145px;">&nbsp;</div>
    </div>
</div>

<div class="logo-container">
    <img src="img/logo_stroked.png" />
</div>


<!-- TEMPLATES -->
<script type="text/template" id="forkTemplate">
    <div class="modal fade forker" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3 class="modal-title">Save a copy</h3>
                </div>
                <div class="modal-body">

                    <form class="form-horizontal">
                      <div class="form-group">
                        <label for="forkSaveName" class="col-sm-2 control-label">Upload As</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control" id="forkSaveName" value="{{defName}}">
                        </div>
                      </div>
                    </form>

                </div>
                <div class="modal-footer">
                    <i class="fa fa-spinner fa-spin status"></i>
                    <button type="button" class="btn btn-primary">Fork</button>
            </div>
        </div>
      </div>
    </div>
</script>

<script type="text/template" id="persistTemplate">
    <div class="modal fade persistor" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h3 class="modal-title">Share / Embed Snapshot</h3>
                </div>
                <div class="modal-body">
                    <div class="snapshot-form-area">
                        <p>For publication, avoid sharing a live view with your API keys and GPU cluster access. Instead, name a location below to save the current static, embeddable layout.</p>
                        <p><b>Configure:</b> To control dimensions, resize the window. Move the view as desired.</p>
                        <form class="form-horizontal">
                            <div class="form-group">
                                <label for="snapshotName" class="col-sm-2 control-label">Save As</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" id="snapshotName" value="{{defName}}" />
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="snapshot-preview">
                    </div>
                </div>
                <div class="modal-footer">
                    <i class="fa fa-spinner fa-spin status"></i>
                    <button type="button" class="btn btn-primary">Save</button>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/template" id="histogramTemplate">
    <div class="topMenu">
        <div class="col-xs-1 expandButton">
            <a href="#">
                <i class="fa fa-play expandHistogramButton" id="expandHistogramButton{{id}}" cid="{{id}}"></i>
            </a>
        </div>
        <div class="col-xs-9">
            <div class="dropdown">
                <button class="btn btn-default btn-block dropdown-toggle pull-right" type="button" id="dropdownMenu{{id}}" data-toggle="dropdown" aria-expanded="true">
                    {{attribute}}
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu{{id}}">
                    {{#each fields}}
                        <li role="presentation"><a class="histogramDropdownField" role="menuitem" tabindex="-1" href="#">
                            {{this}}
                        </a></li>
                    {{/each}}
                </ul>
            </div>
        </div>
        <div class="col-xs-1 closeButton">
            <a href="#">
                <i class="fa fa-times closeHistogramButton" id="closeHistogramButton{{id}}" cid="{{id}}"></i>
            </a>
        </div>
    </div>
    <div class="vizContainer"></div>
    <div class="divide-line"></div>
</script>

<script type="text/template" id="histogramTemplateNoDropdown">
    <div class="topMenu grab-cursor" draggable="true">
        <div class="col-xs-1 histogramButton expandButton">
            <a href="#">
                <i class="fa fa-play histogramButton expandHistogramButton" id="expandHistogramButton{{id}}" cid="{{id}}"></i>
            </a>
        </div>
        <div class="col-xs-9 attributeName">
            {{attribute}}
        </div>
        <!--
        <div class="col-xs-1 histogramButton refreshButton refreshHistogramButton-{{modelId}}">
            <a href="#">
                <span class="fa-stack">
                    <i class="fa fa-filter histogramButton refreshHistogramButton refreshHistogramButton-{{modelId}}" id="refreshHistogramButton{{modelId}}" cid="{{id}}"></i>
                    <i class="fa fa-trash histogramRemoveIcon" style="font-size: 0.9em; position: absolute; margin-left: -0.5em; margin-top: 0.5em; pointer-events: none"></i>
                </span>

            </a>
        </div>
        -->
        <div class="col-xs-1 histogramButton closeButton">
            <a href="#">
                <i class="fa fa-times histogramButton closeHistogramButton" id="closeHistogramButton{{id}}" cid="{{id}}"></i>
            </a>
        </div>

    </div>
    <div class="vizContainer"></div>
    <div class="divide-line"></div>
</script>

<script type="text/template" id="addHistogramTemplate">
    <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" id="addHistogramButton" data-toggle="dropdown" aria-expanded="true">
            Add Histogram
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu{{id}}">
            {{#each fields}}
                <li role="presentation"><a class="addHistogramDropdownField" role="menuitem" tabindex="-1" href="#">
                    {{this}}
                </a></li>
            {{/each}}
        </ul>
    </div>
</script>

</body>
</html>
