require('source-map-support').install({environment:'node'});require('raf').polyfill();
module.exports=function(e){function b(f){if(a[f])return a[f].exports;var d=a[f]={i:f,l:!1,exports:{}};e[f].call(d.exports,d,d.exports,b);d.l=!0;return d.exports}var a={};b.m=e;b.c=a;b.d=function(a,d,e){b.o(a,d)||Object.defineProperty(a,d,{configurable:!1,enumerable:!0,get:e})};b.n=function(a){var d=a&&a.__esModule?function(){return a["default"]}:function(){return a};b.d(d,"a",d);return d};b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};b.p="";return b(b.s=105)}([function(e,b,a){function f(a){var b=
a.LOG_LEVEL,g=a.LOG_FILE;a=a.LOG_SOURCE;var c=l.a.stdSerializers,d=[];d=k.a.isUndefined(g)?[{name:"stdout",stream:process.stdout,level:b}]:[{name:"fatal",stream:process.stderr,level:"fatal"},{name:"logfile",path:g,level:b}];var f=l.a.createLogger({src:a,name:"pivot-app",serializers:c,streams:d});f.die=function(a,c){f.fatal(a,c);f.fatal("Exiting process with return code of 60 due to previous fatal error");process.exit(60)};process.on("SIGUSR2",function(){f.reopenFileStreams()});return f}function d(a,
b){return(b||n).child({fileName:a})}b.a=d;e=a(12);var m=a.n(e);e=a(5);var h=a.n(e);e=a(2);var k=a.n(e);e=a(69);var l=a.n(e);(function(){function a(){h()(this,a);this.levelToConsole={trace:"debug",debug:"debug",info:"info",warn:"warn",error:"error",fatal:"error"};this.fieldsToOmit="v name fileName pid hostname level time msg".split(" ")}a.prototype.write=function(a){var g=this.levelToConsole[l.a.nameFromLevel[a.level]],c=k.a.omit(a,this.fieldsToOmit);if(k.a.isEmpty(c))console[g](a.msg);else if("err"in
c)c=Error(a.err.message),c.stack=a.err.stack,a.msg===a.err.message?console[g](c):console[g](a.msg,c);else console[g](a.msg,c)};return a})();(function(){function a(){h()(this,a)}a.prototype.write=function(a){var g=new XMLHttpRequest;g.open("POST","/error",!0);g.setRequestHeader("Content-type","application/json");g.send(m()(a))};return a})();var n=void 0;(n=global.__graphistry_server_logger__)||(a=global.__graphistry_convict_conf__,n=f({LOG_FILE:a.get("log.file"),LOG_LEVEL:a.get("log.level"),LOG_SOURCE:a.get("log.logSource")}));
d.createLogger=d;b.b=d},function(e,b){e.exports=require("babel-runtime/helpers/extends")},function(e,b){e.exports=require("underscore")},function(e,b){e.exports=require("react")},function(e,b){e.exports=require("rxjs")},function(e,b){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,b){e.exports=require("@graphistry/falcor-json-graph")},function(e,b){e.exports=require("babel-runtime/helpers/possibleConstructorReturn")},function(e,b){e.exports=require("babel-runtime/helpers/inherits")},
function(e,b){e.exports=require("verror")},function(e,b){e.exports=require("babel-runtime/core-js/object/values")},function(e,b){e.exports=require("babel-runtime/core-js/object/keys")},function(e,b){e.exports=require("babel-runtime/core-js/json/stringify")},function(e,b){e.exports=require("babel-runtime/helpers/objectWithoutProperties")},function(e,b){e.exports=require("react-bootstrap/lib/Button")},function(e,b){e.exports={"pivot-row":"OXL0d","pivot-disabled":"_3ZK_s","pivot-number":"_3JOYS","pivot-row-header-item":"_3zfV0",
"pivot-row-header":"_14WGo","pivot-row-index-flag":"H86PQ",disabled:"_18A5V","pivot-footer":"_3sNxe","pivot-expander":"_2D9b6","pivot-expander-open":"_1ybfM","pivot-expander-closed":"_1RGmM","pivot-expander-body":"_1YELt","pivot-description":"_1RjFi","pivot-result-summaries":"_3FlaH","result-count-on":"_3UeWt","result-count-off":"_1r6SG","pivot-icons":"_3mBea","pivot-type-selector-container":"_35ALw","pivot-textarea-param":"_1XvbH","pivot-multi-param":"uIw4e","pivot-combo-param":"_3bjJA","pivot-bool-param":"Zg1Cz",
"pivot-text-param":"_3cxiR","pivot-entity-summaries":"_1g8Dz","pivot-entity-summary":"_3LfhK","pivot-entity-pill":"_2D8Y7","pivot-entity-count":"wwwzU","pivot-entity-name":"_3QKWq","run-insert-button-group":"_2UuBw","status-button-group":"mWNFh","pivot-error-tooltip":"_3BNnZ",message:"CbmHb","splunk-query":"RIFLY","pivot-datetimepicker-container":"_1eD_p","is-default":"iMPso","pivot-timepicker-container":"_3txSI","pivot-timepicker":"_3oI1v"}},function(e,b){e.exports=require("react-bootstrap/lib/Col")},
function(e,b){e.exports=require("react-bootstrap/lib/Tooltip")},function(e,b){e.exports=require("react-bootstrap/lib/OverlayTrigger")},function(e,b){e.exports=require("react-bootstrap/lib/Panel")},function(e,b,a){var f=a(185);a.d(b,"c",function(){return f.a});a.d(b,"g",function(){return f.b});var d=a(186);a.d(b,"b",function(){return d.a});a.d(b,"e",function(){return d.b});a.d(b,"i",function(){return d.c});var m=a(235);a.d(b,"a",function(){return m.a});a.d(b,"d",function(){return m.b});a.d(b,"h",function(){return m.c});
var h=a(236);a.d(b,"f",function(){return h.a})},function(e,b){e.exports=require("babel-runtime/helpers/taggedTemplateLiteralLoose")},function(e,b){e.exports=require("@graphistry/falcor-react-schema")},function(e,b){e.exports=require("simpleflakes")},function(e,b){e.exports=require("classnames")},function(e,b){e.exports=require("recompose/mapPropsStream")},function(e,b){e.exports=require("recompose/createEventHandler")},function(e,b){e.exports=require("@graphistry/falcor-react-redux")},function(e,
b){e.exports={"main-panel-panel":"_1ByTM",panel:"_1dchf","investigations-buttons":"_3_A3j","add-new-investigation":"_26qkG","delete-investigations":"_3B1_J",datepicker:"_1zuzP","welcome-bar":"_3iz8I","user-icon":"_1PiS4","user-greeting-heading":"_3ee65","user-greeting-message":"_3Iqwo","investigation-table":"wK9jk"}},function(e,b,a){a.d(b,"a",function(){return q});a.d(b,"c",function(){return n});e=a(31);e=a.n(e);var f=a(146),d=a(147),m=a(152),h=a(154),k=a(163);a.d(b,"b",function(){return m.a});var l=
a(165);a.d(b,"d",function(){return l.a});var n=Object(k.b)(h.a),q=e()(f.a,k.a)(d.a)},function(e,b,a){a.d(b,"c",function(){return d});var f=a(50);a.d(b,"a",function(){return f.a});a.d(b,"b",function(){return f.c});a.d(b,"d",function(){return f.d});a.d(b,"e",function(){return f.e});var d={point:{pointCanonicalType:function(a){a.canonicalType=f.b[a.type]}},edge:{edgeRefType:function(a){a.edgeType&&0===a.edgeType.indexOf("EventID->")&&(a.refType=f.g[a.edgeType.slice(9)])}}}},function(e,b){e.exports=require("recompose/compose")},
function(e,b){e.exports=require("react-bootstrap/lib/Row")},function(e,b,a){a(187);var f=a(189);a.d(b,"b",function(){return f.a});var d=a(190);a.d(b,"a",function(){return d.a})},function(e,b,a){(function(f){a.d(b,"a",function(){return v});var d=a(1),e=a.n(d);d=a(5);var h=a.n(d);d=a(7);var k=a.n(d);d=a(8);var l=a.n(d),n=a(4);a.n(n);d=a(84);var q=a.n(d);d=a(0);var p=a(35),g=a(63),c=a(48),r=a(30),u=a(212),t=d.b.createLogger(f),v=function(a){function b(c){h()(this,b);var d=k()(this,a.call(this,c)),p=
c.connections,f=c.encodings,e=c.attributes,w=c.connectionsBlacklist,x=c.attributesBlacklist;d.toSplunk=c.toSplunk;d.connections=p;d.connectionsBlacklist=w||r.d;d.encodings=f;d.attributes=e;d.attributesBlacklist=x||r.a;d.connector=g.splunkConnector0;return d}l()(b,a);b.prototype.searchAndShape=function(a){var g=this,b=a.app,d=a.pivot,p=a.pivotCache,f=a.time;a=this.stripTemplateNamespace(d.pivotParameters);f=this.toSplunk(a,p,{time:f});var e=f.searchQuery;f=f.searchParams;t.trace({pivotParameters:d.pivotParameters,
args:a},"Pivot parameters");d.template=this;if(d.enabled)return this.connector.search(e,f).do(function(a){var c=a.events,b=a.searchId,p=a.isPartial;d.resultCount=a.resultCount;d.events=c;d.splunkSearchId=b;d.isPartial=p;d.connections=g.connections;d.connectionsBlacklist=g.connections&&g.connections.length?[]:g.connectionsBlacklist;d.attributes=g.attributes;d.attributesBlacklist=g.attributes&&g.attributes.length?[]:g.attributesBlacklist}).map(function(){return Object(c.a)({app:b,pivot:d})}).do(function(a){a=
a.pivot;p[d.id]={results:a.results,query:e,splunkSearchId:d.splunkSearchId};d.results=a.results});d.resultSummary={};d.resultCount=0;return n.Observable.of({app:b,pivot:d})};b.prototype.dayRangeToSplunkParams=function(a,c){a={from:(a||{}).from||{},to:(a||{}).to||{}};c={from:(c||{}).from||{},to:(c||{}).to||{}};var g={from:{date:a.from.date||c.from.date,time:a.from.time||c.from.time,timezone:a.from.timezone||c.from.timezone},to:{date:a.to.date||c.to.date,time:a.to.time||c.to.time,timezone:a.to.timezone||
c.to.timezone}};if(g.from.date||g.to.date){var b=function(a,c){var g=a.date,b=a.time;a=a.timezone||"America/Los_Angeles";g=q()(g).utc().format("L");c=null===b||void 0===b?c:q()(b).utc().format("H:m:s");c=q.a.tz(g+" "+c,"L H:m:s",a).unix();return q.a.unix(c).format()};b=e()({},g.from.date?{earliest_time:b(g.from,"0:0:0")}:{},g.to.date?{latest_time:b(g.to,"23:59:59")}:{});t.trace("Date range",a,c,"->",g,"->",b);return b}};b.prototype.expandTemplate=function(a,c,g,b){t.debug({toExpand:a},"Expanding");
return Object(u.a)(a,c,g,b)};b.prototype.constructFieldString=function(){return this.attributes&&0<this.attributes.length?'\n                \n            | fields *\n            | rename _cd as EventID\n            | eval c_time=strftime(_time, "%Y-%m-%dT%H:%M:%S%:z")\n            | rename c_time as time\n                | fields '+["time","EventID"].concat(this.connections||[]).concat(this.attributes||[]).join(","):'\n                \n            | fields *\n            | rename _cd as EventID\n            | eval c_time=strftime(_time, "%Y-%m-%dT%H:%M:%S%:z")\n            | rename c_time as time\n                | fields - '+
r.e.join(" ")};return b}(p.a)}).call(b,"src/shared/services/templates/splunk/splunkPivot.js")},function(e,b,a){(function(f){a.d(b,"a",function(){return g});var d=a(61),e=a.n(d);d=a(1);var h=a.n(d);d=a(11);var k=a.n(d);d=a(5);var l=a.n(d);a(0).b.createLogger(f);var n=["id","name","parameters","tags"],q=["placeholder","options","isVisible","label","defaultValue"],p="bool text number textarea combo multi daterange pivotCombo label".split(" ").reduce(function(a,g){a[g]=!0;return a},{}),g=function(){function a(c){var g=
c.id,b=c.name,d=c.tags;d=void 0===d?[]:d;c=c.parameters;c=void 0===c?[]:c;l()(this,a);if(!g||!b)throw Error("Pivot template expects fields 'id' and 'name', got '"+g+"' and '"+b+"'");c.forEach(function(a){if(!a.name)throw Error('Pivot parameters must have fields name, inputType;\n                    got "'+a.name+'", "'+a.inputType+'"\n                    for pivot '+g+' ("'+b+'")');if(!(a.inputType in p))throw Error('Pivot parameter "'+a.name+'"\n                    has unknown inputType value "'+
a.inputType+'"\n                    for pivot '+g+' ("'+b+'")');});this.id=g;this.name=b;this.tags=d;this.parameters=c;this.pivotParametersUI=this.addTemplateNamespace(g,c);this.pivotParameterKeys=k()(this.pivotParametersUI)}a.prototype.clone=function(){var c=this,g=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};k()(g).filter(function(a){return-1===n.indexOf(a)}).map(function(a){throw Error("Unexpected setting override of '"+a+"'\n                    for '"+g.id+"' ("+g.name+")");});var b=
(g.parameters||[]).filter(function(a){return 0===c.parameters.filter(function(c){return c.name===a.name}).length}),d=new a({id:g.id,name:g.name,parameters:b.concat(this.parameters),tags:g.tags||this.tags});this.cloneParameters(d,g,b);return d};a.prototype.cloneParameters=function(a,c,g){if("parameters"in c){var b=g.reduce(function(a,c){a[c.name]=c;return a},{});c.parameters.filter(function(a){return!b[a.name]}).map(function(c){return h()({id:a.tagTemplateNamespace(a.id,c.name)},c)}).forEach(function(c){k()(c).filter(function(a){return-1===
["id","name"].indexOf(a)}).map(function(g){if(-1===q.indexOf(g))throw Error("Overriding template field "+g+" not allowed\n                                    in parameter "+c.label+"\n                                    for pivot "+a.id+" ("+a.name+")");return g}).forEach(function(g){a.pivotParametersUI[c.id][g]=c[g]})})}};a.prototype.tagTemplateNamespace=function(a,c){return a+"$$$"+c};a.prototype.addTemplateNamespace=function(a,c){var g=this;return c.map(function(c){return h()({id:g.tagTemplateNamespace(a,
c.name)},c)}).reduce(function(a,c){a[c.id]=c;return a},{})};a.prototype.stripTemplateNamespace=function(a){var c=this;return e()(a).filter(function(a){return a[0].startsWith(c.id)}).map(function(a){var c=a[1];return{key:a[0].split("$$$")[1],value:c}}).reduce(function(a,c){a[c.key]=c.value;return a},{})};return a}()}).call(b,"src/shared/services/templates/template.js")},function(e,b,a){(function(f){a.d(b,"a",function(){return k});b.c=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{};return e()(a).reduce(function(b,d){var p=a[d]instanceof Object&&"value"in a[d]?a[d].value:a[d];p=p instanceof Array?p.map(function(a){return'"'+a+'"'}).join(","):p;b[d]=p;return b},{})};var d=a(11),e=a.n(d);d=a(0);var h=a(30);a.d(b,"b",function(){return h.c});d.b.createLogger(f);var k=[{name:"instructions",inputType:"label",isVisible:!1},{name:"endpoint",inputType:"textarea",label:"URL:",placeholder:"http://"},{name:"method",label:"method",inputType:"combo",options:[{value:"GET",label:"GET"},{value:"POST",
label:"POST"}]},{name:"timeout",inputType:"number",label:"timeout (s):",placeholder:"10",defaultValue:10},{name:"headers",label:"headers",inputType:"multi",options:[]},{name:"body",inputType:"textarea",label:"body",placeholder:""},{name:"jq",inputType:"textarea",label:"Postprocess with jq:",placeholder:"."},{name:"outputType",label:"shape",inputType:"combo",options:[{value:"table",label:"table"},{value:"graph",label:"graph"}]},{name:"nodes",inputType:"multi",label:"Nodes:",options:[]},{name:"attributes",
inputType:"multi",label:"Attributes:",options:[]}]}).call(b,"src/shared/services/templates/http/common.js")},function(e,b){e.exports=require("path")},function(e,b,a){a.d(b,"a",function(){return n});a.d(b,"b",function(){return n});a.d(b,"c",function(){return l});e=a(31);e=a.n(e);var f=a(113),d=a(117),m=a(131),h=a(133),k=a(137);a.d(b,"d",function(){return k.a});var l=Object(h.a)(m.a),n=e()(f.a,h.a)(d.a)},function(e,b,a){var f=a(115);a.d(b,"b",function(){return f.a});var d=a(116);a.d(b,"a",function(){return d.a})},
function(e,b){e.exports=require("react-select")},function(e,b){e.exports=require("react-bootstrap/lib/Glyphicon")},function(e,b){e.exports=require("react-bootstrap/lib/Grid")},function(e,b,a){a.d(b,"a",function(){return f});e=a(31);e=a.n(e);b=a(134);a=a(135);var f=e()(a.a,b.a)(function(){return null})},function(e,b,a){a.d(b,"a",function(){return h});a.d(b,"b",function(){return h});a.d(b,"c",function(){return m});e=a(31);e=a.n(e);b=a(139);var f=a(140),d=a(141);a=a(144);var m=Object(a.b)(d.a),h=e()(b.a,
a.a)(f.a)},function(e,b,a){a.d(b,"b",function(){return f});a.d(b,"d",function(){return d});a.d(b,"c",function(){return m});a.d(b,"a",function(){return h});a.d(b,"e",function(){return k});e=a(1);a=a.n(e);var f=[{id:"stackedBushyGraph",controls:"lockedAtlasBarnesXY",friendlyName:"Investigation"},{id:"atlasbarnes",controls:"atlasbarnes",friendlyName:"Force Directed"},{id:"insideout",controls:"lockedAtlasBarnesR",friendlyName:"Network Map"}],d={attribute:"canonicalType",mapping:{categorical:{fixed:{alert:"exclamation",
event:"exclamation-circle",file:"file",geo:"flag",hash:"file-text",host:"desktop",id:"barcode",ip:"desktop",log:"database",mac:"barcode",port:"microchip",product:"window-maximize",tag:"tag",url:"link",user:"user",vendor:"window-maximize"},other:"question"}}},m={attribute:"canonicalType",variation:"categorical",mapping:{categorical:{fixed:{alert:"#E75D51",event:"#FF9D40",file:"#C55288",geo:"#5D7850",hash:"#C55288",host:"#40A7FF",id:"#EDEDED",ip:"#256599",log:"#EDEDED",mac:"#256599",port:"#EDEDED",
product:"#EDEDED",tag:"#C55288",url:"#6DB34B",user:"#40A7FF",vendor:"#EDEDED"},other:"#EDEDED"}}};e={attribute:"canonicalType",mapping:{categorical:{fixed:{alert:100,event:40,file:80,geo:80,hash:80,host:100,id:80,ip:100,mac:100,port:80,product:80,log:80,url:80,user:100,tag:80,vendor:80},other:40}}};e={pointLegendTypeIconEncoding:d,pointLegendTypeColorEncoding:m,pointLegendTypeSizeEncoding:e,pointLegendPivotColorEncoding:{attribute:"Pivot",variation:"categorical",mapping:{categorical:{fixed:{0:"#C55288",
1:"#256599",2:"#FF9D40",3:"#5D7850",4:"#6DB34B",5:"#40A7FF",6:"#E75D51",7:"#A71AD3",8:"#268D59",9:"#C67600",10:"#B42852",11:"#1B3872",12:"#760E0E",13:"#1C5437",14:"#84DBAE",15:"#6F45E2",16:"#C55288",17:"#256599",18:"#FF9D40",19:"#5D7850",20:"#6DB34B",21:"#40A7FF",22:"#E75D51",23:"#A71AD3",24:"#268D59",25:"#C67600",26:"#B42852",27:"#1B3872",28:"#760E0E",29:"#1C5437",30:"#84DBAE",31:"#6F45E2",32:"#C55288",33:"#256599",34:"#FF9D40",35:"#5D7850",36:"#6DB34B",37:"#40A7FF",38:"#E75D51",39:"#A71AD3",40:"#268D59",
41:"#C67600",42:"#B42852",43:"#1B3872",44:"#760E0E",45:"#1C5437",46:"#84DBAE",47:"#6F45E2",48:"#1C5437",49:"#84DBAE",50:"#6F45E2"},other:"#EDEDED"}}},pointIconEncodingDefault:d,pointColorEncodingDefault:m,pointSizeEncodingDefault:e};var h={atlasbarnes:a()({},e),insideout:a()({},e),stackedBushyGraph:a()({},e)},k={atlasbarnes:{pointSize:1,dissuadeHubs:!0,gravity:8,scalingRatio:12},insideout:{pointSize:1,defaultShowArrows:!1,defaultShowPointsOfInterest:!0,dissuadeHubs:!0},stackedBushyGraph:{pointSize:2,
defaultShowArrows:!1,defaultShowPointsOfInterest:!0,play:0}}},function(e,b){e.exports={"show-busy-cursor":"_2Z0fQ",wrapper:"_2GXGD","left-nav":"_3k-zM","main-panel":"_dUKd",logo:"_3VB84",nav:"_3o_fj","server-status-alert":"_2UE_D"}},function(e,b,a){a.d(b,"a",function(){return m});e=a(5);var f=a.n(e),d=a(4);a.n(d);var m=function(){function a(b){var d=b.id;b=b.name;f()(this,a);this.id=d;this.name=b;this.lastUpdated=Date.now();this.status={level:"info",message:"Health checks have never been run."}}a.prototype.search=
function(){return d.Observable.throw(Error("Search not implemented for connector: "+this.name))};a.prototype.healthCheck=function(){return d.Observable.throw(Error("Health check not implemented for connector: "+this.name))};return a}()},function(e,b,a){(function(f){function d(a){var c=a.labels,b={};for(a=0;a<c.length;a++)b[c[a].canonicalType]=a;a=g.a.mapObject(b,function(a,g){return{count:0,example:a,name:g,icon:u.d.mapping.categorical.fixed[c[a].canonicalType]||u.d.mapping.categorical.other,color:u.c.mapping.categorical.fixed[c[a].canonicalType]||
u.c.mapping.categorical.other}});b=g.a.mapObject(b,function(){return{}});for(var d=0;d<c.length;d++){var p=a[c[d].canonicalType],f=b[c[d].canonicalType],e=c[d].node;g.a.has(f,e)||(f[e]=1,p.count++)}return{entities:g.a.values(a),resultCount:c.length}}function e(a){var c=a.app;a=a.pivot;var g=a.template.encodings,b=a.results,d=b.nodes;b=b.edges;g&&g.point&&d.forEach(function(a){return q()(g.point).forEach(function(c){g.point[c](a)})});g&&g.edge&&b.forEach(function(a){return q()(g.edge).forEach(function(c){g.edge[c](a)})});
return{app:c,pivot:n()({},a,{results:{nodes:d,edges:b}})}}function h(a){var c=a.app,b=a.pivot;a=b.events;var d=void 0===a?[]:a,f=b.graph;f=void 0===f?{}:f;a=f.nodes;a=void 0===a?[]:a;f=f.edges;f=void 0===f?[]:f;var e=b.attributes,r=void 0===e?[]:e;e=b.attributesBlacklist;var m=void 0===e?[]:e;e=b.connections;var k=void 0===e?[]:e;e=b.connectionsBlacklist;var h=void 0===e?[]:e,t=void 0===k||0===k.length||-1!==k.indexOf("*"),u=[],I=[],J={};e=function(a){var c=d[a],b=c.EventID||Object(p.simpleflake)().toJSON();
a=c.index;var f=c.searchLink,e=n()({},void 0!==a?{index:[a]}:{},void 0!==f?{searchLink:[f]}:{});a=q()(c).filter(function(a){return"EventID"!==a}).filter(function(a){return t||-1<k.indexOf(a)}).filter(function(a){return void 0!==c[a]}).filter(function(a){return-1===h.indexOf(a)});var w=q()(c).filter(function(a){return void 0!==c[a]}).filter(function(a){return"EventID"===a||!r.length||-1<r.indexOf(a)}).filter(function(a){return-1===m.indexOf(a)});I.push(l()({},g.a.pick(c,w),n()({node:b,type:"EventID"},
e)));for(f=0;f<a.length;f++){var x=a[f],A=String(c[x]).trim();x in c&&void 0!==c[x]&&null!==c[x]&&""!==A&&'""'!==A&&"''"!==A&&function(){var a=J[c[x]];a?(a.cols||(a.cols=[]),-1===a.cols.indexOf(x)&&a.cols.push(x),["index","searchLink"].forEach(function(g){var b=c[g];void 0!==b&&(void 0===a[g]?a[g]=[b]:-1===a[g].indexOf(b)&&a[g].push(b))})):(a=n()({node:c[x],type:x,cols:[x]},e),I.push(a),J[c[x]]=a);u.push(l()({},g.a.pick(c,w),n()({destination:c[x],source:b,col:x},e,{edge:b+":"+x,edgeType:"EventID->"+
x,edgeTitle:b+"->"+c[x]})))}()}};for(var K=0;K<d.length;K++)e(K);a=I.concat(a).filter(function(a){a=a.type;return t||"EventID"===a||-1<k.indexOf(a)});f=u.concat(f.map(function(a,c){return"edge"in a?a:n()({},a,{edge:"edge_"+b.id+"_"+c})}));return{app:c,pivot:n()({},b,{results:{edges:f,nodes:a}})}}b.a=function(a){var g=e(h({app:a.app,pivot:a.pivot}));a=g.app;g=g.pivot;var b=g.results,p=b.nodes;p=void 0===p?[]:p;b=b.edges;b=void 0===b?[]:b;Object(r.c)({data:{labels:p,graph:b}});b=Object(c.a)(b);var f=
Object(c.b)({nodes:p,edges:b,encodings:g.template.encodings});return{app:a,pivot:n()({},g,{results:{graph:b.concat(f),labels:p},resultSummary:d({labels:p})})}};var k=a(65),l=a.n(k);k=a(1);var n=a.n(k);k=a(11);var q=a.n(k),p=a(23);a.n(p);k=a(2);var g=a.n(k),c=a(203),r=a(66),u=a(45);a(0).b.createLogger(f)}).call(b,"src/shared/services/shapeResults.js")},function(e,b,a){function f(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
[];if(a.length){if(b.length){if(1===a.length&&1===b.length)return a[0]===b[0]?a:[a[0],b[0]];for(var d=a.slice(),f=0;f<b.length;f++){var e=b[f];-1===a.indexOf(b[f])&&d.push(e)}return d}return a}return b}a.d(b,"a",function(){return m});b.b=function(a,b,e,m){if(!a)return b;if(!b)return a;e=Object(d.a)((a.nodes||[]).concat(b.nodes||[]),e,{cols:f,refTypes:f,Pivot:Math.min});a=(a.edges||[]).concat(b.edges||[]);m=void 0!==m?Object(d.a)(a,m,{cols:f,Pivot:Math.min}):a;return{nodes:e,edges:m}};var d=a(205),
m={sourceField:"source",destinationField:"destination",typeField:"type",idField:"node",idEdgeField:"edge"}},function(e,b,a){function f(a,c){return a.reduce(function(a,g){return m()({},a,g[c])},{})}function d(a,c){return h.a.unique([].concat.apply([],a.map(function(a){return a[c]||[]})))}a.d(b,"f",function(){return q});a.d(b,"b",function(){return p});a.d(b,"g",function(){return g});a.d(b,"c",function(){return c});a.d(b,"e",function(){return r});a.d(b,"a",function(){return u});a.d(b,"d",function(){return t});
e=a(1);var m=a.n(e);e=a(2);var h=a.n(e);e=a(206);b=a(207);var k=a(208),l=a(209),n=a(210);a=a(211);a=[e,b,k,l,n,a];var q=a.reduce(function(a,c){var g;return m()({},a,(g={},g[c.product]=c,g))},{}),p=f(a,"colTypes"),g=f(a,"refTypes"),c=d(a,"defaultFields");d(a,"desiredAttributes");d(a,"desiredEntities");var r=d(a,"fieldsBlacklist"),u=d(a,"attributesBlacklist"),t=d(a,"entitiesBlacklist")},function(e,b,a){a.d(b,"c",function(){return d});var f=a(52);a.d(b,"a",function(){return f.a});a.d(b,"b",function(){return f.c});
a.d(b,"d",function(){return f.d});var d={point:{pointCanonicalType:function(a){a.canonicalType=f.b[a.type]}},edge:{edgeRefType:function(a){a.edgeType&&0===a.edgeType.indexOf("EventID->")&&(a.refType=f.f[a.edgeType.slice(9)])}}}},function(e,b,a){function f(a,c){return a.reduce(function(a,g){return m()({},a,g[c])},{})}function d(a,c){return h.a.unique([].concat.apply([],a.map(function(a){return a[c]||[]})))}a.d(b,"e",function(){return n});a.d(b,"b",function(){return q});a.d(b,"f",function(){return p});
a.d(b,"c",function(){return g});a.d(b,"a",function(){return c});a.d(b,"d",function(){return r});e=a(1);var m=a.n(e);e=a(2);var h=a.n(e);e=a(220);b=a(221);var k=a(222),l=a(223);a=a(224);a=[e,b,k,l,a];var n=a.reduce(function(a,c){var g;return m()({},a,(g={},g[c.product]=c,g))},{}),q=f(a,"colTypes"),p=f(a,"refTypes"),g=d(a,"defaultFields");d(a,"desiredAttributes");d(a,"desiredEntities");d(a,"fieldsBlacklist");var c=d(a,"attributesBlacklist"),r=d(a,"entitiesBlacklist")},function(e,b,a){b.a=function(a,
b){a.replace(/\{([0-9a-zA-Z_]+)\}/g,function(a,d){if(!(d in b)||void 0===b[d])throw Error('Missing field "'+d+'"');});return f()(a,b)};e=a(229);var f=a.n(e)},function(e,b,a){(function(f){a.d(b,"a",function(){return p});a.d(b,"b",function(){return q});var d=a(110),e=a(168),h=a(31);h=a.n(h);var k=a(174),l=a(27);a.n(l);var n=a(178),q=Object(n.b)(k.a),p=h()(l.connect,d.a,n.a)(function(a){return f.createElement(e.a,a)})}).call(b,a(3))},function(e,b,a){var f=a(119);a.d(b,"b",function(){return f.a});var d=
a(120);a.d(b,"a",function(){return d.a});a(74)},function(e,b){e.exports=require("react-bootstrap/lib/ControlLabel")},function(e,b){e.exports=require("react-bootstrap/lib/FormGroup")},function(e,b){e.exports=require("prop-types")},function(e,b){e.exports=require("inline-style-prefixer")},function(e,b){e.exports=require("react-style-proptype")},function(e,b){e.exports=require("babel-runtime/core-js/object/entries")},function(e,b,a){function f(){return k.a.reduce(function(a,b){a[b.id]=b;return a},{})}
b.b=function(a){var b=f(),e=new m.a({loadApp:a,resultName:"template",loadById:function(a){return d.Observable.of(b[a])},createModel:h.f,cache:{}});return{loadTemplatesById:function(a){return e.loadByIds(a.templateIds)}}};b.a=f;var d=a(4);a.n(d);var m=a(33),h=a(20),k=a(191)},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});var f=a(195);a.d(b,"splunkConnector0",function(){return f.a});var d=a(198);a.d(b,"elasticsearchConnector0",function(){return d.a});var m=a(200);a.d(b,"whoisConnector0",
function(){return m.a});var h=a(85);a.d(b,"defaultHttpConnector",function(){return h.a})},function(e,b){e.exports=require("request")},function(e,b){e.exports=require("babel-runtime/core-js/object/assign")},function(e,b,a){(function(f){function d(a){return a.replace(/[^0-9a-f]/g,"").split(/(..)/).filter(function(a){return a.length}).join(":")}function e(a,g){a.data.labels.forEach(function(a){g[a.node]&&(a.node=g[a.node])});a.data.graph.forEach(function(a){g[a.source]&&(a.source=g[a.source]);g[a.destination]&&
(a.destination=g[a.destination]);g[a.node]&&(a.node=g[a.node])})}function h(a){var g={};a.data.labels.filter(function(a){return"mac"===a.canonicalType}).map(function(a){return a.node}).forEach(function(a){d(a)!==a&&(g[a]=d(a))});return g}b.b=function(a){a=n()(a).length;return 2/l()(100+a)};b.a=function(a,g){var c=q.a.idField;f.each(a,function(a){a.x=g[a[c]].x;a.y=g[a[c]].y})};b.c=function(a){e(a,h(a));return a};var k=a(204),l=a.n(k);k=a(10);var n=a.n(k),q=a(49)}).call(b,a(2))},function(e,b,a){var f=
a(234);a.d(b,"a",function(){return f.a});a.d(b,"b",function(){return f.b})},function(e,b,a){(function(f){function d(a){return l.a.mapObject(a,function(a){return"function"===typeof a?e(a):a})}function e(a){return function(){for(var c=arguments.length,g=Array(c),b=0;b<c;b++)g[b]=arguments[b];c=l.a.omit(l.a.omit(g[0],"options"),function(a){return"function"===typeof a});z.info("Calling "+a.name+" "+k()(c));return a.apply(this,g)}}var h=a(12),k=a.n(h);h=a(2);var l=a.n(h);h=a(0);var n=a(93),q=a(94),p=a(62);
a.d(b,"c",function(){return p.a});var g=a(95),c=a(96),r=a(97),u=a(98),t=a(99);a.d(b,"b",function(){return t.b});var v=a(100),w=a(101),A=a(102),x=a(103),z=h.b.createLogger(f);b.a=function(a,b){var f=b.pivotPath,e=b.investigationPath,m=b.investigationsByIdCache;b=Object(n.a)(b.app);a=Object(q.a)({convict:a,loadApp:b,listTemplates:p.a,listConnectors:t.b,listInvestigations:g.b.bind(null,e)}).loadUsersById;var l=Object(p.b)(b).loadTemplatesById,k=Object(t.a)(b).loadConnectorsById,h=Object(g.a)(b,e,m);
e=h.loadInvestigationsById;m=h.unloadInvestigationsById;var B=h.persistInvestigationsById;h=h.unlinkInvestigationsById;f=Object(u.a)(b,f,l);return d({loadApp:b,loadUsersById:a,loadTemplatesById:l,loadConnectorsById:k,loadInvestigationsById:e,unloadInvestigationsById:m,persistInvestigationsById:B,unlinkInvestigationsById:h,createInvestigation:c.b,switchActiveInvestigation:c.e,cloneInvestigationsById:c.a,saveInvestigationsById:c.d,removeInvestigationsById:c.c,loadPivotsById:f.loadPivotsById,unloadPivotsById:f.unloadPivotsById,
persistPivotsById:f.persistPivotsById,unlinkPivotsById:f.unlinkPivotsById,insertPivot:r.a,splicePivot:v.a,searchPivot:A.a,checkConnector:w.a,uploadGraph:x.a})}}).call(b,"src/shared/services/index.js")},function(e,b){e.exports=require("bunyan")},function(e,b){e.exports=require("babel-runtime/helpers/typeof")},function(e,b){e.exports=require("rc-switch")},function(e,b){e.exports=require("react-bootstrap/lib/FormControl")},function(e,b){e.exports=require("moment")},function(e,b,a){e=a(5);var f=a.n(e);
e=a(7);var d=a.n(e);e=a(8);var m=a.n(e);e=a(73);var h=a.n(e),k=a(121);a.n(k);var l=a(122);a.n(l);e=a(3);var n=a.n(e);e=a(123);var q=a.n(e);e=a(124);var p=a.n(e);e=a(24);var g=a.n(e);e=a(15);var c=a.n(e),r={pickle:function(a){return a?a.toJSON():null},unpickle:function(a){return a?h()(a):h()()}},u={pickle:function(a){return a?h.a.utc(a,"hh:mm:ss a").toJSON():null},unpickle:function(a){return h.a.utc(a).format("hh:mm:ss a")}};a=function(a){function b(c,g){f()(this,b);c=d()(this,a.call(this,c,g));c.state=
{focused:!1};return c}m()(b,a);b.prototype.render=function(){var a,b=this,d=this.props,f=d.baseid,e=d.placeholder,m=d.date,t=d.time,v=d.timezone,D=d.onValueChange;return n.a.createElement("div",{className:(d.className||"")+" "+g()((a={},a[c.a["pivot-datetimepicker-container"]]=!0,a[c.a["is-default"]]=!m,a))},n.a.createElement(k.SingleDatePicker,{id:"sdp_"+f,date:r.unpickle(m),onDateChange:function(a){return D({date:r.pickle(a)})},focused:this.state.focused,onFocusChange:function(a){return b.setState({focused:a.focused})},
isOutsideRange:function(){return!1},showClearDate:!0,orientation:l.HORIZONTAL_ORIENTATION,showDefaultInputIcon:!1,withPortal:!0,keepOpenOnDateSelect:!0,hideKeyboardShortcutsPanel:!0,displayFormat:function(){if(m){var a=h()(m).utc().format(h.a.localeData().longDateFormat("L")),c=h()(t).utc().format("hh:mm:ss a");return"["+a+" "+c+"]"}return"["+e+"]"},renderCalendarInfo:function(){return n.a.createElement("span",{onClick:function(a){return a.stopPropagation()}},n.a.createElement("div",{className:c.a["pivot-timepicker-container"]},
n.a.createElement("span",{className:c.a["pivot-timepicker"]},n.a.createElement(q.a,{value:u.unpickle(t),onChange:function(a){return D({time:u.pickle(a)})}})),n.a.createElement(p.a,{absolute:!0,defaultValue:v,placeholder:"Select timezone...",onChange:function(a){return D({timezone:a})}})))},placeholder:e}))};return b}(n.a.Component);b.a=a},function(e,b){e.exports=require("react-bootstrap/lib/ButtonGroup")},function(e,b){e.exports=require("react-bootstrap/lib/Form")},function(e,b){e.exports=require("react-bootstrap/lib/Media")},
function(e,b){e.exports=require("react-bootstrap-table")},function(e,b){e.exports=require("react-bootstrap/lib/Alert")},function(e,b,a){b.e=function(a){return{id:a,type:f}};b.b=function(a){return{type:d,userId:a}};b.f=function(a,b){return{type:m,params:a,id:b}};b.d=function(a){return{type:h,id:a}};b.a=function(a){return{type:k,id:a}};b.c=function(a,b){return{type:l,userId:a,investigationIds:b}};var f="select-investigation",d="create-investigation",m="set-investigation-params",h="save-investigation",
k="copy-investigation",l="delete-investigations"},function(e,b){e.exports=require("sprintf-js")},function(e,b){e.exports=require("fs")},function(e,b){e.exports=require("glob")},function(e,b){e.exports=require("moment-timezone")},function(e,b,a){(function(f){a.d(b,"a",function(){return v});var d=a(1),e=a.n(d);d=a(13);var h=a.n(d);d=a(5);var k=a.n(d);d=a(7);var l=a.n(d);d=a(8);var n=a.n(d),q=a(4);a.n(q);var p=a(9);a.n(p);d=a(64);d=a.n(d);var g=a(0),c=a(47),r=q.Observable.bindNodeCallback(d.a.get.bind(d.a)),
u=q.Observable.bindNodeCallback(d.a.post.bind(d.a)),t=g.b.createLogger(f),v=new (function(a){function c(g){var b=g.timeout_s;b=void 0===b?20:b;g=h()(g,["timeout_s"]);k()(this,c);g=l()(this,a.call(this,g));g.timeout_s=b;return g}n()(c,a);c.prototype.search=function(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},g=c.method,b=void 0===g?"GET":g;g=c.timeout;var d=c.body;c=c.headers;var f=void 0===c?{}:c;t.info("HttpConnector "+b,a,d);t.debug("Using timeout: ",1E3*(g||this.timeout_s));
c={url:a,headers:f,gzip:!0};c="GET"===b?r(c):u(e()({},c,{body:d}));var m=Date.now();return c.catch(function(c){return q.Observable.throw(new p.VError({name:"HttpConnectorGet",cause:c,info:{url:a}},"Failed to make http request",a))}).do(function(c){var g=c[0];t.info("Download time",Date.now()-m,"ms");t.trace(g);c=(g||{}).statusCode;200!==c&&t.error({msg:"error",statusCode:c,method:b,headers:f,requestBody:d,responseBody:(g||{}).body});if(401===c)throw new p.VError({name:"HttpStatusError",info:{url:a}},
"Unauthorized error for URL",{url:a});if(200!==c)throw g={url:a,statusCode:c},new p.VError({name:"HttpStatusError",info:g},"URL gave an unexpected response code: "+(c||"none available"),g);}).timeoutWith(1E3*(g||this.timeout_s),q.Observable.throw(new p.VError({name:"Timeout",info:"Max wait: "+this.timeout_s+" seconds"},"URL took too long to respond")))};c.prototype.healthCheck=function(){return q.Observable.of("Health checks passed").do(function(){return t.info("Health checks passed for HTTP connnector")})};
return c}(c.a))({id:"http-connector",name:"HTTP"})}).call(b,"src/shared/services/connectors/http.js")},function(e,b,a){(function(f){a.d(b,"a",function(){return t});var d=a(1),e=a.n(d);d=a(5);var h=a.n(d);d=a(7);var k=a.n(d);d=a(8);var l=a.n(d),n=a(4);a.n(n);d=a(84);var q=a.n(d);d=a(0);var p=a(35),g=a(63),c=a(48),r=a(51),u=d.b.createLogger(f),t=function(a){function b(c){h()(this,b);var d=k()(this,a.call(this,c)),f=c.connections,e=c.encodings,p=c.attributes,m=c.connectionsBlacklist,l=c.attributesBlacklist;
d.toES=c.toES;d.connections=f;d.connectionsBlacklist=m||r.d;d.encodings=e;d.attributes=p;d.attributesBlacklist=l||r.a;d.connector=g.elasticsearchConnector0;return d}l()(b,a);b.prototype.searchAndShape=function(a){var g=this,b=a.app,d=a.pivot,f=a.pivotCache,e=a.time;a=this.stripTemplateNamespace(d.pivotParameters);var p=this.toES(a,f,{time:e}),r=p.searchQuery;e=p.searchParams;p=p.searchIndex;console.log(r);u.trace({pivotParameters:d.pivotParameters,args:a},"Pivot parameters");d.template=this;if(d.enabled)return this.connector.search(r,
e,p).do(function(a){var c=a.events,b=a.isPartial;d.resultCount=a.resultCount;d.events=c;d.isPartial=b;d.connections=g.connections;d.connectionsBlacklist=g.connections&&g.connections.length?[]:g.connectionsBlacklist;d.attributes=g.attributes;d.attributesBlacklist=g.attributes&&g.attributes.length?[]:g.attributesBlacklist}).map(function(){return Object(c.a)({app:b,pivot:d})}).do(function(a){a=a.pivot;f[d.id]={results:a.results,query:r};d.results=a.results});d.resultSummary={};d.resultCount=0;return n.Observable.of({app:b,
pivot:d})};b.prototype.dayRangeToSplunkParams=function(a,c){a={from:(a||{}).from||{},to:(a||{}).to||{}};c={from:(c||{}).from||{},to:(c||{}).to||{}};var g={from:{date:a.from.date||c.from.date,time:a.from.time||c.from.time,timezone:a.from.timezone||c.from.timezone},to:{date:a.to.date||c.to.date,time:a.to.time||c.to.time,timezone:a.to.timezone||c.to.timezone}};if(g.from.date||g.to.date){var b=function(a,c){var g=a.date,b=a.time;a=a.timezone||"America/Los_Angeles";g=q()(g).utc().format("L");c=null===
b||void 0===b?c:q()(b).utc().format("H:m:s");c=q.a.tz(g+" "+c,"L H:m:s",a).unix();return q.a.unix(c).format()};b=e()({},g.from.date?{earliest_time:b(g.from,"0:0:0")}:{},g.to.date?{latest_time:b(g.to,"23:59:59")}:{});u.trace("Date range",a,c,"->",g,"->",b);return b}};return b}(p.a)}).call(b,"src/shared/services/templates/elasticsearch/esPivot.js")},function(e,b,a){(function(f){a.d(b,"a",function(){return n});a.d(b,"b",function(){return q});var d=a(1),e=a.n(d),h=a(53);d=a(88);var k=a(36),l=a(0).b.createLogger(f),
n=new d.a({id:"http-search",name:"URL: Search",tags:["Demo","Splunk"],toUrls:function(a){var g=a.endpoint,c=a.body,b=a.method;b=void 0===b?"GET":b;a=Object(k.c)(a);g=Object(h.a)(g,a);c="POST"===b?Object(h.a)(c,a):void 0;l.debug("url",g);return[e()({url:g,params:a},"POST"===b?{body:c}:{})]},parameters:[{name:"instructions",inputType:"label",isVisible:!1}].concat(k.a),encodings:k.b}),q=[n]}).call(b,"src/shared/services/templates/http/httpSearch.js")},function(e,b,a){(function(f){function d(a){var c=
a.nodes;c=void 0===c?[]:c;var g=a.edges,b=void 0===g?[]:g;g=b.filter(function(a){return"source"in a&&"destination"in a}).map(x.a);if(!("edges"in a))throw new w.VError({name:"MissingEdges",cause:Error("MissingEdges")},'Transformed result missing field "edges"');if(!(b instanceof Array))throw new w.VError({name:"EdgesTypeError",cause:Error("EdgesTypeError")},"Edges should be an array");if(b.length&&!g.length)throw new w.VError({name:"MissingEdgeIDs",cause:Error("MissingEdgeIDs")},"Pivot returned "+
b.length+' edges but all are missing fields "source" or "destination"');a=c.filter(function(a){return"node"in a}).map(x.a);if(c&&!(c instanceof Array))throw new w.VError({name:"NodesTypeError",cause:Error("NodesTypeError")},"Nodes should be an array");if(c.length&&!a.length)throw new w.VError({name:"MissingNodeIDs",cause:Error("MissingNodeIDs")},"Pivot returned "+c.length+' nodes but none have id field "node"');return{nodes:a,edges:g}}function e(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
"table",c=arguments[1],g=arguments[2],b=arguments[3];switch(a){case "table":y.trace("searchAndShape response",b);b=b instanceof Array?b.map(x.a):[Object(x.a)(b)];if(b.length&&!("EventID"in b[0]))for(var f=0;f<b.length;f++)b[f].EventID=c.id+":"+(g+f);return{mode:a,table:b};case "graph":return{mode:a,graph:d(b)};default:throw new w.VError({name:"InvalidParameter",cause:Error("InvalidParameter"),info:{mode:a}},'Output type should be "table" or "graph", received "'+a+'"');}}function h(){var a=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:[];y.debug("headers",a);return(a.value?a.value:a).reduce(function(a,c){var g,b=c.indexOf(":");if(-1===b)throw new w.VError({name:"InvalidParameter",cause:Error("InvalidParameter"),info:{header:c}},'Headers should be of form "key:value", received "'+c+'"');var d=c.slice(0,b);c=c.slice(b+1);return r()({},a,(g={},g[d]=c,g))},{})}function k(a){a=a instanceof Object&&"value"in a?a.value:a;if(void 0!==a){var c=Number(a);if(0<c)return Math.ceil(c);throw new w.VError({name:"InvalidParameter",
cause:Error("InvalidParameter"),info:{time:a}},'Timeout should be a number (seconds) like "10", received "'+a+'"');}}a.d(b,"a",function(){return F});var l=a(12),n=a.n(l);l=a(13);var q=a.n(l);l=a(5);var p=a.n(l);l=a(7);var g=a.n(l);l=a(8);var c=a.n(l);l=a(1);var r=a.n(l),u=a(53),t=a(4);a.n(t);var v=a(89),w=a(9);a.n(w);var A=a(48),x=a(90);l=a(35);var z=a(85),B=a(0),C=a(49),y=B.b.createLogger(f),F=function(a){function b(c){p()(this,b);var d=g()(this,a.call(this,c)),f=c.encodings,e=c.connector;d.toUrls=
c.toUrls;d.encodings=f;d.connector=e||z.a;return d}c()(b,a);b.prototype.clone=function(c){var g=this,b=c.toUrls,d=c.encodings,f=c.connector;c=q()(c,["toUrls","encodings","connector"]);if(b||f)throw Error("Cannot override toUrls and connector\n                when "+c.id+" ("+c.name+") extending HttpPivot");var e=a.prototype.clone.call(this,c);["toUrls","connector"].forEach(function(a){e[a]=g[a]});e.encodings=d||this.encodings;e.searchAndShape=this.searchAndShape;e.clone=this.clone;return e};b.prototype.searchAndShape=
function(a){var c=this,g=a.app,b=a.pivot,d=a.pivotCache;if(!b.enabled)return b.resultSummary={},b.resultCount=0,t.Observable.of({app:g,pivot:b});var f=this.stripTemplateNamespace(b.pivotParameters);y.debug("http searchAndShape",{params:f,pivotParameters:b.pivotParameters});var p=f.jq,m=f.nodes,l=f.attributes,x=f.outputType,q=f.method;a=f.timeout;var B=h(f.headers),z=k(a);y.trace("searchAndShape http: jq",{jq:p});if((p||"").match(/\|.*(include|import)\s/))return t.Observable.throw(new w.VError({name:"JqSandboxException",
cause:Error("JqSandboxException"),info:{jq:p}},"JQ include and imports disallowed",{jq:p}));var E=void 0;try{E=this.toUrls(f,d)}catch(S){return t.Observable.throw(new w.VError({name:"UrlGeneratorError",cause:S,info:{params:f,pivotCache:d}},"Failed to generate urls",f))}var F=0;return t.Observable.from(E).flatMap(function(a){if(a instanceof Error)return y.error("HTTP GET received an Error url",a),t.Observable.of({e:a});var g=a.url,d=a.body,f=a.params;y.debug("searchAndShape http: url",{url:g,headersProcessed:B,
timeoutProcessed:z});return c.connector.search(g,{method:q,body:d,headers:B,timeout:z}).switchMap(function(a){a=a[0];y.debug("response",n()((a||{}).body).slice(0,1E3));return Object(v.a)(a.body,Object(u.a)(p||".",f)).do(function(a){return y.debug("jq response",a)}).catch(function(a){y.error("jq error",{url:g,jq:p,e:a});return t.Observable.throw(new w.VError({name:"JqRuntimeError",cause:a,info:{url:g,jq:p}},"Failed to run jq post process",{url:g,jq:p}))})}).map(function(a){return e(x,b,F,a)}).do(function(a){var c=
a.table;y.debug("transformed output",{table:c,graph:a.graph});c&&(F+=c.length)}).catch(function(a){return t.Observable.of({e:a?a:Error("GenericHttpGetException")})})}).reduce(function(a,c){var g=c.table,b=c.graph;c=c.e;return{table:a.table?a.table.concat(g||[]):g,graph:Object(C.b)(a.graph,b),e:c?a.e.concat([c]):a.e}},{table:void 0,graph:void 0,e:[]}).last().flatMap(function(a){var c=a.table,g=a.graph;a=a.e;if(a.length&&a.length===E.length)return y.error("All urls failed (out of "+E.length+")"),t.Observable.throw(a);
a.forEach(function(a){y.warn("Some but not all urls failed:",a.e)});return t.Observable.from([{table:c,graph:g}])}).map(function(a){var d=a.table;a=a.graph;return{app:g,pivot:r()({},b,{connections:(m&&m.value?m.value:m)||[],attributes:(l&&l.value?l.value:l)||[],resultCount:d?d.length:a?(a.nodes||[]).length+(a.edges||[]).length:0,template:c,events:d||[],graph:a,results:{graph:[],labels:[]}})}}).map(A.a).do(function(a){a=a.pivot;y.debug("shaped results",a.results);for(var c in a)b[c]=a[c];y.info("results",
b.resultCount);d[b.id]={params:f,results:b.results};y.trace("searchAndShape out pivot",b)})};return b}(l.a)}).call(b,"src/shared/services/templates/http/httpPivot.js")},function(e,b,a){function f(a,b,d){var f=Object(h.spawn)("jq",b,{cwd:".",env:""}),e=[];f.stdout.on("data",function(a){e.push(a)});f.stderr.on("data",function(a){d.error(Error(a.toString("utf8")||"jq error"))});f.stdin.on("error",function(){});f.on("exit",function(a){if(0===a)try{d.next(JSON.parse(Buffer.concat(e).toString("utf8"))),
d.complete()}catch(c){d.error(c)}else d.error(Error({code:a}))});f.stdin.write(a,function(a){if(a instanceof Error)try{f.kill()}catch(c){}else f.stdin.end()})}function d(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".",d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return m.Observable.create(function(e){try{var p=(d instanceof Array?d:[d]).concat(b);f(a,p,e)}catch(g){e.error(Error({msg:"Failed to call",e:g}))}}).take(1)}b.a=function(a){var b=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:".",f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return-1<b.indexOf("import")||-1<b.indexOf("include")?m.Observable.throw(Error("Include and import terms not allowed")):d(a,b,f)};var m=a(4);a.n(m);var h=a(230);a.n(h)},function(e,b,a){b.a=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return null===a?{}:f(a)};var f=a(231)},function(e,b,a){(function(f){a.d(b,"a",function(){return n});a.d(b,"b",function(){return q});var d=a(1),e=a.n(d),
h=a(53);d=a(88);var k=a(36),l=a(0).b.createLogger(f),n=new d.a({id:"http-expand",name:"URL: Expand",tags:["Demo","Splunk"],parameters:[{name:"instructions",inputType:"label",isVisible:!1},{name:"pRef",inputType:"pivotCombo",label:"Any event in:"}].concat(k.a),toUrls:function(a,g){var c=a.endpoint,b=void 0===c?"":c;c=a.pRef;var d=a.body,f=a.method,p=void 0===f?"GET":f;c=c?c.value:"";c=(c instanceof Array?c:[c]).map(function(a){return g[a].events});return[].concat.apply([],c).map(function(c,g){try{var f=
e()({},c,Object(k.c)(a)),r=Object(h.a)(b,f),m="POST"===p?Object(h.a)(d,f):void 0;l.debug("row endpoint",r,g,c);return e()({url:r,params:f},"POST"===p?{body:m}:{})}catch(C){return C}})},encodings:k.b}),q=[n]}).call(b,"src/shared/services/templates/http/httpExpand.js")},function(e,b,a){(function(f){a.d(b,"a",function(){return v});a.d(b,"b",function(){return w});var d=a(1),e=a.n(d);d=a(5);var h=a.n(d);d=a(7);var k=a.n(d);d=a(8);var l=a.n(d),n=a(4);a.n(n);var q=a(48);d=a(35);var p=a(90),g=a(53),c=a(89),
r=a(0),u=a(36),t=r.b.createLogger(f),v=new (function(a){function b(c){h()(this,b);var g=k()(this,a.call(this,c)),d=c.encodings,f=c.attributes;g.connections=c.connections;g.encodings=d;g.attributes=f;return g}l()(b,a);b.prototype.searchAndShape=function(a){var b=this,d=a.app,f=a.pivot,r=a.pivotCache;f.template=this;if(!f.enabled)return f.resultSummary={},f.resultCount=0,n.Observable.of({app:d,pivot:f});var m=this.stripTemplateNamespace(f.pivotParameters);t.info("manual pivot",{params:m,pivotParameters:f.pivotParameters});
a=m.jq;var l=void 0===a?".":a,w=m.events,h=m.nodes,k=m.attributes;return n.Observable.defer(function(){return Object(c.a)(w,Object(g.a)(l,m))}).map(function(a){t.debug("==== JQ TRANSFORMED JSON",a);a=a instanceof Array?a.map(p.a):[Object(p.a)(a)];if(a.length&&!("EventID"in a[0]))for(var c=0;c<a.length;c++)a[c].EventID=f.id+":"+c;return a}).map(function(a){return{app:d,pivot:e()({},f,{resultCount:a.length,template:b,connections:h?h.value:[],attributes:k?k.value:[],events:a,results:{graph:[],labels:[]}})}}).map(q.a).do(function(a){a=
a.pivot;for(var c in a)f[c]=a[c];t.debug("results",f.results);r[f.id]={params:m,results:f.results}}).do(function(){return t.trace("searchAndShape manual")})};return b}(d.a))({id:"manual-data",name:"Enter data",tags:["Demo","Splunk"],attributes:[],connections:[],parameters:[{name:"events",inputType:"textarea",label:"Events (json)"},{name:"jq",inputType:"textarea",label:"Postprocess with jq:",placeholder:"."},{name:"nodes",inputType:"multi",label:"Nodes:",options:[]},{name:"attributes",inputType:"multi",
label:"Attributes:",options:[]}],encodings:u.b}),w=[v]}).call(b,"src/shared/services/templates/manual.js")},function(e,b,a){b.a=function(a){return function(){return f.Observable.of(a)}};var f=a(4);a.n(f)},function(e,b,a){b.a=function(a){var b=a.loadApp,e=a.convict,h=a.listTemplates,q=a.listConnectors;a=a.listInvestigations;var p=h(),g=q(),c=a().take(1).multicast(new d.ReplaySubject(1)).refCount();return{loadUsersById:function(a){var d=a.userIds;return b().zip(c).mergeMap(function(a){var c=a[0],b=
a[1];return d.map(function(a){return{app:c,user:c.usersById[a]||(c.usersById[a]=f()({},Object(m.g)(b,p,g,e.get("graphistry.key"),e.get("graphistry.host")),{id:a}))}})})}}};e=a(1);var f=a.n(e),d=a(4);a.n(d);var m=a(20)},function(e,b,a){(function(f){b.a=function(a,g){var c=new l.b({loadApp:a,pathPrefix:g,entityName:"investigation",createModel:n.d,serializeModel:n.h,cache:2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}});return{loadInvestigationsById:function(a){return c.loadById(a.investigationIds)},
unloadInvestigationsById:function(a){return c.unloadById(a.investigationIds)},persistInvestigationsById:function(a){return c.persistById(a.investigationIds)},unlinkInvestigationsById:function(a){return c.unlinkById(a.investigationIds)}}};b.b=function(a){return p(k.a.resolve(a,"*.json")).mergeAll().mergeMap(function(a){return g(a)}).map(function(a){return JSON.parse(a)}).toArray().do(function(){return q.info("Read investigations from disk")})};var d=a(4);a.n(d);var e=a(82);e=a.n(e);var h=a(37),k=a.n(h);
h=a(83);h=a.n(h);var l=a(33),n=a(20),q=a(0).b.createLogger(f),p=d.Observable.bindNodeCallback(h.a),g=d.Observable.bindNodeCallback(e.a.readFile)}).call(b,"src/shared/services/investigationStore.js")},function(e,b,a){(function(f){function d(a,g,b){a.investigationsById[b.id]=b;a=Object(q.ref)("investigationsById['"+b.id+"']");g.investigations.push(a);return{newRef:a,numInvestigations:g.investigations.length}}function e(a,g){g.forEach(function(c){a.pivotsById[c.id]=c})}function h(a){var c=a.loadUsersById;
return c({userIds:[a.userId]}).mergeMap(function(a){return k.Observable.of(null)})}b.b=function(a){var c=a.loadUsersById,b=a.loadInvestigationsById,f=a.unloadInvestigationsById,m=a.unloadPivotsById;return c({userIds:a.userIds}).mergeMap(function(a){var g=a.app,r=a.user;a=Object(p.e)({});var l=Object(p.d)({pivots:[a.id]},r.investigations.length);e(g,[a]);a=d(g,r,l);var k=a.newRef,w=a.numInvestigations;return h({loadUsersById:c,loadInvestigationsById:b,unloadInvestigationsById:f,unloadPivotsById:m,
userId:r.id}).do(function(){r.activeInvestigation=k}).map(function(){return{app:g,user:r,newInvestigation:l,numInvestigations:w}})}).do(function(a){return g.debug("Created new investigation "+a.newInvestigation.id)})};b.e=h;b.a=function(a){var c=a.loadInvestigationsById,b=a.loadPivotsById,f=a.loadUsersById,m=a.unloadInvestigationsById,l=a.unloadPivotsById;return c({investigationIds:a.investigationIds}).mergeMap(function(a){var g=a.app,r=a.investigation;return k.Observable.combineLatest(b({pivotIds:r.pivots.map(function(a){return a.value[1]})}).map(function(a){return Object(p.b)(a.pivot)}).toArray(),
f({userIds:[g.currentUser.value[1]]}),function(a,c){return{clonedPivots:a,user:c.user}}).mergeMap(function(a){var b=a.clonedPivots,k=a.user;e(g,b);var w=Object(p.a)(r,b);a=d(g,k,w);var q=a.newRef,n=a.numInvestigations;return h({loadUsersById:f,loadInvestigationsById:c,unloadInvestigationsById:m,unloadPivotsById:l,userId:k.id}).do(function(){k.activeInvestigation=q}).map(function(){return{app:g,user:k,clonedInvestigation:w,originalInvestigation:r,numInvestigations:n}})})}).do(function(a){return g.debug("Cloned investigation "+
a.originalInvestigation.id+" to "+a.clonedInvestigation.id)})};b.d=function(a){var c=a.loadInvestigationsById,b=a.persistInvestigationsById,d=a.persistPivotsById,f=a.unlinkPivotsById;return c({investigationIds:a.investigationIds}).mergeMap(function(a){var c=a.app,g=a.investigation;g.modifiedOn=Date.now();a=g.pivots.map(function(a){return a.value[1]});return d({pivotIds:a}).toArray().switchMap(function(){return f({pivotIds:g.detachedPivots}).toArray()}).switchMap(function(){return b({investigationIds:[g.id]})}).map(function(){return{app:c,
investigation:g}})}).do(function(a){return g.debug("Saved investigation "+a.investigation.id)})};b.c=function(a){var c=a.loadUsersById,b=a.unlinkInvestigationsById,d=a.unlinkPivotsById,f=a.investigationIds;return c({userIds:a.userIds}).mergeMap(function(a){var c=a.user,e=n.a.reject(c.investigations,function(a){return f.includes(a.value[1])}),p=c.investigations.length;c.investigations=e;f.includes(void 0!==c.activeInvestigation?c.activeInvestigation.value[1]:void 0)&&(c.activeInvestigation=0<e.length?
c.investigations[0]:void 0);return b({investigationIds:f}).mergeMap(function(a){a=a.investigation.pivots.map(function(a){return a.value[1]});return d({pivotIds:a}).toArray()},function(a){return{app:a.app,user:c,investigation:a.investigation,oldLength:p,newLength:e.length}}).do(function(a){return g.debug("Removed investigation "+a.investigation.id)})})};var k=a(4);a.n(k);var l=a(2),n=a.n(l),q=a(6);a.n(q);var p=a(20),g=a(0).b.createLogger(f)}).call(b,"src/shared/services/manageInvestigation.js")},function(e,
b,a){b.a=function(a){var b=a.loadInvestigationsById,e=a.pivotIndex;return b({investigationIds:a.investigationIds}).map(function(a){var b=a.app;a=a.investigation;var m=Object(d.e)({});b.pivotsById[m.id]=m;var p=e+1;a.pivots.splice(p,0,Object(f.ref)("pivotsById['"+m.id+"']"));return{app:b,pivot:m,investigation:a,insertedIndex:p}})};var f=a(6);a.n(f);var d=a(20)},function(e,b,a){(function(f){b.a=function(a,b,f){var m=new d.b({loadApp:a,pathPrefix:b,entityName:"pivot",createModel:e.e,serializeModel:e.i,
cache:3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}});return{loadPivotsById:function(a){return m.loadById(a.pivotIds).mergeMap(function(a){return f({templateIds:[a.pivot.pivotTemplate.value[1]]})},function(a,g){return{pivot:a,template:g.template}}).map(function(a){var g=a.pivot;a=a.template;for(var c in a.pivotParametersUI.value)c in g.pivot.pivotParameters||(g.pivot.pivotParameters[c]=a.pivotParametersUI.value[c].defaultValue);return g})},unloadPivotsById:function(a){return m.unloadById(a.pivotIds)},
persistPivotsById:function(a){return m.persistById(a.pivotIds)},unlinkPivotsById:function(a){return m.unlinkById(a.pivotIds)}}};var d=a(33),e=a(20);a(0).b.createLogger(f)}).call(b,"src/shared/services/pivotStore.js")},function(e,b,a){(function(f){function d(){return h()(k).reduce(function(a,b){a[b.id]=b;return a},{})}b.a=function(a){var b=d(),g=new l.a({loadApp:a,resultName:"connector",loadById:function(a){return n.Observable.of(b[a])},createModel:function(a){return a},cache:{}});return{loadConnectorsById:function(a){return g.loadByIds(a.connectorIds)}}};
b.b=d;var e=a(10),h=a.n(e),k=a(63),l=a(33);e=a(0);var n=a(4);a.n(n);e.b.createLogger(f)}).call(b,"src/shared/services/loadConnectors.js")},function(e,b,a){(function(f){b.a=function(a){var b=a.loadInvestigationsById,d=a.unloadPivotsById,f=a.pivotIndex,p=a.deleteCount;return b({investigationIds:a.investigationIds}).mergeMap(function(a){var c=a.app,g=a.investigation;a=g.pivots.splice(f,p).map(function(a){return a.value[1]});g.detachedPivots=g.detachedPivots.concat(a);return d({pivotIds:a}).toArray().map(function(){return{app:c,
investigation:g}})}).do(function(a){a=a.investigation;var c=e.a.range(f,f+p);h.debug("Spliced pivots "+c+" in "+a.id)})};var d=a(2),e=a.n(d),h=a(0).b.createLogger(f)}).call(b,"src/shared/services/splicePivot.js")},function(e,b,a){(function(f){b.a=function(a){var g=a.loadConnectorsById;return g({connectorIds:a.connectorIds}).mergeMap(function(a){var c=a.app,g=a.connector;a=q[g.id];n.debug("Checking connector: "+g.id);return a.healthCheck().do(function(a){var c=Date.now();g.status={enabled:!0,level:"success",
message:a,lastUpdated:c}}).map(function(){return{app:c,connector:g}}).catch(function(a){return d.Observable.throw(new l.a.WError({name:"ConnectorCheckFailed",cause:a},'Connector check failed for : "%s"',g.id))})})};var d=a(4);a.n(d);var e=a(68),h=a(0),k=a(9),l=a.n(k),n=h.b.createLogger(f),q=Object(e.b)()}).call(b,"src/shared/services/checkConnector.js")},function(e,b,a){(function(f){b.a=function(a){var g=a.loadPivotsById,c=a.loadInvestigationsById,b=a.investigationId;return g({pivotIds:a.pivotIds}).mergeMap(function(a){var f=
a.app,e=a.pivot,p=q[e.pivotTemplate.value[1]];return c({investigationIds:[b]}).flatMap(function(a){var c=a.investigation;a=c.pivots.map(function(a){return a.value[1]});return g({pivotIds:a}).map(function(a){return a.pivot}).toArray().flatMap(function(a){a=a.reduce(function(a,c){a[c.id]=c;return a},{});return p.searchAndShape({app:f,pivot:e,pivotCache:a,time:(c.time||{}).value}).do(function(a){a=a.pivot;a.status={ok:!0,searching:!1};a.isPartial&&k.a.extend(a.status,{info:!0,title:"Results are not exhaustive!",
message:"The search hit the maximum time allowed. Showing only the most recent events found."})}).catch(function(a){return d.Observable.throw(a instanceof n.a?d.Observable.throw(a):new n.a.WError({name:"Failed search",cause:a instanceof Error?a:Error(a)},'Search failed for pivot: "%s"',e.id))})})})})};var d=a(4);a.n(d);var e=a(68),h=a(2),k=a.n(h);h=a(0);var l=a(9),n=a.n(l);h.b.createLogger(f);var q=Object(e.c)()}).call(b,"src/shared/services/searchPivot.js")},function(e,b,a){(function(f){function d(a,
c,g,b){if(0===g.graph.length)return B.Observable.throw(Error("No edges to upload!"));G.trace(g,"Content to be ETLed");var d=J.a(g.graph,g.labels,g.bindings.sourceField,g.bindings.destinationField,g.bindings.idField,g.name).vg,f=K.a.encode(d).finish(),p={name:g.name,datasources:[{type:"vgraph",url:"data0"}],edges:[{count:d.edgeCount,complexEncodings:{current:e(E.a[b.layout],"edge",["edgeColorEncoding"]),default:e(E.a[b.layout],"edge",["edgeColorEncodingDefault"])}}],nodes:[{count:d.vertexCount,complexEncodings:{current:e(E.a[b.layout],
"point",["pointIconEncoding","pointSizeEncoding","pointColorEncoding"]),default:e(E.a[b.layout],"point","pointIconEncodingDefault pointSizeEncodingDefault pointColorEncodingDefault pointLegendTypeIconEncoding pointLegendTypeColorEncoding pointLegendTypeSizeEncoding pointLegendPivotIconEncoding pointLegendPivotColorEncoding".split(" "))}}]};return B.Observable.create(function(g){var b=F.a.post({uri:a,qs:{key:c,agent:"pivot-app",agentversion:"0.0.1",apiversion:2},callback:function(a,c,b){if(a)return g.error(a);
G.debug("Response status",c.statusCode,c.statusMessage);if(400<=c.statusCode)return g.error(Error("ETL service responded with "+c.statusCode+" ("+c.statusMessage+")"));try{G.debug("Trying to parse response body",b);var d=JSON.parse(b);if(!d.success)return G.debug({body:b},"Server Response"),g.error(Error("Server responded with success=false: "+d.msg));g.next(d);g.complete()}catch(T){return g.error(T)}}}).form();b.append("data0",f,{filename:"data0",contentType:"application/octet-stream"});b.append("metadata",
z()(p),{filename:"metadata",contentType:"application/json"})}).do(function(a){return G.debug({res:a},"ETL success")}).map(function(a){return a.dataset}).catch(function(a){return B.Observable.throw(new D.a(a,"ETL upload error"))})}function e(a,c,g){return g.filter(function(c){return!!a[c]}).reduce(function(g,b){var d;return x()({},g,(d={},d[b]=x()({},a[b],{graphType:c,encodingType:b.slice(c.length,b.indexOf("Encoding")).toLowerCase()}),d))},{})}function h(a,c){void 0===a[c]&&(a[c]=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:0)}function k(a,c){var g={};c.forEach(function(a){g[a[H.a.idField]]=a});var b={};a.forEach(function(a){h(b,a[H.a.sourceField],a.Pivot);h(b,a[H.a.destinationField],a.Pivot)});return A()(b).filter(function(a){return!(a in g)}).map(function(a){var c;return c={},c[H.a.idField]=a,c.Pivot=b[a],c})}function l(a){var c="PivotApp/"+Object(C.simpleflake)().toJSON(),g=a.filter(function(a){return a.results&&a.enabled});G.trace({visiblePivots:g},"visiblePivots");var b=a.reduce(function(a,
c,g){var b=a.nodes;a=a.edges;var d=c.enabled,f=c.results;f=void 0===f?{}:f;c=f.graph;c=void 0===c?[]:c;f=f.labels;f=void 0===f?[]:f;return d?Object(H.b)({nodes:b,edges:a},{nodes:f.map(function(a){return x()({Pivot:1+g},a)}),edges:c.map(function(a){return x()({Pivot:1+g},a)})},H.a.idField,H.a.idEdgeField):{nodes:b,edges:a}},{nodes:[],edges:[]});g=b.nodes;b=b.edges;var d=k(b,g,H.a);c={graph:b,labels:g.concat(d),name:c,type:"edgelist",bindings:H.a};return{pivots:a,data:c}}function n(a,c){a=y.a.flatten(a.filter(function(a){return a.edgeType&&
0===a.edgeType.indexOf("EventID->")}).map(function(a){return[{node:a[H.a.sourceField],row:2*a.Pivot},{node:a[H.a.destinationField],row:2*a.Pivot+1}]}),"shallow");var g=y.a.mapObject(y.a.groupBy(a,H.a.idField),function(a){return y.a.min(y.a.pluck(a,"row"))});c.filter(function(a){return!(a.node in g)}).map(function(a){return[a[H.a.idField],2*a.Pivot]}).forEach(function(a){g[a[0]]=a[1]});return g}function q(a,c){var g=y.a.pluck(a,H.a.sourceField);a=y.a.pluck(a,H.a.destinationField);c=y.a.mapObject(c,
function(){return 0});return y.a.extend(c,y.a.countBy(g.concat(a),y.a.identity))}function p(a){return a.reduce(function(a,c){a[c[H.a.idField]]=c[H.a.typeField];return a},{})}function g(a){return y.a.mapObject(y.a.groupBy(y.a.pairs(a),function(a){return a[1]}),function(a){return y.a.map(a,function(a){return a[0]})})}function c(a,c,b,d,f,e,p){var r=y.a.max(y.a.values(c));c=y.a.mapObject(g(a),function(a){return a.sort(function(a,c){return b[c]-b[a]||(a>c?1:-1)})});var m={};y.a.each(c,function(c,g){var b=
c.length>f,l=y.a.sortBy(y.a.values(y.a.groupBy(c,function(a){return p[a]})),function(a){return-a.length}),k=l.every(function(a){return a.length<d}),h=y.a.flatten((b&&!k?l:[c]).map(function(a){var c=y.a.max(y.a.range(f/2,2*f),function(c){return(1+(a.length-1)%c)/c});return y.a.values(y.a.groupBy(a,function(a,g){return w()(g/c)}))}),"shallow");h.forEach(function(c,b){var d=Number(g)+b/(h.length-.999)*e;c.forEach(function(g,b){a[g]=d;m[g]=(r-.999)/(c.length-.999)*b})})});return m}function r(a,c,g,b,
d){return y.a.mapObject(a,function(a,f){return{x:g*c[f],y:(b+d)*(a-(a&1))+d*(a&1)}})}function u(a,c,g){a=v()(a);a=y.a.uniq(a.map(function(a){return a/2|0})).sort(function(a,c){return a-c}).map(function(a){return{label:"Pivot "+a,y:0<a?(c+g)*a*2:-2*g}});return M.get("features.axes")?a:[]}b.a=function(a){var c=a.loadInvestigationsById,g=a.loadPivotsById,b=a.loadUsersById;return c({investigationIds:a.investigationIds}).mergeMap(function(a){var c=a.investigation;return B.Observable.combineLatest(b({userIds:[a.app.currentUser.value[1]]}),
g({pivotIds:c.pivots.map(function(a){return a.value[1]})}).map(function(a){return a.pivot}).toArray().map(l).map(I.a).map(function(a){return O[c.layout](a)}),function(a,c){return{user:a.user,pivots:c.pivots,data:c.data}}).switchMap(function(a){var g=a.user,b=a.data,f=a.pivots;if(0<b.graph.length+b.labels.length)return d(g.etlService,g.apiKey,b,c).map(function(a){return{user:g,dataset:a,data:b,pivots:f}});G.debug("Graph is empty, skipping upload");return B.Observable.of({user:g,data:b,pivots:f})}).do(function(a){var g=
a.user,b=a.dataset;a=a.data;b?(c.eventTable={hasResults:0<a.graph.length+a.labels.length},c.controls=E.b.find(function(a){return a.id===c.layout}).controls,c.url=g.vizService+"&dataset="+b+"&controls="+c.controls,c.datasetName=b,c.datasetType="jsonMeta",c.axes=a.axes,c.edgeOpacity=a.edgeOpacity,c.status={ok:!0,etling:!1,msgStyle:"default"}):c.status={ok:!1,etling:!1,message:"Attempting to upload empty graph!",msgStyle:"info"};G.debug("  URL: "+c.url)})},function(a){return{app:a.app,investigation:a.investigation}})};
var t=a(10),v=a.n(t);t=a(237);var w=a.n(t);t=a(11);var A=a.n(t);t=a(1);var x=a.n(t);t=a(12);var z=a.n(t),B=a(4);a.n(B);var C=a(23);a.n(C);t=a(2);var y=a.n(t);t=a(238);a.n(t);t=a(64);var F=a.n(t);t=a(9);var D=a.n(t);t=a(239);a.n(t);var E=a(45),I=a(240),J=a(242),K=a(104),H=a(49),N=a(66);t=a(0);var M=global.__graphistry_convict_conf__,G=t.b.createLogger(f),O={stackedBushyGraph:function(a){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:250,b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
-250*Math.pow(y.a.max(y.a.values(y.a.countBy(y.a.pluck(a.data.graph,"Pivot"),y.a.identity))),.5),d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:b,f=4<arguments.length&&void 0!==arguments[4]?arguments[4]:5,e=5<arguments.length&&void 0!==arguments[5]?arguments[5]:100,m=6<arguments.length&&void 0!==arguments[6]?arguments[6]:.25;G.trace({stackedBushyGraphInputs:a.data},"This is what we're making into a stacked bushy graph");.5<m&&G.warn("Line-wrapped nodes are over half the line height!");var l=
n(a.data.graph,a.data.labels),k=q(a.data.graph,l),h=y.a.countBy(y.a.values(l),y.a.identity),w=p(a.data.labels);f=c(l,h,k,f,e,m,w);g=r(l,f,g,b,d);b=u(l,b,d);k=Object(N.b)(k);Object(N.a)(a.data.labels,g);a.data.axes=b;a.data.edgeOpacity=k;return a},atlasbarnes:function(a){return a},insideout:I.b,weirdRandomSquare:function(a){return a}}}).call(b,"src/shared/services/uploadGraph.js")},function(e,b,a){a.d(b,"a",function(){return n});e=a(243);var f=a.n(e);e=a(11);var d=a.n(e);e=a(244);a.n(e);var m=e.Reader,
h=e.Writer,k=e.util,l=e.roots["default"]||(e.roots["default"]={}),n=l.VectorGraph=function(){function a(a){this.edges=[];this.uint32_vectors=[];this.double_vectors=[];this.string_vectors=[];this.int32_vectors=[];this.int64_vectors=[];this.float_vectors=[];this.bool_vectors=[];if(a)for(var g=d()(a),c=0;c<g.length;++c)null!=a[g[c]]&&(this[g[c]]=a[g[c]])}a.prototype.version=0;a.prototype.name="";a.prototype.type=0;a.prototype.vertexCount=0;a.prototype.edgeCount=0;a.prototype.edges=k.emptyArray;a.prototype.uint32_vectors=
k.emptyArray;a.prototype.double_vectors=k.emptyArray;a.prototype.string_vectors=k.emptyArray;a.prototype.int32_vectors=k.emptyArray;a.prototype.int64_vectors=k.emptyArray;a.prototype.float_vectors=k.emptyArray;a.prototype.bool_vectors=k.emptyArray;a.prototype.bindings=null;a.encode=function(a,g){g||(g=h.create());g.uint32(8).uint32(a.version);null!=a.name&&a.hasOwnProperty("name")&&g.uint32(18).string(a.name);g.uint32(24).int32(a.type);g.uint32(32).uint32(a.vertexCount);g.uint32(40).uint32(a.edgeCount);
if(null!=a.edges&&a.edges.length)for(var c=0;c<a.edges.length;++c)l.VectorGraph.Edge.encode(a.edges[c],g.uint32(50).fork()).ldelim();if(null!=a.uint32_vectors&&a.uint32_vectors.length)for(c=0;c<a.uint32_vectors.length;++c)l.VectorGraph.UInt32AttributeVector.encode(a.uint32_vectors[c],g.uint32(58).fork()).ldelim();if(null!=a.double_vectors&&a.double_vectors.length)for(c=0;c<a.double_vectors.length;++c)l.VectorGraph.DoubleAttributeVector.encode(a.double_vectors[c],g.uint32(66).fork()).ldelim();if(null!=
a.string_vectors&&a.string_vectors.length)for(c=0;c<a.string_vectors.length;++c)l.VectorGraph.StringAttributeVector.encode(a.string_vectors[c],g.uint32(74).fork()).ldelim();if(null!=a.int32_vectors&&a.int32_vectors.length)for(c=0;c<a.int32_vectors.length;++c)l.VectorGraph.Int32AttributeVector.encode(a.int32_vectors[c],g.uint32(82).fork()).ldelim();if(null!=a.int64_vectors&&a.int64_vectors.length)for(c=0;c<a.int64_vectors.length;++c)l.VectorGraph.Int64AttributeVector.encode(a.int64_vectors[c],g.uint32(90).fork()).ldelim();
if(null!=a.float_vectors&&a.float_vectors.length)for(c=0;c<a.float_vectors.length;++c)l.VectorGraph.FloatAttributeVector.encode(a.float_vectors[c],g.uint32(98).fork()).ldelim();if(null!=a.bool_vectors&&a.bool_vectors.length)for(c=0;c<a.bool_vectors.length;++c)l.VectorGraph.BoolAttributeVector.encode(a.bool_vectors[c],g.uint32(106).fork()).ldelim();null!=a.bindings&&a.hasOwnProperty("bindings")&&l.VectorGraph.Bindings.encode(a.bindings,g.uint32(114).fork()).ldelim();return g};a.decode=function(a,g){a instanceof
m||(a=m.create(a));g=void 0===g?a.len:a.pos+g;for(var c=new l.VectorGraph;a.pos<g;){var b=a.uint32();switch(b>>>3){case 1:c.version=a.uint32();break;case 2:c.name=a.string();break;case 3:c.type=a.int32();break;case 4:c.vertexCount=a.uint32();break;case 5:c.edgeCount=a.uint32();break;case 6:c.edges&&c.edges.length||(c.edges=[]);c.edges.push(l.VectorGraph.Edge.decode(a,a.uint32()));break;case 7:c.uint32_vectors&&c.uint32_vectors.length||(c.uint32_vectors=[]);c.uint32_vectors.push(l.VectorGraph.UInt32AttributeVector.decode(a,
a.uint32()));break;case 8:c.double_vectors&&c.double_vectors.length||(c.double_vectors=[]);c.double_vectors.push(l.VectorGraph.DoubleAttributeVector.decode(a,a.uint32()));break;case 9:c.string_vectors&&c.string_vectors.length||(c.string_vectors=[]);c.string_vectors.push(l.VectorGraph.StringAttributeVector.decode(a,a.uint32()));break;case 10:c.int32_vectors&&c.int32_vectors.length||(c.int32_vectors=[]);c.int32_vectors.push(l.VectorGraph.Int32AttributeVector.decode(a,a.uint32()));break;case 11:c.int64_vectors&&
c.int64_vectors.length||(c.int64_vectors=[]);c.int64_vectors.push(l.VectorGraph.Int64AttributeVector.decode(a,a.uint32()));break;case 12:c.float_vectors&&c.float_vectors.length||(c.float_vectors=[]);c.float_vectors.push(l.VectorGraph.FloatAttributeVector.decode(a,a.uint32()));break;case 13:c.bool_vectors&&c.bool_vectors.length||(c.bool_vectors=[]);c.bool_vectors.push(l.VectorGraph.BoolAttributeVector.decode(a,a.uint32()));break;case 14:c.bindings=l.VectorGraph.Bindings.decode(a,a.uint32());break;
default:a.skipType(b&7)}}if(!c.hasOwnProperty("version"))throw k.ProtocolError("missing required 'version'",{instance:c});if(!c.hasOwnProperty("type"))throw k.ProtocolError("missing required 'type'",{instance:c});if(!c.hasOwnProperty("vertexCount"))throw k.ProtocolError("missing required 'vertexCount'",{instance:c});if(!c.hasOwnProperty("edgeCount"))throw k.ProtocolError("missing required 'edgeCount'",{instance:c});return c};a.GraphType=function(){var a={},g=f()(a);g[a[0]="UNDIRECTED"]=0;g[a[1]="DIRECTED"]=
1;return g}();a.Edge=function(){function a(a){if(a)for(var c=d()(a),g=0;g<c.length;++g)null!=a[c[g]]&&(this[c[g]]=a[c[g]])}a.prototype.src=0;a.prototype.dst=0;a.encode=function(a,c){c||(c=h.create());c.uint32(8).uint32(a.src);c.uint32(16).uint32(a.dst);return c};a.decode=function(a,c){a instanceof m||(a=m.create(a));c=void 0===c?a.len:a.pos+c;for(var g=new l.VectorGraph.Edge;a.pos<c;){var b=a.uint32();switch(b>>>3){case 1:g.src=a.uint32();break;case 2:g.dst=a.uint32();break;default:a.skipType(b&7)}}if(!g.hasOwnProperty("src"))throw k.ProtocolError("missing required 'src'",
{instance:g});if(!g.hasOwnProperty("dst"))throw k.ProtocolError("missing required 'dst'",{instance:g});return g};return a}();a.AttributeTarget=function(){var a={},g=f()(a);g[a[0]="VERTEX"]=0;g[a[1]="EDGE"]=1;return g}();a.UInt32AttributeVector=function(){function a(a){this.values=[];if(a)for(var c=d()(a),g=0;g<c.length;++g)null!=a[c[g]]&&(this[c[g]]=a[c[g]])}a.prototype.name="";a.prototype.target=0;a.prototype.values=k.emptyArray;a.prototype.type="";a.prototype.format="";a.encode=function(a,c){c||
(c=h.create());null!=a.name&&a.hasOwnProperty("name")&&c.uint32(10).string(a.name);null!=a.target&&a.hasOwnProperty("target")&&c.uint32(16).int32(a.target);if(null!=a.values&&a.values.length){c.uint32(26).fork();for(var b=0;b<a.values.length;++b)c.uint32(a.values[b]);c.ldelim()}null!=a.type&&a.hasOwnProperty("type")&&c.uint32(34).string(a.type);null!=a.format&&a.hasOwnProperty("format")&&c.uint32(42).string(a.format);return c};a.decode=function(a,c){a instanceof m||(a=m.create(a));c=void 0===c?a.len:
a.pos+c;for(var b=new l.VectorGraph.UInt32AttributeVector;a.pos<c;){var g=a.uint32();switch(g>>>3){case 1:b.name=a.string();break;case 2:b.target=a.int32();break;case 3:b.values&&b.values.length||(b.values=[]);if(2===(g&7))for(g=a.uint32()+a.pos;a.pos<g;)b.values.push(a.uint32());else b.values.push(a.uint32());break;case 4:b.type=a.string();break;case 5:b.format=a.string();break;default:a.skipType(g&7)}}return b};return a}();a.Int32AttributeVector=function(){function a(a){this.values=[];if(a)for(var c=
d()(a),b=0;b<c.length;++b)null!=a[c[b]]&&(this[c[b]]=a[c[b]])}a.prototype.name="";a.prototype.target=0;a.prototype.values=k.emptyArray;a.prototype.type="";a.prototype.format="";a.encode=function(a,c){c||(c=h.create());null!=a.name&&a.hasOwnProperty("name")&&c.uint32(10).string(a.name);null!=a.target&&a.hasOwnProperty("target")&&c.uint32(16).int32(a.target);if(null!=a.values&&a.values.length){c.uint32(26).fork();for(var b=0;b<a.values.length;++b)c.int32(a.values[b]);c.ldelim()}null!=a.type&&a.hasOwnProperty("type")&&
c.uint32(34).string(a.type);null!=a.format&&a.hasOwnProperty("format")&&c.uint32(42).string(a.format);return c};a.decode=function(a,c){a instanceof m||(a=m.create(a));c=void 0===c?a.len:a.pos+c;for(var b=new l.VectorGraph.Int32AttributeVector;a.pos<c;){var g=a.uint32();switch(g>>>3){case 1:b.name=a.string();break;case 2:b.target=a.int32();break;case 3:b.values&&b.values.length||(b.values=[]);if(2===(g&7))for(g=a.uint32()+a.pos;a.pos<g;)b.values.push(a.int32());else b.values.push(a.int32());break;
case 4:b.type=a.string();break;case 5:b.format=a.string();break;default:a.skipType(g&7)}}return b};return a}();a.Int64AttributeVector=function(){function a(a){this.values=[];if(a)for(var c=d()(a),b=0;b<c.length;++b)null!=a[c[b]]&&(this[c[b]]=a[c[b]])}a.prototype.name="";a.prototype.target=0;a.prototype.values=k.emptyArray;a.prototype.type="";a.prototype.format="";a.encode=function(a,c){c||(c=h.create());null!=a.name&&a.hasOwnProperty("name")&&c.uint32(10).string(a.name);null!=a.target&&a.hasOwnProperty("target")&&
c.uint32(16).int32(a.target);if(null!=a.values&&a.values.length){c.uint32(26).fork();for(var b=0;b<a.values.length;++b)c.int64(a.values[b]);c.ldelim()}null!=a.type&&a.hasOwnProperty("type")&&c.uint32(34).string(a.type);null!=a.format&&a.hasOwnProperty("format")&&c.uint32(42).string(a.format);return c};a.decode=function(a,c){a instanceof m||(a=m.create(a));c=void 0===c?a.len:a.pos+c;for(var b=new l.VectorGraph.Int64AttributeVector;a.pos<c;){var g=a.uint32();switch(g>>>3){case 1:b.name=a.string();break;
case 2:b.target=a.int32();break;case 3:b.values&&b.values.length||(b.values=[]);if(2===(g&7))for(g=a.uint32()+a.pos;a.pos<g;)b.values.push(a.int64());else b.values.push(a.int64());break;case 4:b.type=a.string();break;case 5:b.format=a.string();break;default:a.skipType(g&7)}}return b};return a}();a.FloatAttributeVector=function(){function a(a){this.values=[];if(a)for(var c=d()(a),b=0;b<c.length;++b)null!=a[c[b]]&&(this[c[b]]=a[c[b]])}a.prototype.name="";a.prototype.target=0;a.prototype.values=k.emptyArray;
a.prototype.type="";a.prototype.format="";a.encode=function(a,c){c||(c=h.create());null!=a.name&&a.hasOwnProperty("name")&&c.uint32(10).string(a.name);null!=a.target&&a.hasOwnProperty("target")&&c.uint32(16).int32(a.target);if(null!=a.values&&a.values.length){c.uint32(26).fork();for(var b=0;b<a.values.length;++b)c.float(a.values[b]);c.ldelim()}null!=a.type&&a.hasOwnProperty("type")&&c.uint32(34).string(a.type);null!=a.format&&a.hasOwnProperty("format")&&c.uint32(42).string(a.format);return c};a.decode=
function(a,c){a instanceof m||(a=m.create(a));c=void 0===c?a.len:a.pos+c;for(var b=new l.VectorGraph.FloatAttributeVector;a.pos<c;){var g=a.uint32();switch(g>>>3){case 1:b.name=a.string();break;case 2:b.target=a.int32();break;case 3:b.values&&b.values.length||(b.values=[]);if(2===(g&7))for(g=a.uint32()+a.pos;a.pos<g;)b.values.push(a.float());else b.values.push(a.float());break;case 4:b.type=a.string();break;case 5:b.format=a.string();break;default:a.skipType(g&7)}}return b};return a}();a.DoubleAttributeVector=
function(){function a(a){this.values=[];if(a)for(var c=d()(a),b=0;b<c.length;++b)null!=a[c[b]]&&(this[c[b]]=a[c[b]])}a.prototype.name="";a.prototype.target=0;a.prototype.values=k.emptyArray;a.prototype.type="";a.prototype.format="";a.encode=function(a,c){c||(c=h.create());null!=a.name&&a.hasOwnProperty("name")&&c.uint32(10).string(a.name);null!=a.target&&a.hasOwnProperty("target")&&c.uint32(16).int32(a.target);if(null!=a.values&&a.values.length){c.uint32(26).fork();for(var b=0;b<a.values.length;++b)c.double(a.values[b]);
c.ldelim()}null!=a.type&&a.hasOwnProperty("type")&&c.uint32(34).string(a.type);null!=a.format&&a.hasOwnProperty("format")&&c.uint32(42).string(a.format);return c};a.decode=function(a,c){a instanceof m||(a=m.create(a));c=void 0===c?a.len:a.pos+c;for(var b=new l.VectorGraph.DoubleAttributeVector;a.pos<c;){var g=a.uint32();switch(g>>>3){case 1:b.name=a.string();break;case 2:b.target=a.int32();break;case 3:b.values&&b.values.length||(b.values=[]);if(2===(g&7))for(g=a.uint32()+a.pos;a.pos<g;)b.values.push(a.double());
else b.values.push(a.double());break;case 4:b.type=a.string();break;case 5:b.format=a.string();break;default:a.skipType(g&7)}}return b};return a}();a.StringAttributeVector=function(){function a(a){this.values=[];if(a)for(var c=d()(a),b=0;b<c.length;++b)null!=a[c[b]]&&(this[c[b]]=a[c[b]])}a.prototype.name="";a.prototype.target=0;a.prototype.values=k.emptyArray;a.prototype.type="";a.prototype.format="";a.encode=function(a,c){c||(c=h.create());null!=a.name&&a.hasOwnProperty("name")&&c.uint32(10).string(a.name);
null!=a.target&&a.hasOwnProperty("target")&&c.uint32(16).int32(a.target);if(null!=a.values&&a.values.length)for(var b=0;b<a.values.length;++b)c.uint32(26).string(a.values[b]);null!=a.type&&a.hasOwnProperty("type")&&c.uint32(34).string(a.type);null!=a.format&&a.hasOwnProperty("format")&&c.uint32(42).string(a.format);return c};a.decode=function(a,c){a instanceof m||(a=m.create(a));c=void 0===c?a.len:a.pos+c;for(var b=new l.VectorGraph.StringAttributeVector;a.pos<c;){var g=a.uint32();switch(g>>>3){case 1:b.name=
a.string();break;case 2:b.target=a.int32();break;case 3:b.values&&b.values.length||(b.values=[]);b.values.push(a.string());break;case 4:b.type=a.string();break;case 5:b.format=a.string();break;default:a.skipType(g&7)}}return b};return a}();a.BoolAttributeVector=function(){function a(a){this.values=[];if(a)for(var c=d()(a),b=0;b<c.length;++b)null!=a[c[b]]&&(this[c[b]]=a[c[b]])}a.prototype.name="";a.prototype.target=0;a.prototype.values=k.emptyArray;a.prototype.type="";a.prototype.format="";a.encode=
function(a,c){c||(c=h.create());null!=a.name&&a.hasOwnProperty("name")&&c.uint32(10).string(a.name);null!=a.target&&a.hasOwnProperty("target")&&c.uint32(16).int32(a.target);if(null!=a.values&&a.values.length){c.uint32(26).fork();for(var b=0;b<a.values.length;++b)c.bool(a.values[b]);c.ldelim()}null!=a.type&&a.hasOwnProperty("type")&&c.uint32(34).string(a.type);null!=a.format&&a.hasOwnProperty("format")&&c.uint32(42).string(a.format);return c};a.decode=function(a,c){a instanceof m||(a=m.create(a));
c=void 0===c?a.len:a.pos+c;for(var b=new l.VectorGraph.BoolAttributeVector;a.pos<c;){var g=a.uint32();switch(g>>>3){case 1:b.name=a.string();break;case 2:b.target=a.int32();break;case 3:b.values&&b.values.length||(b.values=[]);if(2===(g&7))for(g=a.uint32()+a.pos;a.pos<g;)b.values.push(a.bool());else b.values.push(a.bool());break;case 4:b.type=a.string();break;case 5:b.format=a.string();break;default:a.skipType(g&7)}}return b};return a}();a.Mapping=function(){function a(a){if(a)for(var c=d()(a),b=
0;b<c.length;++b)null!=a[c[b]]&&(this[c[b]]=a[c[b]])}a.prototype.name="";a.prototype.target=0;a.prototype.type="";a.prototype.format="";a.encode=function(a,c){c||(c=h.create());c.uint32(10).string(a.name);c.uint32(16).int32(a.target);c.uint32(26).string(a.type);c.uint32(34).string(a.format);return c};a.decode=function(a,c){a instanceof m||(a=m.create(a));c=void 0===c?a.len:a.pos+c;for(var b=new l.VectorGraph.Mapping;a.pos<c;){var g=a.uint32();switch(g>>>3){case 1:b.name=a.string();break;case 2:b.target=
a.int32();break;case 3:b.type=a.string();break;case 4:b.format=a.string();break;default:a.skipType(g&7)}}if(!b.hasOwnProperty("name"))throw k.ProtocolError("missing required 'name'",{instance:b});if(!b.hasOwnProperty("target"))throw k.ProtocolError("missing required 'target'",{instance:b});if(!b.hasOwnProperty("type"))throw k.ProtocolError("missing required 'type'",{instance:b});if(!b.hasOwnProperty("format"))throw k.ProtocolError("missing required 'format'",{instance:b});return b};return a}();a.Bindings=
function(){function a(a){this.mappings=[];if(a)for(var b=d()(a),g=0;g<b.length;++g)null!=a[b[g]]&&(this[b[g]]=a[b[g]])}a.prototype.idField="";a.prototype.sourceField="";a.prototype.destinationField="";a.prototype.mappings=k.emptyArray;a.encode=function(a,b){b||(b=h.create());null!=a.idField&&a.hasOwnProperty("idField")&&b.uint32(10).string(a.idField);null!=a.sourceField&&a.hasOwnProperty("sourceField")&&b.uint32(18).string(a.sourceField);null!=a.destinationField&&a.hasOwnProperty("destinationField")&&
b.uint32(26).string(a.destinationField);if(null!=a.mappings&&a.mappings.length)for(var c=0;c<a.mappings.length;++c)l.VectorGraph.Mapping.encode(a.mappings[c],b.uint32(34).fork()).ldelim();return b};a.decode=function(a,b){a instanceof m||(a=m.create(a));b=void 0===b?a.len:a.pos+b;for(var c=new l.VectorGraph.Bindings;a.pos<b;){var d=a.uint32();switch(d>>>3){case 1:c.idField=a.string();break;case 2:c.sourceField=a.string();break;case 3:c.destinationField=a.string();break;case 4:c.mappings&&c.mappings.length||
(c.mappings=[]);c.mappings.push(l.VectorGraph.Mapping.decode(a,a.uint32()));break;default:a.skipType(d&7)}}return c};return a}();return a}()},function(e,b,a){e.exports=a(106)},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});(function(f){function d(a,b){F(a,b).subscribe({next:function(a){var c=a.payload;b.status(a.status).send(c)},error:function(c){e(c,a,b)}})}function e(a,b,c,d){z.warn({req:b,res:c,err:a},"An error occured while processing the HTTP request. Responding to the request with an error code and message, if possible.");
c.headersSent?(z.info({req:b,res:c},"requestErrorHandler not sending error to client, because headers (and likely data) has already been sent to the client. The error will only be logged server-side, and the request will be ended in its current state."),c.end()):(d=n.VError.info(a).httpStatus,d=void 0===d?500:d,b=b.is("json")||"application/json"===b.accepts(["text/html","text/*","application/json"]),c.status(d).send(b&&{success:!1,msg:a.message}||a.message))}var h=a(1),k=a.n(h);h=a(37);h=a.n(h);var l=
a(107);l=a.n(l);var n=a(9);a.n(n);var q=a(108);q=a.n(q);var p=a(0),g=a(109),c=a(20),r=a(68),u=a(246),t=a(248),v=a(250),w=a(252),A=a(69),x=a.n(A),z=Object(p.b)(f);f=global.__graphistry_socket_io__;p=global.__graphistry_convict_conf__;var B=new l.a.Router,C=p.get("pivotApp.dataDir");A=h.a.resolve(C,"pivots");C=h.a.resolve(C,"investigations");z.info({branch:"dev/es-connector",commit:"3547224b0",build:"dev",builton:1516139725688},"Starting build #dev");c={pivotPath:A,investigationPath:C,app:Object(c.c)(),
investigationsByIdCache:{}};var y=Object(u.a)(Object(r.a)(p,c));Object(t.a)(f,function(a){return y(a,{streaming:!0})});B.use(Object(w.b)(p),e);B.get("/echo",function(a,b){z.info("echo",k()({},a.query||{}));b.status(200).json(a.query)});B.post("/error",q.a.json({extended:!0,limit:"512kb"}),function(a,b){a=a.body;z[x.a.nameFromLevel[a.level]](a,a.msg);b.status(204).send()});B.get("/healthcheck",function(a){return function(b,c){var d=a();z.info(k()({},d,{req:b,res:c}),"healthcheck");c.status(d.clear.success?
200:500).json(k()({},d.clear))}}(Object(w.a)()));B.use(l.a.static(h.a.join(process.cwd(),"./www/public")),e);B.use("/public",l.a.static(h.a.join(process.cwd(),"./www/public")),e);B.use("/icons",l.a.static(h.a.join(process.cwd(),"./www/public/icons")),e);var F=Object(g.a)(p,Object(v.a)(function(a){return y(a,{streaming:!1})}));["",":activeScreen",":activeScreen/:investigationId"].forEach(function(a){B.get("/"+a,d,e)});b["default"]=B}).call(b,"src/server/index.js")},function(e,b){e.exports=require("express")},
function(e,b){e.exports=require("body-parser")},function(e,b,a){(function(f,d){function e(a,b){var c=void 0;return b.locals&&b.locals.webpackStats&&(c=b.locals.webpackStats.toJson().assetsByChunkName)&&{client:h(c.client,a),vendor:h(c.vendor,a),manifest:h(c.manifest,a)}||void 0}function h(){var a=arguments[1];return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(b,c){c.endsWith(".js")?b.js=a+"/"+c:c.endsWith(".css")&&(b.css=a+"/"+c);return b},{})}function k(){var b=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{},c=b.mountPoint,d=void 0===c?"":c;c=b.reactRoot;c=void 0===c?"":c;var g=b.initialState;g=void 0===g?{}:g;b=b.clientAssets;var f=void 0===b?{}:b;b=f.client;var e=f.vendor;f=f.manifest;return'\n<!DOCTYPE html>\n<html lang=\'en-us\'>\n    <head>\n        <meta charset="utf-8" />\n        <meta name="robots" content="noindex, nofollow"/>\n        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />\n        <title>Graphistry Visual Playbook Environment</title>\n\n        <meta content=\'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0\' name=\'viewport\' />\n        '+
a(184).html.map(function(a){return a.replace(/public\//,d+"/")}).join("\n")+"\n        "+(e&&e.css?"\n        <link rel='stylesheet' type='text/css' href='"+e.css+"'/>":"")+"\n        "+(b&&b.css?"\n        <link rel='stylesheet' type='text/css' href='"+b.css+"'/>":"")+"\n    </head>\n    <body>\n        <div id='app'>"+c+"</div>\n        <script type='text/javascript' id='tmp_vars'>\n            window.pivotMountPoint = '"+d+"' || '/';\n            window.appCache = "+p()(g)+" || {};\n        \x3c/script>\n        "+
(f&&f.js?'\n        <script type="text/javascript" src="'+f.js+'">\x3c/script>':"")+"\n        "+(e&&e.js?'\n        <script type="text/javascript" src="'+e.js+'">\x3c/script>':"")+"\n        "+(b&&b.js?'\n        <script type="text/javascript" src="'+b.js+'">\x3c/script>':"")+"\n    </body>\n</html>"}var l=a(4);a.n(l);var n=a(54),q=a(180),p=a.n(q);q=a(0);var g=a(181),c=a.n(g),r=a(182);a.n(r);var u=Object(q.b)(f);b.a=function(b,g){var f=n.a;return function(m,h){var p=g(m),n=b.get("pivotApp.mountPoint"),
w=e(n,h)||a(183);return l.Observable.defer(function(){return f.load({falcor:p}).map(function(){return{status:200,payload:k({clientAssets:w,mountPoint:n,initialState:p.getCache()})}})}).catch(function(a){u.error({err:a},"error rendering "+m.originalUrl);return"development"===b.get("env")?l.Observable.of({status:500,payload:Object(r.renderToString)(d.createElement(c.a,{error:a}))}):l.Observable.throw(a)})}}}).call(b,"src/server/render.js",a(3))},function(e,b,a){e=a(21);e=a.n(e);var f=a(22);a.n(f);var d=
a(111),m=a(38),h=a(43),k=a(44),l=a(29),n=e()("{\n        ['title', 'currentUser', 'serverStatus']: ;,\n        usersById: {\n            [{ keys: userIds }]: ;\n        },\n        pivotsById: {\n            [{ keys: pivotIds }]: ;\n        },\n        templatesById: {\n            [{ keys: templateIds }]: ;\n        },\n        connectorsById: {\n            [{ keys: connectorIds }]: ;\n        },\n        investigationsById: {\n            [{ keys: investigationIds }]: ;\n        }\n    }".split(";"),
"{\n        ['title', 'currentUser', 'serverStatus']: ;,\n        usersById: {\n            [{ keys: userIds }]: ;\n        },\n        pivotsById: {\n            [{ keys: pivotIds }]: ;\n        },\n        templatesById: {\n            [{ keys: templateIds }]: ;\n        },\n        connectorsById: {\n            [{ keys: connectorIds }]: ;\n        },\n        investigationsById: {\n            [{ keys: investigationIds }]: ;\n        }\n    }".split(";"));b.a=Object(f.withSchema)(function(a,b,
g){b=b.get;b={get:b(g.loadApp)};return a(n,b,d.a.schema(g),m.a.schema(g),h.a.schema(g),k.a.schema(g),l.a.schema(g))})},function(e,b,a){a.d(b,"a",function(){return f});e=a(112);var f=Object(e.a)(function(){return null})},function(e,b,a){(function(f){function d(a){var b=a.loadUsersById,c=a.loadInvestigationsById,d=a.unloadInvestigationsById,f=a.unloadPivotsById,e=a.switchActiveInvestigation,m=a.setUserHandler;return function(a){var l=this;return g.Observable.forkJoin(p.a.map(a.usersById,function(a,
g){return e({loadUsersById:b,loadInvestigationsById:c,unloadInvestigationsById:d,unloadPivotsById:f,userId:g})})).switchMap(function(){return m.bind(l)(a)})}}function e(a){var b=a.removeInvestigationsById,d=a.loadUsersById,g=a.unlinkInvestigationsById,f=a.unlinkPivotsById;return function(a,e){return b({loadUsersById:d,unlinkInvestigationsById:g,unlinkPivotsById:f,investigationIds:e[0],userIds:a[1]}).mergeMap(function(a){var b=a.user,d=a.newLength,g=a.oldLength;return[Object(c.$invalidation)("investigationsById['"+
a.investigation.id+"']"),Object(c.$invalidation)("usersById['"+b.id+"'].activeInvestigation"),Object(c.$invalidation)("usersById['"+b.id+"'].investigations["+d+".."+g+"]"),Object(c.$value)("usersById['"+b.id+"'].investigations.length",d),Object(c.$value)("usersById['"+b.id+"'].activeInvestigation",b.activeInvestigation)].concat(b.investigations.map(function(a,d){return Object(c.$value)("usersById['"+b.id+"'].investigations["+d+"]",a)}))})}}function h(a){var b=a.loadInvestigationsById,d=a.loadPivotsById,
g=a.loadUsersById,f=a.unloadInvestigationsById,e=a.unloadPivotsById,m=a.cloneInvestigationsById;return function(a){return m({loadInvestigationsById:b,loadPivotsById:d,unloadInvestigationsById:f,unloadPivotsById:e,loadUsersById:g,investigationIds:1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]}).mergeMap(function(a){var b=a.user,d=a.clonedInvestigation;a=a.numInvestigations;return[Object(c.$value)("usersById['"+b.id+"'].investigations.length",a),Object(c.$value)("usersById['"+b.id+"'].activeInvestigation",
b.activeInvestigation),Object(c.$value)("usersById['"+b.id+"'].investigations["+(a-1)+"]",Object(c.$ref)("investigationsById['"+d.id+"']"))]})}}function k(a){var b=a.createInvestigation,d=a.loadUsersById,g=a.loadInvestigationsById,f=a.unloadInvestigationsById,e=a.unloadPivotsById;return function(a){return b({loadUsersById:d,loadInvestigationsById:g,unloadInvestigationsById:f,unloadPivotsById:e,userIds:a[1]}).mergeMap(function(a){var b=a.user,d=a.newInvestigation;a=a.numInvestigations;return[Object(c.$value)("usersById['"+
b.id+"'].investigations.length",a),Object(c.$value)("usersById['"+b.id+"'].activeInvestigation",b.activeInvestigation),Object(c.$value)("usersById['"+b.id+"'].investigations["+(a-1)+"]",Object(c.$ref)("investigationsById['"+d.id+"']"))]})}}var l=a(21);l=a.n(l);var n=a(1),q=a.n(n);n=a(2);var p=a.n(n),g=a(4);a.n(g);n=a(22);a.n(n);var c=a(6);a.n(c);var r=a(0),u=l()("{\n        ['id', 'name', 'graphistryHost']: ;,\n        activeScreen: ;,\n        activeInvestigation: ;,\n        ['investigations', 'templates', 'connectors']: {\n            [{ keys }]: ;\n        },\n        cloneInvestigations: ;,\n        createInvestigation: ;,\n        removeInvestigations: ;\n    }".split(";"),
"{\n        ['id', 'name', 'graphistryHost']: ;,\n        activeScreen: ;,\n        activeInvestigation: ;,\n        ['investigations', 'templates', 'connectors']: {\n            [{ keys }]: ;\n        },\n        cloneInvestigations: ;,\n        createInvestigation: ;,\n        removeInvestigations: ;\n    }".split(";"));r.b.createLogger(f);b.a=Object(n.withSchema)(function(a,b,c){var g=b.get,f=b.set,m=c.loadUsersById;b={get:g(m)};var l={get:g(m),set:f({unboxAtoms:!1,service:m})};g={get:g(m),set:d(q()({},
c,{setUserHandler:f({unboxAtoms:!1,service:m})}))};f={call:h(c)};m={call:k(c)};c={call:e(c)};return a(u,b,l,g,b,f,m,c)})}).call(b,"src/shared/user/schema.js")},function(e,b,a){(function(f){function d(a){var b=a.loadInvestigationsById,c=a.loadPivotsById,d=a.searchPivot;return function(a,f){a=a[1];return d({loadInvestigationsById:b,loadPivotsById:c,pivotIds:a,investigationId:f[0]}).mergeMap(function(a){a=a.pivot;return[Object(g.$pathValue)("pivotsById['"+a.id+"']['resultCount']",a.resultCount),Object(g.$pathValue)("pivotsById['"+
a.id+"']['resultSummary']",a.resultSummary),Object(g.$pathValue)("pivotsById['"+a.id+"']['enabled']",a.enabled),Object(g.$pathValue)("pivotsById['"+a.id+"']['status']",a.status)]}).catch(e(a))}}function e(a){var b=function(b){b=b instanceof Error?b:Error(b);var c=Object(p.a)(u,b),d=l.a.cause(b);return n.Observable.from([Object(g.$pathValue)("pivotsById['"+a+"']['status']",{ok:!1,searching:!1,code:c,message:(d&&d.message||b.message)+" (code: "+c+")",title:"Error running pivot!"})])};return function(a){return a instanceof
q.ErrorObservable?a.catch(function(a){return n.Observable.of(a)}).switchMap(function(a){return b(a)}):b(a)}}var h=a(21);h=a.n(h);var k=a(9),l=a.n(k),n=a(4);a.n(n);var q=a(114);a.n(q);k=a(22);a.n(k);var p=a(39),g=a(6);a.n(g);var c=a(0),r=h()(["{\n        ['id', 'length', 'resultCount', 'resultSummary']: ",",\n        ['status', 'enabled', 'description', 'pivotTemplate']: ",",\n        pivotParameters: {\n            [{ keys }]: ","\n        },\n        searchPivot: ","\n    }"],["{\n        ['id', 'length', 'resultCount', 'resultSummary']: ",
",\n        ['status', 'enabled', 'description', 'pivotTemplate']: ",",\n        pivotParameters: {\n            [{ keys }]: ","\n        },\n        searchPivot: ","\n    }"]),u=c.b.createLogger(f);b.a=Object(k.withSchema)(function(a,b,c){var g=b.get,f=b.set,e=c.loadPivotsById;b={get:g(e)};g={get:g(e),set:f({unboxAtoms:!1,service:e})};c={call:d(c)};return a(r,b,g,g,c)})}).call(b,"src/shared/pivots/schema.js")},function(e,b){e.exports=require("rxjs/observable/ErrorObservable")},function(e,b,a){b.a=
function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(a.isMessage)return a;var b=a.value;null!==b&&(void 0===b?b=Object(m.atom)(b):"object"===("undefined"===typeof b?"undefined":d()(b))&&(h(b)?b=Object(m.atom)(b):void 0===b.$type&&(b=Object(m.atom)(b))));return f()({},a,{value:b})};e=a(1);var f=a.n(e);e=a(70);var d=a.n(e),m=a(6);a.n(m);var h=Array.isArray},function(e,b,a){b.a=function(a,b){var e=Object(m.simpleflake)().toJSON(),h=b.err;h=void 0===h?b:h;a.error(f()({err:h,errorCode:e},
d.a.omit(b,"err")));return e};e=a(1);var f=a.n(e);e=a(2);var d=a.n(e),m=a(23);a.n(m)},function(e,b,a){(function(f){function d(a){var b=a.$falcor,c=a.description;a=l()(a,["$falcor","description"]);return f.createElement(B,n()({header:"Pivot Description"},a),f.createElement("div",{className:v.a["pivot-expander-body"]},f.createElement("div",{className:v.a["pivot-description"]},f.createElement(z.b,{$falcor:b,description:c}))))}function e(a){var b,d=a.$falcor,g=a.id,e=a.pivotTemplate,m=a.pivotParameters,
h=a.pivots,k=a.handlers,p=a.rowIndex;a=l()(a,"$falcor id pivotTemplate pivotParameters pivots handlers rowIndex".split(" "));var q=(h||[]).slice(0,p);h=e||{};var x=h.pivotParametersUI;h=h.pivotParameterKeys;return f.createElement(B,n()({header:"Parameters"},a),f.createElement(w.a,{horizontal:!0,className:c()((b={"container-fluid":!0},b[v.a["pivot-expander-body"]]=!0,b))},e&&x&&(h||[]).map(function(a,b){return f.createElement(r.a,{id:g,paramKey:a,handlers:k,previousPivots:q,paramUI:x[a],paramValue:m[a],
$falcor:d.deref(m),key:"pivot-cell-"+g+"-"+a+"-"+b})})))}function h(a){var b=a.id,c=a.enabled,d=a.resultSummary,g=a.resultCount;a=l()(a,["id","enabled","resultSummary","resultCount"]);return f.createElement(B,n()({header:"Events Summary"},a),f.createElement("div",{className:v.a["pivot-expander-body"]},0<g?f.createElement("div",{className:v.a["pivot-result-summaries"]+" "+v.a["result-count-"+(c?"on":"off")]},d&&f.createElement(t.a,{id:b,resultSummary:d})||null):-1===g?C:y))}b.a=function(a){var b,g=
a.id,m=a.$falcor,l=a.investigationId,k=a.status,p=a.enabled,n=a.description,q=a.resultCount,w=a.resultSummary,A=a.pivotParameters,t=a.pivotTemplate,r=a.searchPivot,B=a.splicePivot,z=a.insertPivot,y=a.pivots,C=a.rowIndex;a={searchPivot:r,togglePivots:a.togglePivots,setPivotAttributes:a.setPivotAttributes,splicePivot:B,insertPivot:z};return f.createElement("div",{id:"pivotRow"+g,className:c()((b={},b[v.a["pivot-row"]]=!0,b[v.a["pivot-disabled"]]=!p,b))},f.createElement(x.a,null,f.createElement(d,{eventKey:"1",
$falcor:m,description:n,defaultExpanded:!1}),f.createElement(e,{$falcor:m,id:g,eventKey:"2",pivotTemplate:t,pivots:y,handlers:a,rowIndex:C,defaultExpanded:!0,pivotParameters:A}),f.createElement(h,{id:g,eventKey:"3",enabled:p,resultCount:q,resultSummary:w,defaultExpanded:!0})),f.createElement("div",{className:v.a["pivot-icons"]},f.createElement(u.a,{pivotId:g,investigationId:l,index:C,resultCount:q,searchPivot:r,insertPivot:z,splicePivot:B,status:k,numRows:y.length})))};var k=a(13),l=a.n(k);k=a(1);
var n=a.n(k);k=a(5);var q=a.n(k);k=a(7);var p=a.n(k);k=a(8);var g=a.n(k);k=a(24);var c=a.n(k),r=a(118),u=a(125),t=a(128);k=a(15);var v=a.n(k);k=a(76);var w=a.n(k);k=a(19);var A=a.n(k);k=a(130);var x=a.n(k),z=a(55),B=function(a){function b(c,d){q()(this,b);d=p()(this,a.call(this,c,d));d.state={open:!1!==c.defaultExpanded};return d}g()(b,a);b.prototype.makeHeader=function(a,b){return f.createElement("p",{className:v.a["pivot-expander"]},f.createElement("span",{style:{padding:"0.25em"}},a,f.createElement("i",
{style:{float:"right"},className:""+(b?"fa fa-fw fa-minus":"fa fa-fw fa-plus")})))};b.prototype.render=function(){var a=this,b=this.makeHeader(this.props.header,this.state.open);return f.createElement(A.a,n()({collapsible:!0},this.props,{header:b,expanded:this.state.open,onSelect:function(){return a.setState({open:!a.state.open})}}))};return b}(A.a),C=f.createElement("b",null,"Run this pivot to generate events"),y=f.createElement("b",null,"No events found!")}).call(b,a(3))},function(e,b,a){(function(f,
d){function e(a){var b=a.paramValue,g=a.paramUI,f=a.onChange;return d.createElement(w.a,{className:c.a["pivot-text-param"],controlId:"pivot-text-param-"+a.id+"-"+a.paramKey},d.createElement(v.a,n()({componentClass:x.a},z),g.label),d.createElement(v.a,B,d.createElement(A.a,{type:"text",onChange:f,componentClass:"input",defaultValue:b,placeholder:g.placeholder})))}function h(a){var b=a.id,g=a.paramKey,f=a.paramValue,e=a.paramUI,m=a.onChange;!f&&e.options&&e.options[0]&&setTimeout(function(){return m({target:{value:e.options[0].value}})});
return d.createElement(w.a,{className:c.a["pivot-select-param"],controlId:"pivot-select-param-"+b+"-"+g},d.createElement(v.a,n()({componentClass:x.a},z),e.label),d.createElement(v.a,B,d.createElement(A.a,{value:f,onChange:m,componentClass:"select",placeholder:e.placeholder},(e.options||[]).map(function(a,c){return d.createElement("option",{value:a.value,key:"select-option-"+b+"-"+g+"-"+c},a.label)}))))}b.a=function(a){var b=a.paramUI;a=l()(a,["paramUI"]);var c=F[b.inputType];return!c||"isVisible"in
b&&!b.isVisible?null:d.createElement(c,n()({paramUI:b},a))};var k=a(13),l=a.n(k);k=a(1);var n=a.n(k),q=a(4);a.n(q);k=a(40);var p=a.n(k);k=a(71);var g=a.n(k);k=a(15);var c=a.n(k);k=a(25);var r=a.n(k);k=a(26);var u=a.n(k),t=a(55);k=a(16);var v=a.n(k);k=a(57);var w=a.n(k);k=a(72);var A=a.n(k);k=a(56);var x=a.n(k);a(0).b.createLogger(f);var z={sm:3,md:3,lg:3},B={sm:9,md:9,lg:9},C={style:{textAlign:"left"},sm:z.sm+B.sm,md:z.md+B.md,lg:z.lg+B.lg},y=function(a){return r()(function(b){var c=u()(),d=c.handler,
g=c.stream;return b.switchMap(function(b){var c=b.handlers;c=(void 0===c?{}:c).setPivotAttributes;return(b.paramKey&&c?g.do(a(b,c)):q.Observable.empty()).ignoreElements().startWith(b).mapTo(n()({},b,{onChange:d}))})})};f=y(function(a,b){var c=a.paramKey;return function(a){var d;return a.preventDefault&&a.preventDefault()||b((d={},d["pivotParameters."+c]=a.target.value,d))}});k=y(function(a,b){var c=a.paramKey;return function(a){var d;return b((d={},d["pivotParameters."+c]=a.map(function(a){return a.id}),
d))}});y=y(function(a,b){var c=a.paramKey,d=a.previousPivots;return function(a){var g;return a.preventDefault&&a.preventDefault()||b((g={},g["pivotParameters."+c]="all-pivots"===a.target.value?d.map(function(a){return a.id}):d.map(function(a){return a.id}).filter(function(b){return b===a.target.value}).slice(0,1),g))}});var F={label:function(a){var b=a.paramUI;return d.createElement(w.a,{className:c.a["pivot-label-param"],controlId:"pivot-label-param-"+a.id+"-"+a.paramKey},d.createElement(v.a,n()({componentClass:x.a},
C),b.label))},bool:f(function(a){var b=a.paramUI,f=a.onChange;return d.createElement(w.a,{className:c.a["pivot-bool-param"],controlId:"pivot-bool-param-"+a.id+"-"+a.paramKey},d.createElement(v.a,C,d.createElement(g.a,{onChange:function(a){return f({target:{value:a}})},defaultChecked:a.paramValue,checkedChildren:b.label,unCheckedChildren:b.label})))}),daterange:function(a){var b=a.id,g=a.paramKey;return d.createElement(t.a,{baseid:b,$falcor:a.$falcor,timeKey:g,range:a.paramValue,labelColumns:z,contentColumns:B,
toProps:D,fromProps:D,className:c.a["pivot-date-range-param"],controlId:"pivot-date-range-param-"+b+"-"+g})},text:f(e),number:f(e),textarea:f(function(a){var b=a.paramValue,g=a.paramUI,f=a.onChange;return d.createElement(w.a,{className:c.a["pivot-textarea-param"],controlId:"pivot-textarea-param-"+a.id+"-"+a.paramKey},d.createElement(v.a,n()({componentClass:x.a},z),g.label),d.createElement(v.a,C,d.createElement(A.a,{onChange:f,componentClass:"textarea",defaultValue:b,placeholder:g.placeholder})))}),
combo:f(h),multi:k(function(a){var b=a.id,g=a.paramKey,f=a.paramValue,e=a.paramUI;a=a.onChange;var m=e.options||[],h=m.reduce(function(a,b){var c;b=b.id;return n()({},a,(c={},c[b]=!0,c))},{});m=m.concat((f||[]).filter(function(a){return!h.hasOwnProperty(a)}).map(function(a){return{id:a,name:a}}));return d.createElement(w.a,{className:c.a["pivot-multi-param"],controlId:"pivot-multi-param-"+b+"-"+g},d.createElement(v.a,n()({componentClass:x.a},z),e.label),d.createElement(v.a,C,d.createElement(p.a.Creatable,
{multi:!0,clearable:!0,joinValues:!0,value:f,onChange:a,options:m,labelKey:"name",valueKey:"id",name:"multi-select-"+b+"-"+g})))}),pivotCombo:y(function(a){var b=a.id,c=a.paramKey,g=a.paramValue,f=a.paramUI,e=a.previousPivots;a=a.onChange;var m=void 0,l=void 0;l=g&&g[0]?1===g.length?g[0]:"all-pivots":"";m=(e||[]).map(function(a,b){return{value:a.id,label:"Pivot "+(b+1)+" ("+a.pivotTemplate.name+")"}});1<m.length&&(m=[{value:"all-pivots",label:"All Pivots"}].concat(m));return d.createElement(h,{id:b,
onChange:a,paramKey:c,paramValue:l,paramUI:n()({options:m},f)})})},D={className:c.a["pivot-date-range-param"],placeholder:"Investigation Default"}}).call(b,"src/shared/pivots/components/pivot-cell.js",a(3))},function(e,b,a){(function(f){a.d(b,"a",function(){return p});var d=a(1),e=a.n(d);d=a(13);var h=a.n(d);d=a(72);var k=a.n(d);d=a(25);d=a.n(d);var l=a(26),n=a.n(l),q={resize:"vertical"},p=d()(function(a){var b=n()(),d=b.handler,g=b.stream;return a.switchMap(function(a){var b=a.$falcor,c=a.description,
f=h()(a,["$falcor","description"]);f.defaultValue=c;f.placeholder=f.placeholder||"";f.style=e()({},q,f.style);return g.map(function(a){return a.target.value}).debounceTime(200).switchMap(function(a){return b.set({json:{description:a}}).progressively()},function(a,b){a=b.json;return e()({},f,{onChange:d,defaultValue:a.description})}).startWith(e()({},f,{onChange:d}))})})(function(a){return f.createElement(k.a,e()({componentClass:"textarea"},a))})}).call(b,a(3))},function(e,b,a){(function(f){function d(a,
b,c,d){a=a[c]||{};return{date:a.date,baseid:b+"_"+(c||""),placeholder:"Select a date",timezone:a.timezone||"America/Los_Angeles",time:a.time||l.a.utc(d,"hh:mm:ss a").toJSON()}}a.d(b,"a",function(){return A});var e=a(1),h=a.n(e);e=a(13);var k=a.n(e);e=a(73);var l=a.n(e),n=a(74);e=a(25);e=a.n(e);var q=a(6);a.n(q);var p=a(26),g=a.n(p);p=a(16);var c=a.n(p);p=a(32);var r=a.n(p);p=a(56);var u=a.n(p);p=a(57);var t=a.n(p),v={xs:4,sm:4,md:4,lg:4},w={xs:8,sm:8,md:8,lg:8},A=e()(function(a){var b=g()(),c=b.handler;
b=b.stream;var f=g()(),e=f.handler,m=b.merge(f.stream),l=function(a){return c({val:a,dir:"to"})},p=function(a){return e({val:a,dir:"from"})};return a.switchMap(function(a){var b=a.$falcor,c=a.baseid,g=a.range;g=void 0===g?{}:g;var f=a.rangeChanged;f=void 0===f?function(){}:f;var e=a.timeKey,n=void 0===e?"time":e,w=k()(a,["$falcor","baseid","range","rangeChanged","timeKey"]);return m.scan(function(a,b){var c,d=b.dir;b=b.val;return h()({},a,(c={},c[d]=h()({},a[d],b),c))},g).do(f).switchMap(function(a){var c;
return b.set({json:(c={},c[n]=Object(q.$atom)(a),c)}).progressively()},function(a,b){return b.json[n]}).startWith(g).map(function(a){return h()({},w,{toProps:h()({},d(a,c,"to","11:59:59 PM"),w.toProps,{onValueChange:l}),fromProps:h()({},d(a,c,"from","12:00:00 AM"),w.fromProps,{onValueChange:p})})})})})(function(a){var b=a.label,d=a.fromProps,g=a.toProps,e=a.labelColumns;e=void 0===e?v:e;var m=a.contentColumns;m=void 0===m?w:m;a=k()(a,["label","fromProps","toProps","labelColumns","contentColumns"]);
return f.createElement(t.a,a,null===b||void 0===b||""===b?void 0:f.createElement(r.a,null,f.createElement(c.a,h()({componentClass:u.a},e),b)),f.createElement(c.a,h()({componentClass:u.a},e),"Start Date:"),f.createElement(c.a,h()({componentClass:n.a},d,m)),f.createElement(c.a,h()({componentClass:u.a},e),"End Date:"),f.createElement(c.a,h()({componentClass:n.a},g,m)))})}).call(b,a(3))},function(e,b){e.exports=require("react-dates")},function(e,b){e.exports=require("react-dates/constants")},function(e,
b){e.exports=require("time-input")},function(e,b){e.exports=require("react-bootstrap-timezone-picker")},function(e,b,a){(function(f){b.a=function(a){var b=a.status,d=a.numRows,m=a.index,h=a.pivotId,z=a.investigationId,E=a.splicePivot,I=a.searchPivot,J=a.insertPivot;return b?f.createElement(q.a,null,f.createElement(g.a,{rootClose:!0,placement:"top",delayShow:c,overlay:u},f.createElement(l.a,{bsSize:"xsmall",disabled:0===m&&1===d,onClick:function(){return E({index:m})}},v)),f.createElement(n.a,{bsSize:"xsmall",
className:e.a["run-insert-button-group"]},f.createElement(g.a,{rootClose:!0,placement:"top",delayShow:c,overlay:r},f.createElement(l.a,{disabled:b.searching,onClick:function(){return I({index:m,pivotId:h,investigationId:z})}},f.createElement(p.a,{className:"fa-fw",glyph:b.searching?"hourglass":"play"}))),f.createElement(g.a,{rootClose:!0,placement:"top",delayShow:c,overlay:t},f.createElement(l.a,{onClick:function(){return J({index:m})}},w))),b.ok?void 0:f.createElement(n.a,{bsSize:"xsmall",className:e.a["status-button-group"]},
f.createElement(g.a,{rootClose:!0,placement:"top",trigger:"click",key:m+": entityRowAction-error"+m,overlay:f.createElement(k.a,{title:b.title,className:e.a["pivot-error-tooltip"],id:"tooltipActionStatus-error-"+m},f.createElement("pre",{className:e.a.message},b.message))},A)),!0!==b.info?void 0:f.createElement(n.a,{bsSize:"xsmall",className:e.a["status-button-group"]},f.createElement(g.a,{placement:"top",trigger:"click",rootClose:!0,key:m+": entityRowAction-info"+m,overlay:f.createElement(k.a,{title:b.title,
className:e.a["pivot-info-tooltip"],id:"tooltipActionStatus-info-"+m},f.createElement("span",{className:e.a.message},b.message))},x))):null};var d=a(15),e=a.n(d);d=a(17);d=a.n(d);var h=a(126),k=a.n(h);h=a(14);var l=a.n(h);h=a(75);var n=a.n(h);h=a(127);var q=a.n(h);h=a(41);var p=a.n(h);h=a(18);var g=a.n(h),c=750,r=f.createElement(d.a,{id:"tooltipActionPlay"},"Run step"),u=f.createElement(d.a,{id:"tooltipActionDelete"},"Delete step"),t=f.createElement(d.a,{id:"tooltipActionInsert"},"Insert new step after"),
v=f.createElement(p.a,{glyph:"trash"}),w=f.createElement(p.a,{className:"fa-fw",glyph:"plus-sign"}),A=f.createElement(l.a,{bsStyle:"danger"},f.createElement(p.a,{className:"fa-fw",glyph:"warning-sign"})),x=f.createElement(l.a,{bsStyle:"info"},f.createElement(p.a,{className:"fa-fw",glyph:"info-sign"}))}).call(b,a(3))},function(e,b){e.exports=require("react-bootstrap/lib/Popover")},function(e,b){e.exports=require("react-bootstrap/lib/ButtonToolbar")},function(e,b,a){(function(f){b.a=function(a){var b=
a.id;return f.createElement("div",{className:h.a["pivot-entity-summaries"]},e.a.sortBy(a.resultSummary.entities,function(a){return a.name}).map(function(a,c){var d=a.count,g=a.color,e=a.icon;e=void 0===e?"":e;return f.createElement(n.a,{placement:"top",overlay:f.createElement(l.a,{id:"tooltipEntity_"+b+"_"+c},a.name),key:c+": entitySummary_"+b},f.createElement("span",{className:h.a["pivot-entity-summary"]},f.createElement(k.a,{name:""===e?"question-circle":e,size:"2x"}),f.createElement("span",{style:{backgroundColor:g},
className:h.a["pivot-entity-pill"]}),f.createElement("span",{className:h.a["pivot-entity-count"]},d)))}))};var d=a(2),e=a.n(d);d=a(15);var h=a.n(d);d=a(129);var k=a.n(d);d=a(17);var l=a.n(d);d=a(18);var n=a.n(d)}).call(b,a(3))},function(e,b){e.exports=require("react-fontawesome")},function(e,b){e.exports=require("react-bootstrap/lib/PanelGroup")},function(e,b,a){(function(f,d){b.a=function(a){var b,c=a.id,e=a.investigationId,m=a.enabled,w=a.rowIndex,A=a.pivots,x=a.templates,z=a.togglePivots,B=a.pivotTemplate;
a=a.setPivotAttributes;return f.createElement(q.a,{fluid:!0,className:k.a["pivot-row-header"]},f.createElement(p.a,null,f.createElement(g.a,{xs:3,sm:3,md:3,lg:3,className:k.a["pivot-row-header-item"]},f.createElement("span",{"data-row-index":w+1,className:l()((b={},b[k.a.disabled]=!m,b[k.a["pivot-row-index-flag"]]=!0,b))}),f.createElement(h.a,{defaultChecked:!1,checked:m,checkedChildren:"On",onChange:function(a){var b=a?d.range(0,w+1):d.range(w,A.length);z({indices:b,enabled:a,investigationId:e})},
unCheckedChildren:"Off"})),f.createElement(g.a,{xs:9,sm:9,md:9,lg:9,className:k.a["pivot-row-header-item"],style:{marginRight:-10,paddingRight:5}},B&&x&&f.createElement(n.a,{id:c,templates:x,pivotTemplate:B,setPivotAttributes:a})||void 0)))};var e=a(71),h=a.n(e);e=a(15);var k=a.n(e);e=a(24);var l=a.n(e),n=a(132);e=a(42);var q=a.n(e);e=a(32);var p=a.n(e);e=a(16);var g=a.n(e)}).call(b,a(3),a(2))},function(e,b,a){(function(e){b.a=function(a){var b=a.id,d=a.pivotTemplate,m=a.setPivotAttributes;return e.createElement("span",
{className:k.a["pivot-type-selector-container"]},e.createElement(f.a,{id:"templateSelector"+b,name:"templateSelector"+b,clearable:!1,backspaceRemoves:!1,value:{value:d.id,label:d.name},options:a.templates.map(function(a){return{value:a.id,label:a.name}}),onChange:function(a){return m({pivotTemplate:Object(h.$ref)("templatesById['"+a.value+"']")})}}))};var d=a(40),f=a.n(d),h=a(6);a.n(h);d=a(15);var k=a.n(d)}).call(b,a(3))},function(e,b,a){a.d(b,"a",function(){return d});var f=a(43);e=a(27);a.n(e);
a=a(136);var d=Object(e.container)({renderLoading:!1,fragment:function(){var a=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).pivotTemplate;a=void 0===a?{}:a;var b=a.pivotParameterKeys;b=void 0===b?[]:b;return 0===b.length?"{\n                id, status, enabled, description,\n                resultCount, resultSummary,\n                pivotTemplate: "+f.a.fragment(a)+"\n            }":"{\n            id, status, enabled, description,\n            resultCount, resultSummary,\n            pivotParameters: {\n                "+
b+"\n            },\n            pivotTemplate: "+f.a.fragment(a)+"\n        }"},mapFragment:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{$falcor:arguments[2],id:a.id,status:a.status,enabled:a.enabled,description:a.description,resultCount:a.resultCount,resultSummary:a.resultSummary,pivotTemplate:a.pivotTemplate,pivotParameters:a.pivotParameters||{}}},dispatchers:{setPivotAttributes:a.a}})},function(e,b,a){e=a(21);e=a.n(e);var f=a(22);a.n(f);var d=e()(["{\n        ['id', 'name', 'tags', 'pivotParameterKeys']: ",
",\n        pivotParametersUI: {\n            [{ keys }]: ","\n        }\n    }"],["{\n        ['id', 'name', 'tags', 'pivotParameterKeys']: ",",\n        pivotParametersUI: {\n            [{ keys }]: ","\n        }\n    }"]);b.a=Object(f.withSchema)(function(a,b,e){b=b.get;e={get:b(e.loadTemplatesById)};return a(d,e,e)})},function(e,b,a){e=a(27);a.n(e);b.a=Object(e.container)({renderLoading:!1,fragment:function(){var a=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).pivotParameterKeys;
a=void 0===a?[]:a;return 0===a.length?"{ id, name, tags, pivotParameterKeys }":"{\n            id, name, tags,\n            pivotParameterKeys,\n            pivotParametersUI: {\n                "+a+"\n            }\n        }"}})},function(e,b,a){b.a=function(a){return{params:a,type:f}};var f="set-pivot-attributes"},function(e,b,a){(function(e){b.a=function(a){var b=a.id,c=a.pivots,d=a.templates,f=a.insertPivot,m=a.splicePivot,l=a.searchPivot,h=a.togglePivots;return e.createElement("div",{className:n.a["pivot-table"]},
e.createElement("div",null,c.map(function(a,g){return e.createElement(r,{id:b,index:g,key:g,pivots:c,pivot:a,templates:d,insertPivot:f,splicePivot:m,searchPivot:l,togglePivots:h})})),e.createElement(g.a,{block:!0,onClick:function(){return f({index:c.length-1})}},"Add new pivot"))};var d=a(5),f=a.n(d);d=a(7);var h=a.n(d);d=a(8);var k=a.n(d);d=a(15);var l=a.n(d);d=a(138);var n=a.n(d);d=a(24);var q=a.n(d);d=a(19);var p=a.n(d);d=a(14);var g=a.n(d),c=a(38),r=function(a){function b(){f()(this,b);for(var c=
arguments.length,d=Array(c),g=0;g<c;g++)d[g]=arguments[g];c=h()(this,a.call.apply(a,[this].concat(d)));c.state={open:!0};return c}k()(b,a);b.prototype.render=function(){var a,b=this,d=this.props,g=d.pivot,f=d.id,m=d.index,h=d.pivots,k=d.templates,n=d.togglePivots,t=d.searchPivot,r=d.splicePivot;d=d.insertPivot;return e.createElement(p.a,{collapsible:!0,expanded:this.state.open,className:q()((a={},a[l.a["pivot-disabled"]]=!g.enabled,a)),header:e.createElement(c.c,{data:g,investigationId:f,rowIndex:m,
pivots:h,templates:k,togglePivots:n}),footer:e.createElement("span",{className:l.a["pivot-footer"]},e.createElement("i",{style:{float:"right",width:"100%",textAlign:"right"},className:"fa fa-fw fa-caret-"+(this.state.open?"up":"down"),onClick:function(){return b.setState({open:!b.state.open})}})),key:m},e.createElement(c.b,{data:g,pivots:h,rowIndex:m,investigationId:f,templates:k,searchPivot:t,splicePivot:r,insertPivot:d,togglePivots:n,handleSelect:this.handleSelect,key:m+": "+g.id}))};return b}(e.Component)}).call(b,
a(3))},function(e,b){e.exports={"pivot-table":"_3iGyc","pivot-cell":"_3T4Qy"}},function(e,b,a){(function(e){function d(a){var b=a.loadConnectorsById,c=a.checkConnector;return function(a){a=a.connectorIds;var d=c({loadConnectorsById:b,connectorIds:a}).mergeMap(function(a){a=a.connector;return[Object(q.$pathValue)("connectorsById['"+a.id+"'].status",a.status)]}).catch(f(a));return k.Observable.from(a).map(function(a){return Object(q.$pathValue)("connectorsById['"+a+"'].status",{enabled:!1,level:"default",
message:"Running health check..."})}).concat(d)}}function f(a){return function(b){var c=Object(n.a)(r,b);b=g.a.cause(b);return k.Observable.from([Object(q.$pathValue)("connectorsById['"+a+"']['status']",{enabled:!0,level:"danger",code:c,message:b.message+" (code: "+c+")"})])}}var h=a(21);h=a.n(h);var k=a(4);a.n(k);var l=a(22);a.n(l);var n=a(39),q=a(6);a.n(q);var p=a(9),g=a.n(p);p=a(0);var c=h()(["{\n        ['id', 'name', 'status', 'lastUpdated']: ",",\n        checkStatus: ","\n    }"],["{\n        ['id', 'name', 'status', 'lastUpdated']: ",
",\n        checkStatus: ","\n    }"]),r=p.b.createLogger(e);b.a=Object(l.withSchema)(function(a,b,g){var e=b.get;b=b.set;var f=g.loadConnectorsById;e={get:e(f),set:b({unboxAtoms:!1,service:f})};g={call:d(g)};return a(c,e,g)})}).call(b,"src/shared/connectors/schema.js")},function(e,b,a){(function(e){b.a=function(a){var b=a.id,d=a.status,m=a.checkStatus;return e.createElement(f.a,{bsStyle:d.level,onClick:function(){return m(b)},disabled:!1===d.enabled},"Status")};var d=a(14),f=a.n(d)}).call(b,a(3))},
function(e,b,a){(function(e){b.a=function(a){var b=a.connectors;a=a.switchScreen;return e.createElement(l.a,{className:k.a["main-panel-panel"]},e.createElement(d.a,{connectors:b}),e.createElement(l.a,{header:"Available Connectors",className:k.a.panel},e.createElement("div",{className:k.a["investigations-buttons"]},e.createElement(g.a,{placement:"top",overlay:c},e.createElement(n.a,{onClick:function(){return alert("Todo")},className:"btn-primary "+k.a["add-new-investigation"]},r))),e.createElement(f.a,
{connectors:b,switchScreen:a})))};var d=a(142),f=a(143),h=a(28),k=a.n(h);h=a(19);var l=a.n(h);h=a(14);var n=a.n(h);h=a(17);h=a.n(h);var q=a(41);q=a.n(q);var p=a(18),g=a.n(p),c=e.createElement(h.a,{id:"AddNewConnectorTooltip"},"Add New Connector"),r=e.createElement(q.a,{glyph:"plus"})}).call(b,a(3))},function(e,b,a){(function(e){b.a=function(a){a=a.connectors;a=void 0===a?[]:a;return e.createElement(l.a,null,e.createElement(k.a,{className:f.a["welcome-bar"]},e.createElement(h.a,{md:6},e.createElement(q.a,
null,e.createElement(n.a.Body,null,e.createElement(n.a.Heading,{className:f.a["user-greeting-heading"]},"Connectors!"),p))),e.createElement(h.a,{md:6},e.createElement(q.a,null,e.createElement("h2",{className:"text-center"},a.length),g))))};var d=a(28),f=a.n(d);d=a(16);var h=a.n(d);d=a(32);var k=a.n(d);d=a(42);var l=a.n(d);d=a(77);var n=a.n(d);d=a(19);var q=a.n(d),p=e.createElement("span",null,"Manage your data connections"),g=e.createElement("div",{className:"text-center"},"Number of Connectors")}).call(b,
a(3))},function(e,b,a){(function(e){b.a=function(a){var b=a.connectors,g=a.selectHandler;a={mode:"checkbox",clickToSelect:!1,onSelect:g,onSelectAll:function(a,b){g(b,a)},bgColor:"#fee"};return e.createElement("div",{className:k.a["investigation-table"]},e.createElement(f.BootstrapTable,{data:(void 0===b?[]:b).filter(Boolean),selectRow:a,striped:!1,hover:!0,pagination:!0,options:{defaultSortName:"name",defaultSortOrder:"desc"}},l,n,q,p,e.createElement(f.TableHeaderColumn,{dataField:"id",dataFormat:function(a,
b){return e.createElement(d.b,{id:a,data:b})},width:"172px",editable:!1},"Actions")))};var d=a(44),f=a(78);a.n(f);var h=a(28),k=a.n(h),l=e.createElement(f.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0,editable:!1}),n=e.createElement(f.TableHeaderColumn,{dataField:"name",dataSort:!0,width:"200px",dataFormat:function(a){return e.createElement("span",null,a)}},"Name"),q=e.createElement(f.TableHeaderColumn,{dataField:"message",dataFormat:function(a,b){return e.createElement("span",null,b.status.message)}},
"Message"),p=e.createElement(f.TableHeaderColumn,{dataField:"lastUpdated",dataSort:!0,editable:!1,dataFormat:function(a){return(new Date(a)).toLocaleString()},width:"180px",dataAlign:"center"},"Updated")}).call(b,a(3))},function(e,b,a){a.d(b,"a",function(){return d});a.d(b,"b",function(){return m});var f=a(44);e=a(27);a.n(e);a=a(145);var d=Object(e.container)({renderLoading:!1,fragment:function(){return"{\n        id, name, status, lastUpdated\n    }"},dispatchers:{checkStatus:a.a}}),m=Object(e.container)({renderLoading:!1,
fragment:function(){return"{\n        id, name, activeScreen, connectors: "+f.a.fragments((0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).connectors)+"\n    }"}})},function(e,b,a){b.a=function(a){return{id:a,type:f}};var f="check-status"},function(e,b,a){(function(e){function d(a){var b=a.loadInvestigationsById,d=a.unloadPivotsById,g=a.splicePivot;return function(a,e){var f=a[1];return g({loadInvestigationsById:b,unloadPivotsById:d,investigationIds:f,pivotIndex:e[0],deleteCount:1}).mergeMap(function(a){a=
a.investigation;return[Object(c.$pathValue)("investigationsById['"+f+"']['pivots'].length",a.pivots.length),Object(c.$invalidation)("investigationsById['"+f+"']['pivots'][0.."+a.pivots.length+"]")]}).catch(l(f))}}function f(a){var b=a.loadInvestigationsById,d=a.insertPivot;return function(a,g){a=a[1];return d({loadInvestigationsById:b,investigationIds:a,pivotIndex:g[0]}).mergeMap(function(a){var b=a.investigation;a=a.insertedIndex;var d=b.pivots,g=d.length;d=[Object(c.$pathValue)("investigationsById['"+
b.id+"']['pivots'].length",g),Object(c.$pathValue)("investigationsById['"+b.id+"']['pivots']["+a+"]",d[a])];a<g-1&&d.push(Object(c.$invalidation)("investigationsById['"+b.id+"']['pivots']["+(a+1)+".."+(g-1)+"]"));return d}).catch(l(a))}}function h(a){var b=a.loadInvestigationsById,d=a.loadPivotsById,g=a.loadUsersById,e=a.uploadGraph;return function(a){var f=a[1];return e({loadInvestigationsById:b,loadPivotsById:d,loadUsersById:g,investigationIds:f}).mergeMap(function(a){a=a.investigation;var b=a.edgeOpacity;
b=void 0===b?1:b;return[Object(c.$pathValue)("investigationsById['"+f+"'].url",a.url),Object(c.$pathValue)("investigationsById['"+f+"'].axes",a.axes),Object(c.$pathValue)("investigationsById['"+f+"'].edgeOpacity",b),Object(c.$pathValue)("investigationsById['"+f+"'].status",a.status),Object(c.$pathValue)("investigationsById['"+f+"'].controls",a.controls),Object(c.$pathValue)("investigationsById['"+f+"'].datasetName",a.datasetName),Object(c.$pathValue)("investigationsById['"+f+"'].datasetType",a.datasetType),
Object(c.$pathValue)("investigationsById['"+f+"'].eventTable",a.eventTable)]}).catch(l(f))}}function k(a){var b=a.loadInvestigationsById,d=a.saveInvestigationsById,g=a.persistInvestigationsById,e=a.persistPivotsById,f=a.unlinkPivotsById;return function(a){var m=a[1];return d({loadInvestigationsById:b,persistInvestigationsById:g,persistPivotsById:e,unlinkPivotsById:f,investigationIds:m}).mergeMap(function(a){return[Object(c.$pathValue)("investigationsById['"+m+"'].modifiedOn",a.investigation.modifiedOn),
Object(c.$pathValue)("investigationsById['"+m+"'].status",{ok:!1,saved:!0,msgStyle:"success",message:"Investigation Saved!"})]}).catch(l(m))}}function l(a){return function(b){var d=Object(p.a)(t,b);return q.Observable.from([Object(c.$pathValue)("investigationsById['"+a+"']['status']",{ok:!1,etling:!1,code:d,message:"Server error: "+b.message+" (code: "+d+")",msgStyle:"danger"})])}}var n=a(21);n=a.n(n);var q=a(4);a.n(q);var p=a(39),g=a(22);a.n(g);var c=a(6);a.n(c);var r=a(0),u=n()("{\n        eventTable: ;,\n        ['id', 'name', 'tags', 'url', 'datasetName', 'datasetType', 'controls', 'status', 'description', 'time', 'modifiedOn', 'layout', 'axes', 'edgeOpacity']: ;,\n        pivots: {\n            length: ;,\n            [{ integers }]: ;\n        },\n        save: ;,\n        graph: ;,\n        insertPivot: ;,\n        splicePivot: ;\n    }".split(";"),
"{\n        eventTable: ;,\n        ['id', 'name', 'tags', 'url', 'datasetName', 'datasetType', 'controls', 'status', 'description', 'time', 'modifiedOn', 'layout', 'axes', 'edgeOpacity']: ;,\n        pivots: {\n            length: ;,\n            [{ integers }]: ;\n        },\n        save: ;,\n        graph: ;,\n        insertPivot: ;,\n        splicePivot: ;\n    }".split(";")),t=r.b.createLogger(e);b.a=Object(g.withSchema)(function(a,b,c){var g=b.get,e=b.set,m=c.loadInvestigationsById;b={get:g(m)};
g={get:g(m),set:e({unboxAtoms:!1,service:m})};e={call:f(c)};m={call:d(c)};var l={call:k(c)};c={call:h(c)};return a(u,b,g,b,b,l,c,e,m)})}).call(b,"src/shared/investigations/schema.js")},function(e,b,a){(function(e){b.a=function(a){var b=a.id,d=a.user,m=a.layout,p=a.status;p=void 0===p?{}:p;var w=a.description,y=a.time,F=a.$falcor,D=a.pivots,E=void 0===D?[]:D;D=a.templates;var I=a.investigations,J=a.searchPivot,K=a.insertPivot,H=a.splicePivot,N=a.togglePivots,M=a.saveLayout,G=a.dismissAlert,O=a.graphInvestigation,
R=a.copyInvestigation,P=a.selectInvestigation,L=a.createInvestigation;a=a.saveInvestigation;var Q=p.msgStyle||"default";p.saved&&setTimeout(G,3E3);return e.createElement("div",{className:f.a["investigation-pane"]},e.createElement(k.b,{key:"investigation-header:"+b,id:b,user:d,layout:m,saveLayout:M,investigations:I,copyInvestigation:R,saveInvestigation:a,selectInvestigation:P,createInvestigation:L},e.createElement(l.a,{layout:m,$falcor:F,saveLayout:M,description:w,time:y}),e.createElement("div",null,
e.createElement(g.a,{placement:"bottom",delayShow:c,overlay:r},e.createElement(q.a,{bsStyle:Q,className:f.a["play-all"],onClick:function(){return O({investigationId:b,length:E.filter(function(a){return a.enabled}).length})}},"Run All Pivots")),p.ok?null:e.createElement(n.a,{bsStyle:p.msgStyle||"danger",className:f.a.alert,onDismiss:G},e.createElement("strong",null," ",p.message," ")))),e.createElement("div",{className:f.a["investigation-pivots"]},e.createElement(h.d,{id:b,pivots:E,status:p,templates:D,
insertPivot:K,splicePivot:H,searchPivot:J,dismissAlert:G,togglePivots:N,saveInvestigation:a})),e.createElement("div",{className:f.a["investigation-footer"]},e.createElement("div",{className:f.a.rule}),e.createElement("div",{className:f.a.copyright},u),e.createElement("div",{className:f.a.copyrightDetail},"v","dev"," ",t,v)))};var d=a(148),f=a.n(d),h=a(38),k=a(29),l=a(149);d=a(79);var n=a.n(d);d=a(14);var q=a.n(d);d=a(17);d=a.n(d);var p=a(18),g=a.n(p),c=750,r=e.createElement(d.a,{id:"tooltip-play-all"},
"Run and visualize all pivots"),u=e.createElement("strong",null,"\u00a9 Graphistry Inc. 2017"),t=e.createElement("br",null),v=e.createElement("br",null)}).call(b,a(3))},function(e,b){e.exports={"investigation-pane":"TxNYw","investigation-header":"HznaI","investigation-footer":"_3W5QG","investigation-pivots":"_28OZZ",layoutButton:"_1EIOr","play-all":"zNHIS",rule:"_1W-YO",description:"phJLg",copyright:"_1icU9",copyrightDetail:"_3fsm2",myInvestigation:"LW4cY"}},function(e,b,a){(function(e,d){b.a=function(a){var b=
a.layout,c=a.saveLayout,g=a.$falcor,e=a.description;e=void 0===e?"":e;a=a.time;a=void 0===a?{}:a;return d.createElement(t.a,{collapsible:!0,defaultExpanded:!0,className:q.a["investigation-details"],header:d.createElement("p",{className:q.a["investigation-details-header"]},d.createElement("span",null,"Investigation Details",d.createElement("i",{className:"fa fa-fw "+q.a["fa-caret"]})))},d.createElement(w.a,{horizontal:!0},d.createElement(A.a,{controlId:"investigation-description"},d.createElement(u.a,
h()({componentClass:v.a},x),"Description:"),d.createElement(u.a,B,d.createElement(r.b,{$falcor:g,description:e}))),d.createElement(A.a,{controlId:"investigation-layout"},d.createElement(u.a,h()({componentClass:v.a},x),"Graph Layout:"),d.createElement(u.a,z,d.createElement(k.a,{value:b,clearable:!1,name:"layout-selector",className:q.a["layout-picker"],onChange:function(a){return c({layoutType:a.value})},options:l.b.map(function(a){var b=a.id;return{value:b,className:b,label:a.friendlyName}})}))),d.createElement(y,
{range:a,timeKey:"time",$falcor:g,baseid:"global_time",labelColumns:x,contentColumns:z,toProps:C,fromProps:C,controlId:"investigation-time-picker",className:q.a["investigation-date-range"]})))};var f=a(1),h=a.n(f);f=a(40);var k=a.n(f),l=a(45),n=a(6);a.n(n);f=a(150);var q=a.n(f);f=a(25);f=a.n(f);var p=a(26),g=a.n(p);p=a(151);var c=a.n(p),r=a(55);p=a(16);var u=a.n(p);p=a(19);var t=a.n(p);p=a(56);var v=a.n(p);p=a(76);var w=a.n(p);p=a(57);var A=a.n(p);a(0).b.createLogger(e);var x={sm:3,md:3,lg:3},z={sm:9,
md:9,lg:9},B={sm:x.sm+z.sm,md:x.md+z.md,lg:x.lg+z.lg},C={className:q.a["global-time-picker"]},y=f()(function(a){var b=g()(),d=b.handler,e=b.stream;return a.switchMap(function(a){return e.distinctUntilChanged(c.a).switchMap(function(){return a.$falcor.withoutDataSource().set(Object(n.pathValue)("status",{msgStyle:"warning",ok:!1,message:"Please re-run pivots to reflect date changes."}))}).startWith(a).mapTo(h()({rangeChanged:d},a))})})(r.a)}).call(b,"src/shared/investigations/components/investigation-details.js",
a(3))},function(e,b){e.exports={"investigation-details":"_3cRx9","investigation-details-header":"_2kzcY","fa-caret":"_2BiA-","layout-picker":"_1Tcgg"}},function(e,b){e.exports=require("recompose/shallowEqual")},function(e,b,a){(function(e){b.a=function(a){var b=a.id,d=a.user,g=a.children,m=a.investigations,z=a.saveInvestigation,E=a.createInvestigation,I=a.copyInvestigation,J=a.selectInvestigation;return e.createElement(k.a,{fluid:!0,className:h.a["investigation-header"]},e.createElement(l.a,{style:{height:41},
className:h.a["investigation-header-row"]+" "+h.a["investigation-header-nav"]},e.createElement(n.a,{className:h.a["investigation-header-col"],xs:8,sm:8,md:8,lg:8},e.createElement(f.a,{name:"investigation-selector",className:h.a["investigation-selector"],clearable:!1,value:b,options:(void 0===m?[]:m).map(function(a){return{value:a.id,label:a.name}}),onChange:function(a){return J(a.value)}})),e.createElement(n.a,{className:h.a["investigation-header-btns"],xs:4,sm:4,md:4,lg:4},e.createElement(p.a,{justified:!0,
className:h.a["investigation-header-nav-items"]},e.createElement(c.a,{placement:"bottom",delayShow:r,overlay:v},e.createElement(q.a,{onClick:function(){return E(d.id)}},w)),e.createElement(c.a,{placement:"bottom",delayShow:r,overlay:t},e.createElement(q.a,{onClick:function(){return I(b)}},A)),e.createElement(c.a,{placement:"bottom",delayShow:r,overlay:u},e.createElement(q.a,{onClick:function(){return z(b)}},x))))),g&&g.length&&g.map(function(a,b){return a&&e.createElement(l.a,{key:"row-"+b,className:h.a["investigation-header-row"]},
e.createElement(n.a,{xs:12,sm:12,md:12,lg:12},a))||void 0})||void 0)};var d=a(40),f=a.n(d);d=a(153);var h=a.n(d);d=a(42);var k=a.n(d);d=a(32);var l=a.n(d);d=a(16);var n=a.n(d);d=a(14);var q=a.n(d);d=a(75);var p=a.n(d);d=a(41);d=a.n(d);var g=a(18),c=a.n(g);g=a(17);g=a.n(g);var r=750,u=e.createElement(g.a,{id:"saveInvestigationTooltip"},"Save Investigation"),t=e.createElement(g.a,{id:"copyInvestigationTooltip"},"Duplicate Investigation"),v=e.createElement(g.a,{id:"createInvestigationTooltip"},"Create New Investigation"),
w=e.createElement(d.a,{glyph:"plus"}),A=e.createElement(d.a,{glyph:"duplicate"}),x=e.createElement(d.a,{glyph:"floppy-disk"})}).call(b,a(3))},function(e,b){e.exports={"investigation-header-col":"_2Lpbi","investigation-header-btns":"_3x6Cy","investigation-header-row":"_3aiRZ","investigation-header-nav":"_3TRN4","investigation-header-nav-items":"_20ev8","investigation-header":"_3u94r","investigation-selector":"_8dtuP","investigations-dropdownbutton":"_3Zxnd","is-open":"KoUSt"}},function(e,b,a){(function(e){b.a=
function(a){var b=a.templates,c=void 0===b?[]:b;b=a.investigations;b=void 0===b?[]:b;var d=a.activeInvestigation;d=void 0===d?{}:d;var m=a.copyInvestigation,w=a.selectInvestigation,A=a.createInvestigation;a=a.user;var x=(d||{}).tags,z=void 0===x?[]:x,B=["Demo","Blazegraph","PAN","Graphviz","HealthDemo"];c=0<z.length?c.filter(function(a){a=a.tags;return 0<h.a.intersection(void 0===a?[]:a,z).length}):c.filter(function(a){a=a.tags;a=void 0===a?[]:a;return!(1===a.length&&-1<B.indexOf(a[0]))});x=!0;var C=
a.graphistryHost;C=void 0===C?"":C;var y="Loading Visualization",F=d.status,D=d.eventTable;D=void 0===D?{}:D;D=D.hasResults;var E=d.axes,I=d.controls,J=d.datasetName,K=d.datasetType;F&&F.ok&&!1===D?(x=!1,J=K="",y="Your current investigation settings didn't surface any events or needs to be run. Try running, or adjusting dates or pivot settings and re-running."):F&&(F.searching||F.etling)?(J=K="",y=F.searching?"Running Pivots":"Uploading Results"):J&&K||(x=!1,y="Run a Pivot to get started");return e.createElement("div",
{className:l.a["investigation-all"]},e.createElement("div",{className:l.a["investigation-split"]},e.createElement(k.a,{split:"vertical",minSize:300,defaultSize:300},e.createElement(n.a,{key:"investigation:"+d.id,user:a,data:d,templates:c,investigations:b,copyInvestigation:m,selectInvestigation:w,createInvestigation:A}),e.createElement(q.Graphistry,f()({key:"investigation:"+d.id+":"+(J||"viz"),className:g.a.iframe,vizClassName:g.a.iframe},p.e[d.layout]||{},{showLogo:!1,showIcons:!0,showToolbar:!0,
backgroundColor:"#eeeeee",axes:E,controls:I,type:K,dataset:J,graphistryHost:C||"",loadingMessage:y,showLoadingIndicator:x,edgeOpacity:d.edgeOpacity})))))};var d=a(1),f=a.n(d);d=a(2);var h=a.n(d);d=a(155);var k=a.n(d);d=a(160);var l=a.n(d),n=a(29),q=a(161);a.n(q);var p=a(45);d=a(162);var g=a.n(d)}).call(b,a(3))},function(e,b,a){b=a(156);e.exports=b},function(e,b,a){function f(a){return a&&a.__esModule?a:{default:a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function m(a,b){if(a.selection)a.selection.empty();else try{b.getSelection().removeAllRanges()}catch(w){}}Object.defineProperty(b,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},
k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),l=a(3),n=f(l);l=a(58);l=f(l);var q=a(157),p=f(q);q=a(59);q=f(q);var g=a(60);g=f(g);var c=a(158),r=f(c);a=a(159);var u=f(a);a=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=(b.__proto__||Object.getPrototypeOf(b)).call(this);
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.onMouseDown=a.onMouseDown.bind(a);a.onTouchStart=a.onTouchStart.bind(a);a.onMouseMove=a.onMouseMove.bind(a);a.onTouchMove=a.onTouchMove.bind(a);a.onMouseUp=a.onMouseUp.bind(a);a.state={active:!1,resized:!1};return a}d(b,a);k(b,[{key:"componentDidMount",value:function(){var a=this;this.setSize(this.props,this.state);"undefined"!==typeof document&&
(global.addEventListener("mouseup",this.onMouseUp,!0),global.addEventListener("mousemove",this.onMouseMove,!0),global.addEventListener("touchmove",this.onTouchMove,!0),[this.resizer,this.pane1,this.pane2].map(p.default.findDOMNode).forEach(function(b){b&&["mouseup","touchend"].forEach(function(c){b.addEventListener(c,a.onMouseUp,!0)})}))}},{key:"componentWillReceiveProps",value:function(a){this.setSize(a,this.state)}},{key:"componentWillUnmount",value:function(){var a=this;"undefined"!==typeof document&&
(global.removeEventListener("mouseup",this.onMouseUp,!0),global.removeEventListener("mousemove",this.onMouseMove,!0),global.removeEventListener("touchmove",this.onTouchMove,!0),[this.resizer,this.pane1,this.pane2].map(p.default.findDOMNode).forEach(function(b){b&&["mouseup","touchend"].forEach(function(c){b.removeEventListener(c,a.onMouseUp,!0)})}))}},{key:"onMouseDown",value:function(a){a=h({},a,{touches:[{clientX:a.clientX,clientY:a.clientY}]});this.onTouchStart(a)}},{key:"onTouchStart",value:function(a){var b=
this.props,c=b.onDragStarted,d=b.split;b.allowResize&&(m(document,global),a="vertical"===d?a.touches[0].clientX:a.touches[0].clientY,"function"===typeof c&&c(),this.setState({active:!0,position:a}))}},{key:"onMouseMove",value:function(a){var b=h({},a,{touches:[{clientX:a.clientX,clientY:a.clientY}]});this.onTouchMove(b,a)}},{key:"onTouchMove",value:function(a,b){var c=b||a,d=this.props;b=d.maxSize;var e=d.minSize,g=d.onChange,f=d.split,l=d.step,h=this.state,k=h.active;h=h.position;if(d.allowResize&&
k&&(m(document,global),c&&c.preventDefault&&c.preventDefault(),c&&c.stopPropagation&&c.stopPropagation(),c=(d="first"===this.props.primary)?this.pane1:this.pane2)){var n=p.default.findDOMNode(c);if(n.getBoundingClientRect){k=n.getBoundingClientRect().width;n=n.getBoundingClientRect().height;k="vertical"===f?k:n;a=h-("vertical"===f?a.touches[0].clientX:a.touches[0].clientY);if(l){if(Math.abs(a)<l)return;a=~~(a/l)*l}l=d?a:-a;d=b;void 0!==b&&0>=b&&(d=this.splitPane,d="vertical"===f?d.getBoundingClientRect().width+
b:d.getBoundingClientRect().height+b);f=k-l;f<e?f=e:void 0!==b&&f>d?f=d:this.setState({position:h-a,resized:!0});g&&g(f);this.setState({draggedSize:f});c.setState({size:f})}}}},{key:"onMouseUp",value:function(a){var b=this.props,c=b.onDragFinished,d=this.state,e=d.active;d=d.draggedSize;b.allowResize&&e&&(a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),"function"===typeof c&&c(d),this.setState({active:!1}))}},{key:"setSize",value:function(a,b){var c="first"===this.props.primary?
this.pane1:this.pane2;if(c){var d=void 0!==a.size?a.size:void 0!==a.defaultSize&&this.props.defaultSize!==a.defaultSize?a.defaultSize:b&&void 0!==b.draggedSize?b.draggedSize:a.defaultSize||a.minSize;c.setState({size:d});a.size!==b.draggedSize&&this.setState({draggedSize:d})}}},{key:"render",value:function(){var a=this,b=this.props,c=b.children,d=b.className,e=b.defaultSize,g=b.minSize,f=b.onResizerClick,l=b.onResizerDoubleClick,m=b.paneStyle,p=b.pane1Style,k=b.pane2Style,q=b.primary,t=b.prefixer,
v=b.resizerClassName,N=b.resizerStyle,M=b.size,G=b.split,O=b.allowResize?"":"disabled";v=v?v+" Resizer":v;b=h({},{display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden",MozUserSelect:"text",WebkitUserSelect:"text",msUserSelect:"text",userSelect:"text"},b.style||{});"vertical"===G?h(b,{flexDirection:"row",left:0,right:0}):h(b,{bottom:0,flexDirection:"column",minHeight:"100%",top:0,width:"100%"});d=["SplitPane",d,G,O];p=t.prefix(h({},m||{},p||{}));m=t.prefix(h({},m||
{},k||{}));return n.default.createElement("div",{className:d.join(" "),ref:function(b){a.splitPane=b},style:t.prefix(b)},n.default.createElement(r.default,{className:"Pane1",key:"pane1",ref:function(b){a.pane1=b},size:"first"===q?M||e||g:void 0,split:G,style:p},c[0]),n.default.createElement(u.default,{className:O,onClick:f,onDoubleClick:l,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,key:"resizer",ref:function(b){a.resizer=b},resizerClassName:v,split:G,style:N||{}}),n.default.createElement(r.default,
{className:"Pane2",key:"pane2",ref:function(b){a.pane2=b},size:"second"===q?M||e||g:void 0,split:G,style:m},c[1]))}}]);return b}(n.default.Component);a.propTypes={allowResize:l.default.bool,children:l.default.arrayOf(l.default.node).isRequired,className:l.default.string,primary:l.default.oneOf(["first","second"]),minSize:l.default.oneOfType([l.default.string,l.default.number]),maxSize:l.default.oneOfType([l.default.string,l.default.number]),defaultSize:l.default.oneOfType([l.default.string,l.default.number]),
size:l.default.oneOfType([l.default.string,l.default.number]),split:l.default.oneOf(["vertical","horizontal"]),onDragStarted:l.default.func,onDragFinished:l.default.func,onChange:l.default.func,onResizerClick:l.default.func,onResizerDoubleClick:l.default.func,prefixer:l.default.instanceOf(q.default).isRequired,style:g.default,resizerStyle:g.default,paneStyle:g.default,pane1Style:g.default,pane2Style:g.default,resizerClassName:l.default.string,step:l.default.number};a.defaultProps={allowResize:!0,
minSize:50,prefixer:new q.default,primary:"first",split:"vertical"};b.default=a;e.exports=b["default"]},function(e,b){e.exports=require("react-dom")},function(e,b,a){function f(a){return a&&a.__esModule?a:{default:a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var m=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=a(3),l=f(k);k=a(58);k=
f(k);var n=a(59);n=f(n);a=a(60);a=f(a);var q=function(a){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");a=(b.__proto__||Object.getPrototypeOf(b)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.state={size:a.props.size};return a}d(b,a);h(b,[{key:"render",value:function(){var a=this.props,b=a.children,d=a.prefixer,e=a.split,g=this.state.size,
f=["Pane",e,a.className];a=m({},a.style||{},{flex:1,position:"relative",outline:"none"});void 0!==g&&("vertical"===e?a.width=g:(a.height=g,a.display="flex"),a.flex="none");return l.default.createElement("div",{className:f.join(" "),style:d.prefix(a)},b)}}]);return b}(l.default.Component);q.propTypes={className:k.default.string.isRequired,children:k.default.node.isRequired,prefixer:k.default.instanceOf(n.default).isRequired,size:k.default.oneOfType([k.default.string,k.default.number]),split:k.default.oneOf(["vertical",
"horizontal"]),style:a.default};q.defaultProps={prefixer:new n.default};b.default=q;e.exports=b["default"]},function(e,b,a){function f(a){return a&&a.__esModule?a:{default:a}}function d(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,
"__esModule",{value:!0});var m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),h=a(3),k=f(h);h=a(58);h=f(h);var l=a(59);l=f(l);a=a(60);a=f(a);var n=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}d(b,a);m(b,[{key:"render",value:function(){var a=this.props,b=a.onClick,d=a.onDoubleClick,e=a.onMouseDown,f=a.onTouchStart,m=a.prefixer,l=a.style;return k.default.createElement("span",{className:[a.resizerClassName,a.split,a.className].join(" "),style:m.prefix(l)||{},onMouseDown:function(a){return e(a)},onTouchStart:function(a){a.preventDefault();
f(a)},onClick:function(a){b&&(a.preventDefault(),b(a))},onDoubleClick:function(a){d&&(a.preventDefault(),d(a))}})}}]);return b}(k.default.Component);n.propTypes={className:h.default.string.isRequired,onClick:h.default.func,onDoubleClick:h.default.func,onMouseDown:h.default.func.isRequired,onTouchStart:h.default.func.isRequired,prefixer:h.default.instanceOf(l.default).isRequired,split:h.default.oneOf(["vertical","horizontal"]),style:a.default,resizerClassName:h.default.string.isRequired};n.defaultProps=
{prefixer:new l.default,resizerClassName:"Resizer"};b.default=n;e.exports=b["default"]},function(e,b){e.exports={"investigation-all":"vVJ9X","investigation-split":"_2aPd5"}},function(e,b){e.exports=require("@graphistry/client-api-react")},function(e,b){e.exports={iframe:"_3RUyk"}},function(e,b,a){a.d(b,"a",function(){return k});a.d(b,"b",function(){return l});e=a(1);var f=a.n(e),d=a(38),m=a(43),h=a(29);e=a(27);a.n(e);b=a(164);a=a(80);var k=Object(e.container)({fragment:function(){return"{\n        id, name, status, datasetType, datasetName, eventTable, controls, modifiedOn, description, time, tags, url, layout, axes, edgeOpacity,\n        pivots: "+
d.a.fragments((0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).pivots)+"\n    }"},mapFragment:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{id:a.id,name:a.name,pivots:a.pivots,status:a.status,datasetName:a.datasetName,datasetType:a.datasetType,controls:a.controls,eventTable:a.eventTable,layout:a.layout,axes:a.axes,edgeOpacity:a.edgeOpacity,description:a.description,time:a.time,$falcor:arguments[2]}},dispatchers:{saveLayout:b.d,splicePivot:b.f,insertPivot:b.c,
searchPivot:b.e,dismissAlert:b.a,togglePivots:b.g,saveInvestigation:a.d,graphInvestigation:b.b}}),l=Object(e.container)({renderLoading:!1,fragment:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.investigations,d=a.activeInvestigation;return"{\n        activeScreen,\n        graphistryHost,\n        templates: "+m.a.fragments(a.templates)+",\n        investigations: "+h.a.fragments(b)+",\n        activeInvestigation: "+h.a.fragment(d)+"\n    }"},mapFragment:function(){var a=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return f()({user:a},a,{investigations:(a&&a.investigations||[]).filter(Boolean)})},dispatchers:{copyInvestigation:a.a,createInvestigation:a.b}})},function(e,b,a){a.d(b,"e",function(){return m});a.d(b,"f",function(){return h});a.d(b,"c",function(){return k});a.d(b,"b",function(){return l});a.d(b,"a",function(){return n});b.g=function(a){return{investigationId:a.investigationId,type:f,indices:a.indices,enabled:a.enabled}};b.d=function(a){return{type:d,
layoutType:a.layoutType}};var f="toggle-pivots",d="save-layout",m=function(a){return{investigationId:a.investigationId,pivotId:a.pivotId,index:a.index,type:"search-pivot"}},h=function(a){return{index:a.index,type:"splice-pivot"}},k=function(a){return{index:a.index,type:"insert-pivot"}},l=function(a){return{investigationId:a.investigationId,length:a.length,type:"graph-investigation"}},n=function(){return{type:"dismiss-alert"}}},function(e,b,a){(function(e,d){b.a=function(a){var b=a.investigations,
c=a.switchScreen,e=a.setInvestigationParams,f=a.selectHandler,m=a.selectInvestigation,A=a.copyInvestigation;a={mode:"checkbox",clickToSelect:!1,onSelect:f,onSelectAll:function(a,b){f(b,a)},bgColor:"#fee"};return d.createElement("div",{className:k.a["investigation-table"]},d.createElement(n.BootstrapTable,{data:(void 0===b?[]:b).filter(Boolean),selectRow:a,cellEdit:{mode:"click",blurToSave:!0,afterSaveCell:function(a,b){if(["name","description"].includes(b)){var c;e((c={},c[b]=a[b],c),a.id)}else q.error("Cannot edit column"+
b)}},striped:!1,hover:!0,pagination:!0,options:{defaultSortName:"modifiedOn",defaultSortOrder:"desc"}},p,d.createElement(n.TableHeaderColumn,{dataField:"name",dataSort:!0,width:"200px",dataFormat:function(a,b){return d.createElement("a",{href:"/pivot/investigation/"+b.id,onClick:function(a){a.metaKey?a.stopPropagation():(a.preventDefault(),m(b.id),c("investigation"))}},a)}},"Name"),g,d.createElement(n.TableHeaderColumn,{dataField:"modifiedOn",dataSort:!0,editable:!1,dataFormat:function(a){return(new Date(a)).toLocaleString()},
width:"180px",dataAlign:"center"},"Last Modified"),d.createElement(n.TableHeaderColumn,{dataField:"tags",dataFormat:function(){var a=arguments[1],b=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).map(function(a,b){return{id:b,text:a}});return d.createElement("div",null,d.createElement(l.a,{tags:b,investigationId:a.id,setInvestigationParams:e}))},width:"200px",editable:!1},"Tags"),d.createElement(n.TableHeaderColumn,{dataField:"id",dataFormat:function(a){return d.createElement("div",null,
d.createElement(h.a,{onClick:function(){return A(a)}},"Copy"))},width:"172px",editable:!1},"Actions")))};var f=a(14),h=a.n(f);f=a(28);var k=a.n(f),l=a(166),n=a(78);a.n(n);var q=a(0).b.createLogger(e),p=d.createElement(n.TableHeaderColumn,{dataField:"id",isKey:!0,hidden:!0,editable:!1}),g=d.createElement(n.TableHeaderColumn,{dataField:"description"},"Description")}).call(b,"src/shared/investigations/components/investigation-table.js",a(3))},function(e,b,a){(function(e){var d=a(1),f=a.n(d);d=a(13);
var h=a.n(d),k=a(4);a.n(k);var l=a(167);a.n(l);d=a(25);d=a.n(d);var n=a(26),q=a.n(n);d=d()(function(a){var b=q()(),c=b.handler;b=b.stream;var d=q()(),e=d.handler;d=d.stream;var l=q()(),m=l.handler;l=l.stream;var p=k.Observable.merge(b.debounceTime(1E3),d,l),n=function(a){return e({type:"push",tag:a})},x=function(a){return m({type:"splice",index:a})},z=function(a,b,d){return c({type:"drag",tag:a,index:b,newIndex:d})};return a.switchMap(function(a){var b=a.tags,c=void 0===b?[]:b,d=h()(a,["tags"]),e=
d.setInvestigationParams,g=d.investigationId;return p.map(function(a){var b=a.tag,d=a.type,f=a.index;a=a.newIndex;"push"===d?c.push({text:b,id:c.length+1}):"splice"===d?c.splice(f,1):"drag"===d&&(c.splice(f,1),c.splice(a,0,b));e({tags:c.map(function(a){return a.text})},g);return c}).startWith(c).map(function(a){return f()({},d,{tags:a,handleDrag:z,handleDelete:x,handleAddition:n})})})});b.a=d(function(a){var b=a.tags,c=a.autoFocus;return e.createElement(l.WithContext,{tags:void 0===b?[]:b,autofocus:void 0===
c?!1:c,handleDrag:a.handleDrag,handleDelete:a.handleDelete,handleAddition:a.handleAddition})})}).call(b,a(3))},function(e,b){e.exports=require("react-tag-input")},function(e,b,a){(function(e){b.a=function(a){var b,g=a.ActiveScreen,c=a.loading,f=a.currentUser,m=a.serverStatus,q=a.switchScreen;a=a.selectInvestigation;var v=f||{},w=v.activeScreen;w=void 0===w?"home":w;v=v.activeInvestigation;v=void 0===v?{}:v;return e.createElement("div",{className:h()((b={},b[n.a["show-busy-cursor"]]=c,b))},e.createElement(k.a,
{activeScreen:w,switchScreen:q,activeInvestigation:v,selectInvestigation:a}),m&&!m.ok&&e.createElement(l.a,{serverStatus:m}),e.createElement(d.a,{key:"nav",activeScreen:w,switchScreen:q},e.createElement(g,{data:f,switchScreen:q,selectInvestigation:a,key:w+"-screen-component"})))};var d=a(169),f=a(24),h=a.n(f),k=a(171),l=a(173);f=a(46);var n=a.n(f)}).call(b,a(3))},function(e,b,a){b.a=function(a){var b=a.children;return f.a.createElement("div",{className:""+m.a.wrapper},f.a.createElement(d.a,{activeScreen:a.activeScreen,
switchScreen:a.switchScreen}),f.a.createElement("div",{className:""+m.a["main-panel"]},b))};e=a(3);var f=a.n(e),d=a(170);e=a(46);var m=a.n(e)},function(e,b,a){function f(a){var b=a.switchScreen,c=a.screen,d=a.faIcon;return m.a.createElement("li",{className:a.activeScreen===c?"active":""},m.a.createElement(l.a,{placement:"right",overlay:m.a.createElement(n.a,{id:"sidebar-"+c},a.tip)},m.a.createElement("a",{href:"/pivot/"+c,onClick:function(a){a.metaKey?a.stopPropagation():(a.preventDefault(),b(c))}},
m.a.createElement("i",{className:"fa "+d}))))}b.a=function(a){var b,c=a.switchScreen;return m.a.createElement("div",{className:k()((b={sidebar:!0},b[h.a["left-nav"]]=!0,b)),"data-color":"blue",id:"left-nav"},m.a.createElement("div",{href:"/pivot/home",onClick:function(a){a.metaKey||(a.preventDefault(),c("home"))},className:h.a.logo},q),m.a.createElement("ul",{className:"nav "+h.a.nav},m.a.createElement(f,d()({},a,{tip:"Home",screen:"home",faIcon:"fa-folder-open"})),m.a.createElement(f,d()({},a,{tip:"Most recent investigation",
screen:"investigation",faIcon:"fa-eye"})),m.a.createElement(f,d()({},a,{tip:"Connectors",screen:"connectors",faIcon:"fa-plug"}))))};e=a(1);var d=a.n(e);e=a(3);var m=a.n(e);e=a(46);var h=a.n(e);e=a(24);var k=a.n(e);e=a(18);var l=a.n(e);e=a(17);var n=a.n(e),q=m.a.createElement("div",null,m.a.createElement("img",{src:"/pivot/img/logo.png"}))},function(e,b,a){(function(e){var d=a(5),f=a.n(d);d=a(7);var h=a.n(d);d=a(8);var k=a.n(d);d=a(3);d=a.n(d);var l=a(172),n=a.n(l),q=a(0).b.createLogger(e);e=function(a){function b(c){f()(this,
b);var d=h()(this,a.call(this,c));c=n()();c.listen(function(a,b){a=a.state;"POP"===b&&void 0!==a&&(q.debug({navState:a},"Back/Forward button pressed, jumping"),d._setServerState(a.activeScreen,a.activeInvestigation))});d.state={history:c};return d}k()(b,a);b.prototype._getPath=function(a,b){return"investigation"===a?void 0===b.id?void 0:"/pivot/"+a+"/"+b.id:"/pivot/"+(a||"home")};b.prototype._setServerState=function(a,b){var c=this.props,d=c.switchScreen;c=c.selectInvestigation;d(a);b.id&&c(b.id)};
b.prototype.render=function(){return null};b.prototype.componentWillMount=function(){var a=this.props,b=a.activeScreen;a=a.activeInvestigation;var d=this.state.history;this._setServerState(b,a);var e=this._getPath(b,a);d.push({pathname:e,state:{activeScreen:b,activeInvestigation:a}})};b.prototype.componentDidUpdate=function(){var a=this.state.history,b=this.props,d=b.activeScreen;b=b.activeInvestigation;var e=this._getPath(d,b);void 0!==e&&a.location.pathname!==e&&(q.debug("Pushing new path "+e),
a.push({pathname:e,state:{activeScreen:d,activeInvestigation:b}}))};return b}(d.a.Component);b.a=e}).call(b,"src/shared/main/components/url-history.js")},function(e,b){e.exports=require("history/createBrowserHistory")},function(e,b,a){(function(e){b.a=function(a){a=a.serverStatus;var b=a.title?e.createElement("h4",null,e.createElement("b",null,a.title)):null;return e.createElement(f.a,{bsStyle:"danger",className:k.a["server-status-alert"]},b,e.createElement("p",null,a.message),e.createElement(h.a,
{bsStyle:"danger",onClick:function(){return global.location.reload()}},"Reload page"))};var d=a(79),f=a.n(d);d=a(14);var h=a.n(d);d=a(46);var k=a.n(d)}).call(b,a(3))},function(e,b,a){(function(e,d){var f=a(1),h=a.n(f),k=a(175);f=a(28);var l=a.n(f),n=a(29);f=a(19);var q=a.n(f);f=a(14);var p=a.n(f);f=a(17);f=a.n(f);var g=a(41);g=a.n(g);var c=a(18),r=a.n(c),u=a(177);a.n(u);c=a(25);c=a.n(c);var t=a(26),v=a.n(t);c=c()(function(a){var b=v()(),c=b.handler,d=b.stream;b=v()();var g=b.handler,f=b.stream,l=
function(a,b){return c({type:"update",selected:b,ids:Array.isArray(a)?a.map(function(a){return a.id}):[a.id]})};return a.multicast(function(){return new u.Subject},function(a){return d.merge(f.mapTo({type:"delete"})).scan(function(a,b){a=a.selection;var c=b.ids,d=b.selected;return"delete"===b.type?{selection:[],ids:a}:d?{selection:a.concat(c)}:{selection:e.reject(a,function(a){return c.includes(a)})}},{selection:[]}).withLatestFrom(a,function(a,b){return[a.ids,b.user,b.deleteInvestigations]}).do(function(a){var b=
a[0],c=a[1];a=a[2];void 0!==b&&a(c.id,b)}).ignoreElements().merge(a.map(function(a){return h()({},a,{selectHandler:l,deleteHandler:g})}))})});var w=d.createElement(f.a,{id:"AddNewInvestigationTooltip"},"Add New Investigation"),A=d.createElement(g.a,{glyph:"plus"}),x=d.createElement(f.a,{id:"DeleteInvestigationsTooltip"},"Delete Selected Investigations"),z=d.createElement(g.a,{glyph:"trash"});b.a=c(function(a){var b=a.user,c=a.investigations,e=a.switchScreen,g=a.setInvestigationParams,f=a.copyInvestigation,
h=a.createInvestigation,m=a.selectInvestigation,t=a.selectHandler,u=a.deleteHandler;return void 0===b?null:d.createElement(q.a,{className:l.a["main-panel-panel"]},d.createElement(k.a,{user:b,numTemplates:a.numTemplates,investigations:c}),d.createElement(q.a,{header:"Open Investigations",className:l.a.panel},d.createElement("div",{className:l.a["investigations-buttons"]},d.createElement(r.a,{placement:"top",overlay:w},d.createElement(p.a,{onClick:function(){return h(b.id)},className:"btn-primary "+
l.a["add-new-investigation"]},A)),d.createElement(r.a,{placement:"top",overlay:x},d.createElement(p.a,{onClick:u,className:"btn-danger "+l.a["delete-investigations"]},z))),d.createElement(n.d,{switchScreen:e,selectHandler:t,investigations:c,copyInvestigation:f,selectInvestigation:m,setInvestigationParams:g})))})}).call(b,a(2),a(3))},function(e,b,a){(function(e){b.a=function(a){var b=a.user,d=a.investigations;d=void 0===d?[]:d;a=a.numTemplates;return e.createElement(l.a,null,e.createElement(k.a,{className:f.a["welcome-bar"]},
e.createElement(h.a,{md:4},e.createElement(n.a,null,e.createElement(p.a.Left,{align:"middle"},e.createElement(q.a,{width:84,height:84,src:"/pivot/img/abstract-user-flat-3.svg",className:f.a["user-icon"],circle:!0})),e.createElement(p.a.Body,null,e.createElement(p.a.Heading,{className:f.a["user-greeting-heading"]},"Greetings!"),e.createElement("span",{className:f.a["user-greeting-message"]},"Welcome, ",b.name,"!")))),e.createElement(h.a,{md:4},e.createElement(n.a,null,e.createElement("h2",{className:"text-center"},
d.length),g)),e.createElement(h.a,{md:4},e.createElement(n.a,null,e.createElement("h2",{className:"text-center"},a),c))))};var d=a(28),f=a.n(d);d=a(16);var h=a.n(d);d=a(32);var k=a.n(d);d=a(42);var l=a.n(d);d=a(19);var n=a.n(d);d=a(176);var q=a.n(d);d=a(77);var p=a.n(d),g=e.createElement("div",{className:"text-center"},"Ongoing Investigations"),c=e.createElement("div",{className:"text-center"},"Templates")}).call(b,a(3))},function(e,b){e.exports=require("react-bootstrap/lib/Image")},function(e,b){e.exports=
require("rxjs/Subject")},function(e,b,a){a.d(b,"a",function(){return q});a.d(b,"b",function(){return p});e=a(1);var f=a.n(e);e=a(27);a.n(e);b=a(179);var d=a(80),m=a(54),h=a(43),k=a(44),l=a(29),n=function(){var a=void 0,b="home";return function(c){c=c.activeScreen;b=c=void 0===c?b:c;return(a||(a={home:m.b,undefined:m.b,connectors:k.c,investigation:l.c}))[c]}}(),q=Object(e.container)({renderLoading:!0,fragment:function(){var a=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).currentUser;
a=void 0===a?{}:a;return"{\n            serverStatus,\n            currentUser: {\n                activeScreen, activeInvestigation: {\n                    id, name\n                },\n                ... "+n(a).fragment(a)+"\n            }\n        }"},mapFragment:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.currentUser;b=void 0===b?{}:b;return{serverStatus:a.serverStatus,currentUser:b,ActiveScreen:n(b)}},dispatchers:{switchScreen:b.a,selectInvestigation:d.e}}),
p=Object(e.container)({renderLoading:!1,fragment:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.investigations;return"{\n        id, name, activeScreen,\n        templates: "+h.a.fragments(a.templates)+",\n        investigations: "+l.a.fragments(b)+"\n    }"},mapFragment:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return f()({},a,{user:a,numTemplates:a.templates&&a.templates.length||0})},dispatchers:{copyInvestigation:d.a,createInvestigation:d.b,
deleteInvestigations:d.c,setInvestigationParams:d.f}})},function(e,b,a){b.a=function(a){return{type:f,screen:a}};var f="switch-screen"},function(e,b){e.exports=require("json-stable-stringify")},function(e,b){e.exports=require("redbox-react")},function(e,b){e.exports=require("react-dom/server")},function(e,b){e.exports=require("./client-assets.json")},function(e,b){e.exports=require("./favicon-assets.json")},function(e,b,a){b.b=function(a,b,d,e,q){a=a.map(function(a){return Object(f.ref)("investigationsById['"+
a.id+"']")});b=m.a.sortBy(b,"name").map(function(a){return Object(f.ref)("templatesById['"+a.id+"']")});d=m.a.sortBy(d,"name").map(function(a){return Object(f.ref)("connectorsById['"+a.id+"']")});return{name:"Administrator",id:"0",activeScreen:"home",activeInvestigation:a[0],investigations:a,connectors:d,templates:b,apiKey:e,vizService:""+q+"/graph/graph.html?play=12000&bg=%23eeeeee&info=false&logo=false",etlService:q+"/etl",graphistryHost:q}};b.a=function(){return{id:0<arguments.length&&void 0!==
arguments[0]?arguments[0]:Object(d.simpleflake)().toJSON(),title:"Pivots",investigationsById:{},pivotsById:{},connectorsById:{},templatesById:{},usersById:{},currentUser:Object(f.ref)("usersById['0']"),serverStatus:{ok:!0}}};var f=a(6);a.n(f);var d=a(23);a.n(d);e=a(2);var m=a.n(e)},function(e,b,a){(function(e){function d(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"search-splunk-plain",b=v[a].pivotParametersUI;b=p()(b).reduce(function(a,b){a[b[0]]=b[1].defaultValue;return a},{});
return{id:Object(g.simpleflake)().toJSON(),enabled:!0,pivotParameters:b,pivotTemplate:a}}function f(a){a=q()({},d(),a);a.pivotParameters=r.a.mapObject(a.pivotParameters,t.a);return q()({},a,{pivotTemplate:Object(u.ref)("templatesById['"+a.pivotTemplate+"']"),status:{ok:!0,searching:!1},resultCount:-1,resultSummary:{entities:[]}})}function h(a){var b=r.a.pick(a,r.a.keys(d()));b.pivotTemplate=a.pivotTemplate.value[1];b.pivotParameters=r.a.mapObject(b.pivotParameters,t.b);return b}b.b=f;b.c=h;b.a=function(a){var b=
JSON.parse(n()(h(a))),c=a.pivotTemplate.value[1];a=v[c];b.pivotParameters=p()(b.pivotParameters).filter(function(a){return a[0].startsWith(c)}).reduce(function(a,b){a[b[0]]=b[1];return a},{});b.pivotRefs=l()(a.pivotParametersUI).filter(function(a){return"pivotCombo"===a.inputType}).map(function(a){return a.id});b=q()({},b,{id:Object(g.simpleflake)().toJSON()});return f(b)};var k=a(10),l=a.n(k);k=a(12);var n=a.n(k);k=a(1);var q=a.n(k);k=a(61);var p=a.n(k),g=a(23);a.n(g);k=a(62);var c=a(2),r=a.n(c),
u=a(6);a.n(u);c=a(0);var t=a(67);c.b.createLogger(e);var v=Object(k.a)()}).call(b,"src/shared/models/pivots.js")},function(e,b,a){function f(a){var b=a;"string"===typeof a&&(b=parseInt(a.replace("#","0x"),16));return(b&255)<<16|(b>>8&255)<<8|b>>16&255}e=a(11);var d=a.n(e);e=a(2);var m=a(188);a(81);m.PairedRepeat={0:e.flatten(e.times(1E4,function(){return m.Paired[12]}))};var h={},k={},l=0;"Paired Blues BrBG BuGn BuPu Dark2 GnBu Greens Greys OrRd Oranges PRGn Accent Pastel1 Pastel2 PiYG PuBu PuBuGn PuOr PuRd Purples RdBu RdGy RdPu RdYlBu RdYlGn Reds Set1 Set2 Set3 Spectral YlGn YlGnBu YlOrBr YlOrRd PairedRepeat".split(" ").forEach(function(a){h[a]=
{};k[a]={};var b=d()(m[a]);b.sort(function(a,b){return a-b});b.reverse();b.forEach(function(b){var d=1E3*l;h[a][b]=m[a][b].map(f);h[a][b].forEach(function(a,b){});k[a][b]={offset:d,hexes:m[a][b]};l++})})},function(e,b){e.exports=require("colorbrewer")},function(e,b,a){(function(e){a.d(b,"a",function(){return v});var d=a(12),f=a.n(d);d=a(5);var h=a.n(d);d=a(82);d=a.n(d);var k=a(83);k=a.n(k);var l=a(37),n=a.n(l),q=a(4);a.n(q);var p=a(33),g=a(0).b.createLogger(e),c=q.Observable.bindNodeCallback(k.a),
r=q.Observable.bindNodeCallback(d.a.readFile),u=q.Observable.bindNodeCallback(d.a.writeFile),t=q.Observable.bindNodeCallback(d.a.rename),v=function(){function a(b){var d=this,e=b.loadApp,g=b.pathPrefix,f=b.entityName,l=b.createModel,k=b.serializeModel;b=b.cache;h()(this,a);this.loadApp=e;this.pathPrefix=g;this.entityName=f;this.createModel=l;this.serializeModel=k;this.entities={};this.cacheService=new p.a({cache:b,loadApp:e,createModel:l,resultName:f,loadById:function(a){return d.entities[a]||(d.entities[a]=
c(n.a.resolve(g,a+".json")).mergeAll().take(1).single().catch(function(){return d.entities[a]=void 0,q.Observable.empty()}).mergeMap(function(a){return r(a)}).map(function(a){return JSON.parse(a)}).multicast(new q.ReplaySubject(1)).refCount())}})}a.prototype._getPath=function(a){return n.a.resolve(this.pathPrefix,a.id+".json")};a.prototype.loadById=function(a){var b=this;return this.cacheService.loadByIds(a).do(function(a){g.debug("Loaded "+b.entityName+" "+a[b.entityName].id)})};a.prototype.unloadById=
function(a){var b=this;return this.cacheService.unloadByIds(a).do(function(a){g.debug("Unloaded "+b.entityName+" "+a[b.entityName].id)})};a.prototype.persistById=function(a){var b=this;return this.loadById(a).mergeMap(function(a){var c=a[b.entityName],d=f()(b.serializeModel(c),null,4);return u(b._getPath(c),d).do(function(){return b.cacheService.evictFromCache(c.id)}).do(function(){return b.entities[c.id]=void 0}).map(function(){return a})}).do(function(a){g.info("Persisted "+b.entityName+" "+a[b.entityName].id)})};
a.prototype.unlinkById=function(a){var b=this;return this.loadById(a).mergeMap(function(a){var c=b._getPath(a[b.entityName]);return t(c,c+".deleted").catch(function(a){return"ENOENT"===a.code?q.Observable.of(null):q.Observable.throw(a)}).map(function(){return a})}).do(function(a){g.info("Unlinked "+b.entityName+" "+a[b.entityName].id)})};return a}()}).call(b,"src/shared/services/support/simpleFileSystemStore.js")},function(e,b,a){a.d(b,"a",function(){return m});e=a(5);var f=a.n(e),d=a(4);a.n(d);var m=
function(){function a(b){var d=b.loadApp,e=b.resultName,h=b.loadById,m=b.createModel;b=b.cache;f()(this,a);this.loadApp=d;this.resultName=e;this.loadById=h;this.createModel=m;this.cache=b}a.prototype.lookupId=function(a){if(a in this.cache)return this.cache[a];var b=this.loadById(a,this.loadApp).multicast(new d.ReplaySubject(1)).refCount();return this.cache[a]=b};a.prototype.evictFromCache=function(a){delete this.cache[a]};a.prototype.unloadByIds=function(a){var b=this,e=this.resultName+"sById";return this.loadApp().mergeMap(function(f){return d.Observable.from(a).switchMap(function(a){b.evictFromCache(a);
if(a in f[e]){var g=f[e][a];delete f[e][a];return d.Observable.of(g)}return d.Observable.empty()})},function(a,d){var e;return e={app:a},e[b.resultName]=d,e})};a.prototype.loadByIds=function(a){var b=this,e=this.resultName+"sById";return this.loadApp().mergeMap(function(f){return d.Observable.from(a).flatMap(function(a){return f[e]&&f[e][a]?d.Observable.from([f[e][a]]):b.lookupId(a).map(b.createModel).do(function(b){return f[e][a]=b})})},function(a,d){var e;return e={app:a},e[b.resultName]=d,e})};
return a}()},function(e,b,a){(function(e){a.d(b,"a",function(){return p});var d=a(192),f=a(218),h=a(226),k=a(228),l=a(92),n=a(232),q=a(0).b.createLogger(e),p=[].concat(d.a||[],f.a||[],h.a||[],k.a||[],l.b||[],n.a||[]).filter(function(a){if(!a)throw q.error("NULL PIVOT"),Error("Null pivot");["id","name","tags","searchAndShape","parameters"].forEach(function(b){if(!a[b])throw q.error("Pivot missing field",b,a),Error({msg:"Pivot missing field",fld:b,pivot:a});});return!0})}).call(b,"src/shared/services/templates/index.js")},
function(e,b,a){a.d(b,"a",function(){return f});e=a(193);b=a(216);a=a(217);var f=[].concat(e.a||[],b.a||[],a.a||[])},function(e,b,a){a.d(b,"a",function(){return d});e=a(194);b=a(213);var f=a(214);a.n(f);a=a(215);var d=[].concat(e.a||[],b.a||[],f.pivots||[],a.a||[])},function(e,b,a){(function(e){function d(a){return function(b){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).time,g="[{{"+b.ref.value+"}}] -["+b.fields.value.join(", ")+
"]-> ["+n[a]+"]";return{searchQuery:"search "+this.expandTemplate(g,d,!1)+" "+this.constructFieldString()+' \n    | rename "Fire Eye URL" -> dest_hostname \n    | rename "Fire Eye MD5" -> fileHash \n    | rename "Internal IPs" -> src_ip\n    | rename "External IPs" -> dest_ip\n    | rename "Message" -> msg\n '+(c[a]||""),searchParams:this.dayRangeToSplunkParams((b.time||{}).value,e)}}}function f(a,b,c){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:p;return new k.a({id:a,name:c,tags:["Demo"],
parameters:[{name:"ref",inputType:"pivotCombo",label:"Any field in:"},{name:"fields",inputType:"multi",label:"Expand on:",options:p.map(function(a){return{id:a,name:a}})},{name:"time",label:"Time",inputType:"daterange",default:{from:null,to:null}}],connections:e,attributesBlacklist:q,encodings:l.c,toSplunk:d(b)})}a.d(b,"a",function(){return v});var h=a(0),k=a(34),l=a(30);h.b.createLogger(e);var n={FIREEYE:'"Alert Category"="Fire Eye" index="alert_graph_demo"',BLUECOAT:'"Alert Category"="Blue Coat Proxy" index="alert_graph_demo"',
FIREWALL:'"Alert Category"="Firewall" index="alert_graph_demo"',IDS:'"Alert Category"="IDS/IPS" index="alert_graph_demo"',ALL:"index=alert_graph_demo"};e=[];for(h=0;30>h;h++)e.push("field"+h);var q=l.a.concat(e),p="EventID fileHash dest_hostname src_ip dst_ip dest_ip msg".split(" "),g={FIREEYE:'| eval dest_ip="66.96.146.129"'},c={FIREEYE:'| eval dest_ip="66.96.146.129"'};e=new k.a({id:"search-splunk-fireeye-botnet-demo",name:"Search FireEye",tags:["Demo"],parameters:[{name:"event",inputType:"text",
label:"EventId:",placeholder:"BRO8ZA4A"},{name:"time",label:"Time",inputType:"daterange",default:{from:null,to:null}}],connections:p,attributesBlacklist:q,encodings:l.c,toSplunk:function(a){return function(b,c){var d=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).time;return{searchQuery:"search EventID="+b.event+" "+n[a]+" "+this.constructFieldString()+' \n    | rename "Fire Eye URL" -> dest_hostname \n    | rename "Fire Eye MD5" -> fileHash \n    | rename "Internal IPs" -> src_ip\n    | rename "External IPs" -> dest_ip\n    | rename "Message" -> msg\n '+
(g[a]||""),searchParams:this.dayRangeToSplunkParams((b.time||{}).value,d)}}}("FIREEYE")});h=f("expand-fireeye-botnet-demo","FIREEYE","Expand with FireEye");var r=f("expand-bluecoat-botnet-demo","BLUECOAT","Expand with Blue Coat",["dest_hostname","dest_ip"]),u=f("expand-firewall-botnet-demo","FIREWALL","Expand with Firewall",["dest_ip","src_ip"]),t=f("expand-ids-botnet-demo","IDS","Expand with IDS/IPS",["src_ip","msg"]),v=[e,h,r,u,t]}).call(b,"src/shared/services/templates/splunk/demos/alertDemo.js")},
function(e,b,a){(function(e){function d(a,b){var c=a.fields,d=a.columns;if(!d.length||!d[0].length)return[];var e=[];a=d[0].length;for(var g=function(a){var g={searchLink:b};c.forEach(function(b,c){c=d[c][a];null!==c&&(g[b]=c)});e.push(g)},f=0;f<a;f++)g(f);return e}a.d(b,"a",function(){return v});var f=a(1),h=a.n(f);f=a(5);var k=a.n(f);f=a(7);var l=a.n(f);f=a(8);var n=a.n(f),q=a(4);a.n(q);f=a(2);var p=a.n(f);f=a(196);var g=a.n(f);f=a(197);var c=a.n(f);f=a(9);var r=a.n(f),u=a(0);f=a(47);var t=global.__graphistry_convict_conf__;
f=function(a){function b(c){k()(this,b);var d=l()(this,a.call(this,c));d.host=c.host;d.suffix=c.suffix;d.protocol=c.scheme;d.uiPort=c.uiPort;d.service=new g.a.Service({host:c.host,username:c.username,password:c.password,scheme:c.scheme,port:c.port});c={splunkHostName:c.host,splunkUser:c.username};d.log=u.b.createLogger(e).child(c);d.slogin=q.Observable.bindNodeCallback(d.service.login.bind(d.service));d.getJob=q.Observable.bindNodeCallback(d.service.getJob.bind(d.service));d.runSearch=q.Observable.bindNodeCallback(d.service.search.bind(d.service));
return d}n()(b,a);b.prototype.healthCheck=function(){return this.slogin().do(this.log.info("Health checks passed for splunk connnector")).map(function(){return"Health checks passed"}).catch(function(a){var b=a.error;a=a.status;return b?q.Observable.throw(new r.a({name:"ConnectionError",cause:b,info:{splunkAddress:b.address,splunkPort:b.port,code:b.code}},'Failed to connect to splunk instance at "%s:%d"',b.address,b.port)):401===a?q.Observable.throw(new r.a({name:"UnauthorizedSplunkLogin"},"Splunk Credentials are invalid")):
q.Observable.throw(new r.a({name:"UnhandledStatus"},"Unknown response"))})};b.prototype.extractSplunkErrorMsg=function(a){if(a.error&&a.error.message)return a.error.message;a=(a.data||{}).messages||[];return a!==[]?p.a.pluck(a,"text").join("\n"):"Could not parse splunkErr object"};b.prototype.getOrCreateJob=function(a,b){var c=this;this.log.debug(b,'Tentatively fetching cached results for job: "%s"',a);return this.getJob(a).catch(function(a){return 404===a.response.statusCode?(a=c.extractSplunkErrorMsg(a),
c.log.debug({splunkMsgs:a},"No job was found, creating new search job"),c.runSearch(b.query,b.searchParams).switchMap(function(a){return q.Observable.bindNodeCallback(a.fetch.bind(a))()})):q.Observable.throw(a)}).catch(function(a){return q.Observable.throw(new r.a({name:"SplunkSearchError",info:b},"Splunk returned an error: "+c.extractSplunkErrorMsg(a)))})};b.prototype.retrieveJobResults=function(a,b){var c=this,d=a.properties();this.log.info({sid:a.sid,eventCount:d.eventCount,resultCount:d.resultCount,
runDuration:d.runDuration,messages:d.messages,ttl:d.ttl},"Search job properties");this.log.info(d,"All job properties");a=q.Observable.bindNodeCallback(a.results.bind(a));var e=(d.messages||[]).find(function(a){return a.text.startsWith("Search auto-finalized after time limit")}),g=Date.now();return a({count:d.resultCount,output_mode:"json_cols"}).do(function(){c.log.info("Splunk result download time",Date.now()-g,"ms")}).map(function(a){return{results:a[0],job:a[1],props:h()({},d,{isPartial:void 0!==
e})}}).catch(function(a){return q.Observable.throw(new r.a({name:"SplunkReadResultError",info:b},"Splunk returned an error: "+c.extractSplunkErrorMsg(a)))})};b.prototype.search=function(a){var e=this,g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f="graphistry_"+(0<t.get("splunk.jobCacheTimeout")?c.a.MD5({q:a,p:g}):Date.now());g=h()({},b.searchParamDefaults,g,{id:f});var l={query:a,searchParams:g},k='<a href="'+this.protocol+"://"+this.host+":"+this.uiPort+this.suffix+"/app/search/search?sid="+
f+'" target="_blank">Splunk '+f+"</a>";return this.getOrCreateJob(f,l).switchMap(function(a){return e.retrieveJobResults(a,l)}).map(function(a){var b=a.job,c=a.props;return{resultCount:c.resultCount,isPartial:c.isPartial,events:d(a.results,k),searchId:b.sid}})};return b}(f.a);f.searchParamDefaults={timeout:Math.max(0,t.get("splunk.jobCacheTimeout")),exec_mode:"blocking",earliest_time:"-7d",max_time:t.get("splunk.searchMaxTime")};var v=new f({id:"splunk-connector",name:"Splunk",host:t.get("splunk.host"),
username:t.get("splunk.user"),password:t.get("splunk.key"),scheme:t.get("splunk.scheme"),port:t.get("splunk.port"),uiPort:t.get("splunk.uiPort"),suffix:t.get("splunk.suffix")})}).call(b,"src/shared/services/connectors/splunk.js")},function(e,b){e.exports=require("splunk-sdk")},function(e,b){e.exports=require("object-hash")},function(e,b,a){(function(e){function d(a){var b=[];a.hits.hits.forEach(function(a){b.push(a._source)});return b}a.d(b,"a",function(){return r});var f=a(5),h=a.n(f);f=a(7);var k=
a.n(f);f=a(8);var l=a.n(f),n=a(199);a.n(n);var q=a(4);a.n(q);f=a(9);var p=a.n(f),g=a(0),c=a(47);g.b.createLogger(e);f=global.__graphistry_convict_conf__;c=function(a){function b(c){h()(this,b);var d=k()(this,a.call(this,c));d.client=new n.Client({host:c.host+":"+c.port,log:c.logLevel});d.log=g.b.createLogger(e).child(d.metadata);return d}l()(b,a);b.prototype.search=function(a,b){var c=this;this.log.info("Running Elasticsearch query",a);return q.Observable.of(1).switchMap(function(){return q.Observable.fromPromise(c.client.search(a)).timeout(3E4)}).map(function(a){a=
d(a);console.log(a);return{resultCount:a.length,events:a,isPartial:!1}})};b.prototype.healthCheck=function(){var a=this;return q.Observable.of(1).switchMap(function(){return q.Observable.fromPromise(a.client.ping({requestTimeout:5E3})).timeout(5E3)}).map(function(){return"Health checks passed"}).catch(function(b){return q.Observable.throw(new p.a({name:"ConnectionError",cause:b instanceof Error?b:Error(b),info:a.metadata}))}).take(1)};return b}(c.a);c.searchParamDefaults={};var r=new c({id:"elasticsearch-connector",
name:"Elasticsearch",host:f.get("elasticsearch.host"),port:f.get("elasticsearch.port")})}).call(b,"src/shared/services/connectors/elasticsearch.js")},function(e,b){e.exports=require("elasticsearch")},function(e,b,a){(function(e){a.d(b,"a",function(){return g});var d=a(5),f=a.n(d);d=a(7);var h=a.n(d);d=a(8);var k=a.n(d),l=a(4);a.n(l);d=a(201);var n=a.n(d),q=a(202);a.n(q);d=a(9);var p=a.n(d);d=a(47);a(0).b.createLogger(e);e=function(a){function b(c){f()(this,b);return h()(this,a.call(this,c))}k()(b,
a);b.prototype.healthCheck=function(){return l.Observable.bindNodeCallback(n.a.lookup)(b.testIP).map(function(a){return Object(q.parseWhoIsData)(a).filter(function(a){return"Organization"===a.attribute})}).map(function(a){return"WHOIS resolved "+b.testIP+"'s organization to: "+a[0].value}).catch(function(a){return l.Observable.throw(new p.a({cause:a,name:"Whois lookup failed"},"Could not connect to whois"))})};return b}(d.a);e.testIP="64.233.160.0";var g=new e({id:"whois-connection",name:"WHOIS"})}).call(b,
"src/shared/services/connectors/whois.js")},function(e,b){e.exports=require("node-whois")},function(e,b){e.exports=require("parse-whois")},function(e,b,a){(function(e){function d(a){a=a.filter(function(a){return a.refType&&0===a.edgeType.indexOf("EventID->")});a=q()(e.groupBy(a,function(a){return n()([a.source,a.refType])})).map(function(a){return e.uniq(a,"destination")}).filter(function(a){return 1<a.length}).map(function(a){return a.map(function(b,d){return a.filter(function(a,b){return b>d}).map(function(a){return{edge:"ref:"+
b.refType+":"+b.destination+":"+a.destination,source:b.destination,destination:a.destination,edgeType:"ref:"+b.refType,refType:b.refType,edgeTitle:b.refType+":"+b.destination+"->"+a.destination}})})});return[].concat.apply([],[].concat.apply([],a))}function f(a){var b=a.edges,c={};a.nodes.forEach(function(a){"EventID"!==a.type&&(c[a.node]=a)});b.filter(function(a){return a.refType}).forEach(function(a){var b=a.refType;a=c[a.destination];a.refTypes||(a.refTypes=[]);-1===a.refTypes.indexOf(b)&&a.refTypes.push(b)})}
b.a=function(a){var b={},c=[];a.forEach(function(a){if(a.refType&&a.edgeType&&0===a.edgeType.indexOf("EventID->")){var d=a.source+":"+a.refType+":"+a.destination,e=b[d];e?e.cols.push(a.col):(a=l()({},a,{edge:d,cols:[a.col]}),delete a.col,b[d]=a,c.push(a))}else c.push(a)});return c};b.b=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a.nodes,c=a.edges;c=void 0===c?[]:c;var e=a.encodings;f({nodes:void 0===b?[]:b,edges:c});a=d(c);e&&e.edge&&a.forEach(function(a){return k()(e.edge).forEach(function(b){e.edge[b](a)})});
return a};var h=a(11),k=a.n(h);h=a(1);var l=a.n(h);h=a(12);var n=a.n(h);h=a(10);var q=a.n(h)}).call(b,a(2))},function(e,b){e.exports=require("babel-runtime/core-js/math/log10")},function(e,b,a){b.a=function(a,b,e){var d={},l=[];a.forEach(function(a){var h=a[b];if(void 0!==h){var k=d[h];if(k){h=f();if(e){var g=void 0;for(c in e)if(c in k||c in a)g=g||{},g[c]=e[c](k[c],a[c]);var c=g}else c=void 0;h(k,a,c)}else a=f()({},a),d[h]=a,l.push(a)}});return l};e=a(65);var f=a.n(e)},function(e,b,a){Object.defineProperty(b,
"__esModule",{value:!0});a.d(b,"defaultFields",function(){return f});a.d(b,"desiredEntities",function(){return d});a.d(b,"desiredAttributes",function(){return m});a.d(b,"colTypes",function(){return h});a.d(b,"refTypes",function(){return k});a.d(b,"product",function(){return l});a.d(b,"productIdentifier",function(){return n});a.d(b,"fieldsBlacklist",function(){return q});a.d(b,"attributesBlacklist",function(){return p});a.d(b,"entitiesBlacklist",function(){return g});e=a(2);a=a.n(e);var f="act app_risk cid devicePayloadId dmac dpt dvc_ip dvchost ext_ref externalId fileHash filePath fileType file_hash fname fsize id infURL objURL occurred product_version proto requestClientApplication requestMethod rt shost smac sproc spt signature transport cef_dproduct cef_dvendor cef_dversion cef_name cef_severity cef_sid".split(" ").concat(a.a.range(0,
10).map(function(a){return"cn"+a}),a.a.range(0,10).map(function(a){return"cn"+a+"Label"}),a.a.range(0,10).map(function(a){return"cs"+a}),a.a.range(0,10).map(function(a){return"cs"+a+"Label"}),a.a.range(0,150).map(function(a){return"field"+a}),a.a.range(0,10).map(function(a){return"flexString"+a}),a.a.range(0,10).map(function(a){return"flexString"+a+"Label"}),a.a.range(0,10).map(function(a){return"future_use"+a})),d="dmac fileHash filePath file_hash fname objURL smac sproc signature".split(" "),m=
"act app_risk cid devicePayloadId dmac dpt dvc_ip dvchost ext_ref externalId fileHash filePath fileType file_hash fname fsize id infURL objURL occurred product_version proto requestClientApplication requestMethod rt shost smac sproc spt signature transport".split(" "),h={devicePayloadId:"id",dmac:"mac",dvc_ip:"ip",ext_ref:"url",externalId:"id",fileHash:"hash",filePath:"url",file_hash:"hash",fname:"file",id:"id",infURL:"url",objURL:"url",smac:"mac",sproc:"file",signature:"alert"},k={devicePayloadId:"?",
dmac:"dst",dvc_ip:"device",ext_ref:"?",externalId:"?",fileHash:"payload",filePath:"payload",file_hash:"payload",fname:"payload",id:"?",infURL:"?",objURL:"?",smac:"src",sproc:"src",signature:"payload"},l="FireEye Web MPS",n={product:"Web MPS",vendor:"FireEye"},q=[],p=a.a.range(0,150).map(function(a){return"field"+a}),g=f.filter(function(a){return-1===d.indexOf(a)})},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a.d(b,"defaultFields",function(){return f});a.d(b,"desiredEntities",
function(){return d});a.d(b,"desiredAttributes",function(){return m});a.d(b,"colTypes",function(){return h});a.d(b,"refTypes",function(){return k});a.d(b,"product",function(){return l});a.d(b,"productIdentifier",function(){return n});a.d(b,"fieldsBlacklist",function(){return q});a.d(b,"attributesBlacklist",function(){return p});a.d(b,"entitiesBlacklist",function(){return g});e=a(2);a=a.n(e);var f="agentId agentVersion categoryBehavior categoryDeviceType categoryDeviceGroup categoryObject categoryOutcome categorySignificance categoryTechnique categoryTupleDescription deviceCustomDate1 deviceCustomDate1Label ioc_name start".split(" ").concat(a.a.range(0,
10).map(function(a){return"cn"+a}),a.a.range(0,10).map(function(a){return"cn"+a+"Label"}),a.a.range(0,10).map(function(a){return"cs"+a}),a.a.range(0,10).map(function(a){return"cs"+a+"Label"}),a.a.range(0,150).map(function(a){return"field"+a}),a.a.range(0,10).map(function(a){return"flexString"+a}),a.a.range(0,10).map(function(a){return"flexString"+a+"Label"}),a.a.range(0,10).map(function(a){return"future_use"+a})),d=["ioc_name"],m="categoryBehavior categoryDeviceType categoryObject categoryOutcome categorySignificance categoryTechnique categoryTupleDescription deviceCustomDate1 deviceCustomDate1Label ioc_name start".split(" "),
h={ioc_name:"alert"},k={ioc_name:"payload"},l="FireEye HX",n={product:"HX",vendor:"FireEye"},q=[],p=a.a.range(0,150).map(function(a){return"field"+a}),g=f.filter(function(a){return-1===d.indexOf(a)})},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a.d(b,"defaultFields",function(){return f});a.d(b,"desiredEntities",function(){return d});a.d(b,"desiredAttributes",function(){return m});a.d(b,"colTypes",function(){return h});a.d(b,"refTypes",function(){return k});a.d(b,"product",function(){return l});
a.d(b,"productIdentifier",function(){return n});a.d(b,"fieldsBlacklist",function(){return q});a.d(b,"attributesBlacklist",function(){return p});a.d(b,"entitiesBlacklist",function(){return g});e=a(2);a=a.n(e);var f="X_OpenDNS_Session action action_flags app app_able_to_transfer_file app_category app_default_ports app_evasive app_excessive_bandwidth app_has_known_vulnerability app_is_saas app_is_sanctioned_saas app_pervasive_use app_prone_to_misuse app_risk app_subcategory app_technology app_tunnels_other_application app_used_by_malware application cid client_ip client_location content_type dest_translated_port direction flags generated_time ids_type log_forwarding_profile log_subtype major_content_type misc pcap_id receive_time repeat_count report_id rule sequence_number server_location session_id serial_number signature_id src_translated_ip src_translated_port tag__eventtype threat_name threat_id type url url_index user vendor_action vendor_product vendor_protocol virtual_system vsys".split(" ").concat(a.a.range(0,
10).map(function(a){return"devicegroup_level"+a})),d=["client_ip","rule","threat_name","user"],m=f,h={client_ip:"ip",pcap_id:"id",rule:"alert",session_id:"id",signature_id:"id",threat_name:"alert",url:"url",user:"user"},k={pcap_id:"payload",rule:"payload",session_id:"session",signature_id:"payload",threat_name:"payload",url:"payload"},l="PAN",n={product:"Firewall",vendor:"Palo Alto Networks"},q=[],p=[],g=f.filter(function(a){return-1===d.indexOf(a)})},function(e,b,a){Object.defineProperty(b,"__esModule",
{value:!0});a.d(b,"defaultFields",function(){return f});a.d(b,"desiredEntities",function(){return d});a.d(b,"desiredAttributes",function(){return m});a.d(b,"colTypes",function(){return h});a.d(b,"refTypes",function(){return k});a.d(b,"product",function(){return l});a.d(b,"productIdentifier",function(){return n});a.d(b,"fieldsBlacklist",function(){return q});a.d(b,"attributesBlacklist",function(){return p});a.d(b,"entitiesBlacklist",function(){return g});var f="Client_Address Client_IP Client_Port ComputerName EventCode Keywords LogName Logon_Account Logon_GUID Logon_ID Logon_Process Message OpCode Process_ID Process_Name RecordNumber SourceName Source_Address Source_Network_Address Source_Port Source_Workstation Target_Server_Name TaskCategory Type Url_Absolute_Path User User_Agent User_ID Workstation_Name _raw _time action app body dest event_id name privilege privilege_id product session_id severity signature signature_id source sourcetype src src_ip src_user status subject user vendor vendor_privilege".split(" "),
d="Client_IP Source_Address Source_Network_Address Source_Workstation Target_Server_Name Url_Absolute_Path User Workstation_Name name subject".split(" "),m=f,h={Client_IP:"ip",Client_Port:"port",ComputerName:"host",EventCode:"id",Logon_Account:"user",Logon_GUID:"id",Logon_ID:"id",Logon_Process:"process",Message:"event",Process_ID:"id",Process_Name:"process",RecordNumber:"id",SourceName:"log",Source_Address:"ip",Source_Network_Address:"ip",Source_Port:"port",Source_Workstation:"user",Target_Server_Name:"host",
Url_Absolute_Path:"url",User:"agent",User_Agent:"agent",User_ID:"user",Workstation_Name:"host",_raw:"event",body:"event",event_id:"id",name:"alert",product:"log",session_id:"id",signature_id:"id",source:"log",subject:"alert",vendor:"log"},k={},l="Windows",n={product:"Windows",vendor:"Microsoft"},q=[],p=[],g=f.filter(function(a){return-1===d.indexOf(a)})},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a.d(b,"defaultFields",function(){return f});a.d(b,"desiredEntities",function(){return d});
a.d(b,"desiredAttributes",function(){return m});a.d(b,"colTypes",function(){return h});a.d(b,"refTypes",function(){return k});a.d(b,"product",function(){return l});a.d(b,"productIdentifier",function(){return n});a.d(b,"fieldsBlacklist",function(){return q});a.d(b,"attributesBlacklist",function(){return p});a.d(b,"entitiesBlacklist",function(){return g});var f="Auto_Run Cylance_Score Detected_By Device_Name Drive_Type Event_Name Event_Type File_Name File_Type Found_Date IP_Address Is_Malware Is_Running Is_Unique_To_Cylance MD5 Path Role SHA256 Status Threat_Class Threat_Classification Threat_Subclass Zone_Names host".split(" "),
d="Device_Name Event_Name File_Name IP_Address MD5 Threat_Classification Threat_Subclass".split(" "),m=f,h={Device_Name:"url",Event_Name:"alert",File_Name:"file",IP_Address:"ip",MD5:"hash",Path:"url",SHA256:"hash",Status:"alert",Threat_Classification:"alert",Threat_Subclass:"alert"},k={Device_Name:"src",Event_Name:"payload",File_Name:"payload",IP_Address:"src",MD5:"payload",Path:"payload",Status:"payload",Threat_Classification:"payload",Threat_Subclass:"payload"},l="Cylance",n={product:"Protect",
vendor:"Cylance"},q=[],p=[],g=f.filter(function(a){return-1===d.indexOf(a)})},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a.d(b,"defaultFields",function(){return f});a.d(b,"desiredAttributes",function(){return d});a.d(b,"desiredEntities",function(){return m});a.d(b,"colTypes",function(){return h});a.d(b,"refTypes",function(){return k});a.d(b,"fieldsBlacklist",function(){return l});a.d(b,"attributesBlacklist",function(){return n});a.d(b,"entitiesBlacklist",function(){return q});
a.d(b,"product",function(){return p});a.d(b,"productIdentifier",function(){return g});var f="EventID _cd _indextime _raw _time _bkt _indextime _kv _serial _si _sourcetype _title category date_hour date_mday date_minute date_month date_second date_wday date_year date_zone dest dest_class dest_hostname dest_interface dest_ip dest_location dest_mac dest_port dest_zone domain dst dhost dmac dpt dntdom dvc dvc_host eventtype extracted_eventtype extracted_host extracted_index extracted_linecount extracted_source extracted_sourcetype extracted_splunk_server file filename host index linecount misc msg name product protocol punct raw source sequence_number search_name severity signature source sourcetype splunk_server splunk_server_group smac spt src src_class src_interface src_host src_ip src_location src_mac src_port src_user src_zone time timestamp timeendpos timestartpos unix_category unix_group vendor".split(" "),
d="EventID category dest dest_class dest_hostname dest_interface dest_ip dest_location dest_mac dest_port dest_zone domain dhost dmac dpt dntdom dst dvc dvc_host eventtype extracted_eventtype extracted_host extracted_index extracted_linecount extracted_source extracted_sourcetype extracted_splunk_server file filename host index linecount misc msg name product protocol punct raw search_name sequence_number severity signature source sourcetype splunk_server splunk_server_group smac spt src src_class src_host src_interface src_ip src_location src_mac src_port src_user src_zone time timestamp unix_category unix_group vendor".split(" "),
m="EventID dest dest_hostname dest_ip dest_mac dest_user dhost dmac dst file filename msg sequence_number smac src src_host src_hostname src_ip src_mac src_user".split(" "),h={dhost:"host",dmac:"mac",dest:"ip",dest_hostname:"host",dest_ip:"ip",dest_location:"url",dest_mac:"mac",dest_port:"port",dest_user:"user",dst:"ip",EventID:"event",file:"file",filename:"file",host:"url",index:"log",msg:"alert",product:"product",search_name:"log",sequence_number:"id",source:"log",smac:"mac",src:"ip",src_host:"host",
src_hostname:"host",src_ip:"ip",src_location:"url",src_mac:"mac",src_port:"port",src_user:"user",vendor:"vendor"},k={dhost:"dst",dmac:"dst",dest:"dst",dest_hostname:"dst",dest_ip:"dst",dest_mac:"dst",dest_port:"dst",dest_user:"dst",dst:"dst",EventID:"event",file:"payload",filename:"payload",host:"session",index:"session",msg:"payload",product:"session",search_name:"session",sequence_number:"session",smac:"src",source:"session",src:"src",src_host:"src",src_hostname:"src",src_ip:"src",src_mac:"src",
src_port:"src",src_user:"src",vendor:"session"},l=f.filter(function(a){return-1===d.indexOf(a)&&-1===m.indexOf(a)}),n=f.filter(function(a){return-1===d.indexOf(a)}),q=f.filter(function(a){return-1===m.indexOf(a)}),p="Splunk",g={}},function(e,b,a){(function(e){function d(a,b){a=a.split(",").map(function(a){return a.trim()}).map(function(a){return'"'===a[0]?a.slice(1,-1).trim():a});if(-1<a.indexOf("*")){var d={};b.forEach(function(a){for(var b in a)d[b]=!0});return h()(d)}return a}b.a=function(a,b){var e=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;l.warn("DEPRECATED, use expand:expand()");var f=a.match(/\[{{(.*)}}] *-\[(.*)]-> *\[(.*)]/);if(f){var c=f[1].split(","),h=f[2];f=f[3];l.trace({pivotIds:c,fieldsStr:h,source:f},"Looking at");var m="";c.forEach(function(a){for(var c=d(h,b[a].events),f=function(d){var f=c[d];d=k.a.uniq(k.a.map(b[a].events,function(a){return a[f]})).filter(function(a){return null!==a&&void 0!==a}).map(function(a){return String(a).replace(/([\r\n])/gm,"").replace(/"/g,
'\\"').trim()}).filter(function(a){return a.length&&'""'!==a});d=""+(e?'"'+f+'"="':'"')+d.join('" OR "'+(e?f+'"="':""))+'"';""!==d&&'""'!==d&&(m=m+(m?" OR ":"")+d)},g=0;g<c.length;g++)f(g)});return f+" "+m+" | head 10000 "}};var f=a(11),h=a.n(f);f=a(2);var k=a.n(f),l=a(0).b.createLogger(e)}).call(b,"src/shared/services/templates/splunk/expandHelper.js")},function(e,b,a){(function(e,d){a.d(b,"a",function(){return l});var f=a(34);a(0).b.createLogger(e);var h={EventID:{pointSize:.1,pointColor:7},user:{pointSize:5,
pointColor:1,pointIcon:"user"},threat_name:{pointSize:10,pointColor:5,pointIcon:"bell"},action:{pointSize:5,pointColor:2,pointIcon:"bolt"},url:{pointSize:5,pointColor:3,pointIcon:"link"},severity:{pointSize:5,pointColor:4,pointIcon:"thermometer-half"},application:{pointSize:5,pointColor:6,pointIcon:"file-code-o"},filename:{pointSize:5,pointColor:8,pointIcon:"file"},client_location:{pointSize:5,pointColor:9,pointIcon:"map-marker"},dest_hostname:{pointSize:5,pointColor:10,pointIcon:"server"}};d=d.keys(h);
var k={point:{pointColor:function(a){a.pointColor=h[a.type].pointColor||12},pointSizes:function(a){a.pointSize=h[a.type].pointSize||5},pointIcon:function(a){a.pointIcon=h[a.type].pointIcon}}};e=new f.a({name:"PAN - Search",id:"pan-search",tags:["PAN"],parameters:[{name:"query",inputType:"text",label:"Search:",placeholder:'severity="critical"'},{name:"nodes",inputType:"multi",label:"Nodes:",options:d.map(function(a){return{id:a,name:a}})}],attributes:d,encodings:k,toSplunk:function(a){this.connections=
a.nodes.value;return{searchQuery:'search index=event_gen | search vendor="Palo Alto Networks" '+a.query+"\n                "+this.constructFieldString()+"\n                | head 1000",searchParams:{earliest_time:"-1y"}}}});f=new f.a({name:"PAN - Expand",id:"pan-expand",tags:["PAN"],parameters:[{name:"source",inputType:"pivotCombo",label:"Select events:"},{name:"sourceAttribute",inputType:"combo",label:"Expand on:",options:d.map(function(a){return{value:a,label:a}})},{name:"query",inputType:"text",
label:"Subsearch:",placeholder:'(severity="critical" OR severity="medium" OR severity="low")'},{name:"nodes",inputType:"multi",label:"Nodes:",options:d.map(function(a){return{id:a,name:a}})}],attributes:d,encodings:k,toSplunk:function(a,b){this.connections=a.nodes.value;var d=a.sourceAttribute,e=a.query;a=a.source.value.map(function(a){return'[| loadjob "'+b[a].splunkSearchId+'"\n                   | fields '+d+" | dedup "+d+"]"}).join(" | append ");return{searchQuery:'search index=event_gen | search vendor="Palo Alto Networks"\n                    | search '+
e+" "+a+" "+this.constructFieldString(),searchParams:{earliest_time:"-1y"}}}});var l=[e,f]}).call(b,"src/shared/services/templates/splunk/demos/eventGen.js",a(2))},function(e,b){},function(e,b,a){(function(e,d){a.d(b,"a",function(){return k});var f=a(34);a(0).b.createLogger(e);var h={time:{pointSize:1,pointColor:3},EventID:{pointSize:1,pointColor:9},module:{pointSize:4,pointColor:0},level:{pointSize:4,pointColor:1,pointIcon:"thermometer-half"},"err.message":{pointSize:10,pointColor:2,pointIcon:"bug"},
"metadata.dataset":{pointSize:4,pointColor:4,pointIcon:"database"},"err.stackArray{}.file":{pointSize:5,pointColor:5,pointIcon:"file-code-o"},"err.stackArray{}.function":{pointSize:5,pointColor:6,pointIcon:"stack-overflow"},msg:{pointSize:5,pointColor:7,pointIcon:"comment"},fileName:{pointSize:4,pointColor:8,pointIcon:"file"}};e=new f.a({id:"search-splunk-source-dest",name:"Graphviz Expand",tags:["Graphviz"],parameters:[{name:"src",inputType:"text",label:"Source entity:",placeholder:'"err.message"'},
{name:"dst",inputType:"text",label:"Destination:",placeholder:'"err.stackArray{}.file"'},{name:"pivot",inputType:"pivotCombo",label:"Pivot:"}],toSplunk:function(a,b){var d=a.src,e=a.dest;return{searchQuery:"search "+a.pivot.value.map(function(a){return'[| loadjob "'+b[a].splunkSearchId+'"\n                    | fields '+d+" | dedup "+d+"\n                ]"}).join(" | append ")+"\n            | fields "+d+", "+e+"\n            | fields  - _*"}},encodings:{point:{pointColor:function(a){a.pointColor=
h[a.type].pointColor},pointSize:function(a){a.pointSize=h[a.type].pointSize},pointIcon:function(a){a.pointIcon=h[a.type].pointIcon}}}});d=new f.a({id:"search-graphviz-logs",name:"Graphviz Search",tags:["Graphviz"],parameters:[{name:"query",inputType:"text",label:"Query:",placeholder:"twitter"},{name:"level",label:"Severity >=",inputType:"combo",options:[{value:30,label:"info"},{value:40,label:"warn"},{value:50,label:"error"}]},{name:"time",label:"Time",inputType:"daterange",default:{from:null,to:null}}],
toSplunk:function(a,b,d){b=d.time;return{searchQuery:'search (host=staging* OR host=labs*) source="/var/log/graphistry-json/*.log" '+a.query+" level >= "+a.level+'\n            | spath output=File0 path="err.stackArray{0}.file"\n            | spath output=File1 path="err.stackArray{1}.file"\n            | eval File00=File0 | eval file=if(File00="null", File1, File0)\n            '+this.constructFieldString(),searchParams:this.dayRangeToSplunkParams((a.time||{}).value,b)}},encodings:{point:{pointColor:function(a){a.pointColor=
h[a.type].pointColor},pointSize:function(a){a.pointSize=h[a.type].pointSize},pointIcon:function(a){a.pointIcon=h[a.type].pointIcon}}},connections:d.without(d.keys(h),"time","EventID"),attributes:["time"]});var k=[e,d]}).call(b,"src/shared/services/templates/splunk/demos/misc.js",a(2))},function(e,b,a){(function(e){a.d(b,"a",function(){return q});var d=a(10);d=a.n(d);var f=a(11),h=a.n(f);f=a(0);var k=a(34),l=a(30),n=a(50);f.b.createLogger(e);var q=d()(n.f).map(function(a){var b=a.product,c=a.productIdentifier,
d=a.desiredEntities;a=a.desiredAttributes;var e="Splunk"===b?"":"-"+b.replace(/ /g,"");return new k.a({id:"search-splunk-plain"+e,name:b+": Search",tags:["Splunk"],parameters:[{name:"query",inputType:"text",label:"Query:",placeholder:"error",defaultValue:"error"},{name:"fields",inputType:"multi",label:"Entities:",options:d.map(function(a){return{id:a,name:a}}),defaultValue:d},{name:"attributes",inputType:"multi",label:"Attributes:",options:a.map(function(a){return{id:a,name:a}})},{name:"time",label:"Time",
inputType:"daterange",default:{from:null,to:null}}],toSplunk:function(a,b){var d=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).time;this.connections=a.fields.value;return{searchQuery:"\n                search "+h()(c||{}).map(function(a){return' "'+a+'"="'+c[a]+'" '}).join(" AND ")+a.query+"\n                "+this.constructFieldString()+"\n                "+(-1===(a.query||"").indexOf(" head ")?" | head 1000 ":""),searchParams:this.dayRangeToSplunkParams((a.time||{}).value,d)}},encodings:l.c})})}).call(b,
"src/shared/services/templates/splunk/search.js")},function(e,b,a){(function(e){function d(a){return void 0===a||null===a?"":String(a).replace(/([\r\n])/gm,"").replace(/"/g,'\\"').replace(/\\/g,"\\\\").trim()}function f(a,b,c){c=d(c);if(c.length&&'""'!==c)if(a[b])a=a[b],a[c]||(a[c]=!0);else{var e;a[b]=(e={},e[c]=!0,e)}}function h(a,b,c){b=d(c);b.length&&'""'!==b&&(a[b]||(a[b]=!0))}function k(a,b){if(!a||!b)return!1;for(var c=a.length,d=0;d<c;d++)if(-1!==b.indexOf(a[d]))return!0;return!1}function l(a){var b=
a.pivotIds;b=void 0===b?[]:b;var c=a.pivotCache,d=void 0===c?{}:c;c=a.pivotFields;var e=void 0===c?[]:c;c=a.filter;c=void 0===c?"":c;var g=a.filterPost;g=void 0===g?"":g;var l=a.colMatch;l=void 0===l?!0:l;a=a.matchAttributes;var m=void 0===a?!0:a;u.info("EXPAND RECV",{colMatch:l,matchAttributes:m});var n=!e.length||e.filter(function(a){return"*"===a}).length,q={},t=l?f:h,r="pointTitle pointIcon pointSize pointColor type node".split(" ");b.forEach(function(a){a=(d[a]||{}).results;((void 0===a?{}:a).labels||
[]).forEach(function(a){(n||-1<e.indexOf(a.type)||-1<e.indexOf(a.canonicalType)||k(e,a.refTypes)||k(e,a.cols))&&t(q,a.type,a.node);if(m)for(var b in a)(n&&-1===r.indexOf(b)||-1<e.indexOf(b))&&t(q,b,a[b])})});a=l?p()(q).reduce(function(a,b){return(a.length?a+" OR ":"")+p()(q[b]).reduce(function(a,c){return(a.length?a+" OR ":"")+('"'+b+'"="'+c+'"')},"")},""):p()(q).reduce(function(a,b){return(a.length?a+" OR ":"")+('"'+b+'"')},"");return c+" "+a+" | head 10000 "+(g&&g.length?" |  "+g:"")}a.d(b,"a",
function(){return t});var n=a(10);n=a.n(n);var q=a(11),p=a.n(q);q=a(0);var g=a(30),c=a(34),r=a(50),u=q.b.createLogger(e),t=n()(r.f).map(function(a){var b=a.product,d=a.productIdentifier,e=a.desiredEntities;a=a.desiredAttributes;var f="Splunk"===b?"":"-"+b.replace(/ /g,"");return new c.a({id:"expand-splunk-plain"+f,name:b+": Expand",tags:["Splunk"],parameters:[{name:"ref",inputType:"pivotCombo",label:"Any entity in:"},{name:"filter",inputType:"textarea",label:"Filter:",placeholder:"index=*",defaultValue:""},
{name:"filterPost",inputType:"textarea",label:"Filter (post):",placeholder:"head 10",defaultValue:""},{name:"pivotFields",inputType:"multi",label:"Expand on:",placeholder:"(all)",options:g.b.map(function(a){return{id:a,name:a}})},{name:"matchAttributes",inputType:"bool",label:"Expand on attributes",defaultValue:!1},{name:"colMatch",inputType:"bool",label:"Match column name",defaultValue:!1},{name:"fields",inputType:"multi",label:"Entities:",options:e.map(function(a){return{id:a,name:a}}),defaultValue:e},
{name:"attributes",inputType:"multi",label:"Attributes:",options:a.map(function(a){return{id:a,name:a}})},{name:"time",label:"Time",inputType:"daterange",default:{from:null,to:null}}],toSplunk:function(a){var b=a.ref,c=a.pivotFields;c=void 0===c?{value:[]}:c;var e=a.fields;e=void 0===e?{value:[]}:e;var f=a.filter;f=void 0===f?"":f;var g=a.filterPost;g=void 0===g?"":g;var h=a.colMatch,k=void 0===h?!1:h;h=a.matchAttributes;var m=void 0===h?!1:h,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{};h=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).time;u.info("PARAMS",k,m);this.connections=e.value;var q=p()(d||{}).map(function(a){return' "'+a+'"="'+d[a]+'" '}).join(" AND ");b=l({pivotCache:n,filter:f,filterPost:g,colMatch:k,matchAttributes:m,pivotIds:b.value||[],pivotFields:c.value||[],fields:e.value||[]});b="search "+q+b+" "+this.constructFieldString();u.info("Expansion query",b);return{searchQuery:b,searchParams:this.dayRangeToSplunkParams((h||{}).value,h)}},encodings:g.c})})}).call(b,
"src/shared/services/templates/splunk/expand.js")},function(e,b,a){a.d(b,"a",function(){return f});e=a(219);a=a(225);var f=[].concat(e.a||[],a.a||[])},function(e,b,a){(function(e){a.d(b,"a",function(){return n});var d=a(10);d=a.n(d);var f=a(0),h=a(86),k=a(51),l=a(52);f.b.createLogger(e);var n=d()(l.e).map(function(a){var b=a.product,d=a.desiredEntities;a=a.desiredAttributes;"Elasticsearch"===b||b.replace(/ /g,"");return new h.a({id:"search-es-plain",name:"Elasticsearch: Search",tags:["ElasticSearch"],
parameters:[{name:"index",inputType:"text",label:"Index:",placeholder:"grfy-*",defaultValue:"grfy-*"},{name:"type",inputType:"text",label:"Type:",placeholder:"event",defaultValue:"event"},{name:"query",inputType:"textarea",label:"Query:",placeholder:'{\n  "query": {\n    "match_all": {}\n  }\n}',defaultValue:'{\n  "query": {\n    "match_all": {}\n  }\n}'},{name:"fields",inputType:"multi",label:"Entities:",options:d.map(function(a){return{id:a,name:a}}),defaultValue:d},{name:"attributes",inputType:"multi",
label:"Attributes:",options:a.map(function(a){return{id:a,name:a}})},{name:"time",label:"Time",inputType:"daterange",default:{from:null,to:null}}],toES:function(a,b){var c=a.index,d=a.query,e=a.type,f=a.fields,g=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).time;this.connections=f.value;c={index:c,type:e,body:JSON.parse(d)};null!==f.value&&(c._source=f.value);return{searchQuery:c,searchParams:this.dayRangeToSplunkParams((g||{}).value,g)}},encodings:k.c})})}).call(b,"src/shared/services/templates/elasticsearch/search.js")},
function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a.d(b,"defaultFields",function(){return f});a.d(b,"desiredEntities",function(){return d});a.d(b,"desiredAttributes",function(){return m});a.d(b,"colTypes",function(){return h});a.d(b,"refTypes",function(){return k});a.d(b,"product",function(){return l});a.d(b,"productIdentifier",function(){return n});a.d(b,"fieldsBlacklist",function(){return q});a.d(b,"attributesBlacklist",function(){return p});a.d(b,"entitiesBlacklist",function(){return g});
e=a(2);a=a.n(e);var f="act app_risk cid devicePayloadId dmac dpt dvc_ip dvchost ext_ref externalId fileHash filePath fileType file_hash fname fsize id infURL objURL occurred product_version proto requestClientApplication requestMethod rt shost smac sproc spt signature transport cef_dproduct cef_dvendor cef_dversion cef_name cef_severity cef_sid".split(" ").concat(a.a.range(0,10).map(function(a){return"cn"+a}),a.a.range(0,10).map(function(a){return"cn"+a+"Label"}),a.a.range(0,10).map(function(a){return"cs"+
a}),a.a.range(0,10).map(function(a){return"cs"+a+"Label"}),a.a.range(0,150).map(function(a){return"field"+a}),a.a.range(0,10).map(function(a){return"flexString"+a}),a.a.range(0,10).map(function(a){return"flexString"+a+"Label"}),a.a.range(0,10).map(function(a){return"future_use"+a})),d="dmac fileHash filePath file_hash fname objURL smac sproc signature".split(" "),m="act app_risk cid devicePayloadId dmac dpt dvc_ip dvchost ext_ref externalId fileHash filePath fileType file_hash fname fsize id infURL objURL occurred product_version proto requestClientApplication requestMethod rt shost smac sproc spt signature transport".split(" "),
h={devicePayloadId:"id",dmac:"mac",dvc_ip:"ip",ext_ref:"url",externalId:"id",fileHash:"hash",filePath:"url",file_hash:"hash",fname:"file",id:"id",infURL:"url",objURL:"url",smac:"mac",sproc:"file",signature:"alert"},k={devicePayloadId:"?",dmac:"dst",dvc_ip:"device",ext_ref:"?",externalId:"?",fileHash:"payload",filePath:"payload",file_hash:"payload",fname:"payload",id:"?",infURL:"?",objURL:"?",smac:"src",sproc:"src",signature:"payload"},l="FireEye Web MPS",n={product:"Web MPS",vendor:"FireEye"},q=[],
p=a.a.range(0,150).map(function(a){return"field"+a}),g=f.filter(function(a){return-1===d.indexOf(a)})},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a.d(b,"defaultFields",function(){return f});a.d(b,"desiredEntities",function(){return d});a.d(b,"desiredAttributes",function(){return m});a.d(b,"colTypes",function(){return h});a.d(b,"refTypes",function(){return k});a.d(b,"product",function(){return l});a.d(b,"productIdentifier",function(){return n});a.d(b,"fieldsBlacklist",function(){return q});
a.d(b,"attributesBlacklist",function(){return p});a.d(b,"entitiesBlacklist",function(){return g});e=a(2);a=a.n(e);var f="agentId agentVersion categoryBehavior categoryDeviceType categoryDeviceGroup categoryObject categoryOutcome categorySignificance categoryTechnique categoryTupleDescription deviceCustomDate1 deviceCustomDate1Label ioc_name start".split(" ").concat(a.a.range(0,10).map(function(a){return"cn"+a}),a.a.range(0,10).map(function(a){return"cn"+a+"Label"}),a.a.range(0,10).map(function(a){return"cs"+
a}),a.a.range(0,10).map(function(a){return"cs"+a+"Label"}),a.a.range(0,150).map(function(a){return"field"+a}),a.a.range(0,10).map(function(a){return"flexString"+a}),a.a.range(0,10).map(function(a){return"flexString"+a+"Label"}),a.a.range(0,10).map(function(a){return"future_use"+a})),d=["ioc_name"],m="categoryBehavior categoryDeviceType categoryObject categoryOutcome categorySignificance categoryTechnique categoryTupleDescription deviceCustomDate1 deviceCustomDate1Label ioc_name start".split(" "),
h={ioc_name:"alert"},k={ioc_name:"payload"},l="FireEye HX",n={product:"HX",vendor:"FireEye"},q=[],p=a.a.range(0,150).map(function(a){return"field"+a}),g=f.filter(function(a){return-1===d.indexOf(a)})},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a.d(b,"defaultFields",function(){return f});a.d(b,"desiredEntities",function(){return d});a.d(b,"desiredAttributes",function(){return m});a.d(b,"colTypes",function(){return h});a.d(b,"refTypes",function(){return k});a.d(b,"product",function(){return l});
a.d(b,"productIdentifier",function(){return n});a.d(b,"fieldsBlacklist",function(){return q});a.d(b,"attributesBlacklist",function(){return p});a.d(b,"entitiesBlacklist",function(){return g});e=a(2);a=a.n(e);var f="X_OpenDNS_Session action action_flags app app_able_to_transfer_file app_category app_default_ports app_evasive app_excessive_bandwidth app_has_known_vulnerability app_is_saas app_is_sanctioned_saas app_pervasive_use app_prone_to_misuse app_risk app_subcategory app_technology app_tunnels_other_application app_used_by_malware application cid client_ip client_location content_type dest_translated_port direction flags generated_time ids_type log_forwarding_profile log_subtype major_content_type misc pcap_id receive_time repeat_count report_id rule sequence_number server_location session_id serial_number signature_id src_translated_ip src_translated_port tag__eventtype threat_name threat_id type url url_index user vendor_action vendor_product vendor_protocol virtual_system vsys".split(" ").concat(a.a.range(0,
10).map(function(a){return"devicegroup_level"+a})),d=["client_ip","rule","threat_name","user"],m=f,h={client_ip:"ip",pcap_id:"id",rule:"alert",session_id:"id",signature_id:"id",threat_name:"alert",url:"url",user:"user"},k={pcap_id:"payload",rule:"payload",session_id:"session",signature_id:"payload",threat_name:"payload",url:"payload"},l="PAN",n={product:"Firewall",vendor:"Palo Alto Networks"},q=[],p=[],g=f.filter(function(a){return-1===d.indexOf(a)})},function(e,b,a){Object.defineProperty(b,"__esModule",
{value:!0});a.d(b,"defaultFields",function(){return f});a.d(b,"desiredEntities",function(){return d});a.d(b,"desiredAttributes",function(){return m});a.d(b,"colTypes",function(){return h});a.d(b,"refTypes",function(){return k});a.d(b,"product",function(){return l});a.d(b,"productIdentifier",function(){return n});a.d(b,"fieldsBlacklist",function(){return q});a.d(b,"attributesBlacklist",function(){return p});a.d(b,"entitiesBlacklist",function(){return g});var f="Client_Address Client_IP Client_Port ComputerName EventCode Keywords LogName Logon_Account Logon_GUID Logon_ID Logon_Process Message OpCode Process_ID Process_Name RecordNumber SourceName Source_Address Source_Network_Address Source_Port Source_Workstation Target_Server_Name TaskCategory Type Url_Absolute_Path User User_Agent User_ID Workstation_Name _raw _time action app body dest event_id name privilege privilege_id product session_id severity signature signature_id source sourcetype src src_ip src_user status subject user vendor vendor_privilege".split(" "),
d="Client_IP Source_Address Source_Network_Address Source_Workstation Target_Server_Name Url_Absolute_Path User Workstation_Name name subject".split(" "),m=f,h={Client_IP:"ip",Client_Port:"port",ComputerName:"host",EventCode:"id",Logon_Account:"user",Logon_GUID:"id",Logon_ID:"id",Logon_Process:"process",Message:"event",Process_ID:"id",Process_Name:"process",RecordNumber:"id",SourceName:"log",Source_Address:"ip",Source_Network_Address:"ip",Source_Port:"port",Source_Workstation:"user",Target_Server_Name:"host",
Url_Absolute_Path:"url",User:"agent",User_Agent:"agent",User_ID:"user",Workstation_Name:"host",_raw:"event",body:"event",event_id:"id",name:"alert",product:"log",session_id:"id",signature_id:"id",source:"log",subject:"alert",vendor:"log"},k={},l="Windows",n={product:"Windows",vendor:"Microsoft"},q=[],p=[],g=f.filter(function(a){return-1===d.indexOf(a)})},function(e,b,a){Object.defineProperty(b,"__esModule",{value:!0});a.d(b,"defaultFields",function(){return f});a.d(b,"desiredAttributes",function(){return d});
a.d(b,"desiredEntities",function(){return m});a.d(b,"colTypes",function(){return h});a.d(b,"refTypes",function(){return k});a.d(b,"fieldsBlacklist",function(){return l});a.d(b,"attributesBlacklist",function(){return n});a.d(b,"entitiesBlacklist",function(){return q});a.d(b,"product",function(){return p});a.d(b,"productIdentifier",function(){return g});var f="EventID _cd _indextime _raw _time _bkt _indextime _kv _serial _si _sourcetype _title category date_hour date_mday date_minute date_month date_second date_wday date_year date_zone dest dest_class dest_hostname dest_interface dest_ip dest_location dest_mac dest_port dest_zone domain dst dhost dmac dpt dntdom dvc dvc_host eventtype extracted_eventtype extracted_host extracted_index extracted_linecount extracted_source extracted_sourcetype extracted_splunk_server file filename host index linecount misc msg name product protocol punct raw source sequence_number search_name severity signature source sourcetype splunk_server splunk_server_group smac spt src src_class src_interface src_host src_ip src_location src_mac src_port src_user src_zone time timestamp timeendpos timestartpos unix_category unix_group vendor".split(" "),
d="EventID category dest dest_class dest_hostname dest_interface dest_ip dest_location dest_mac dest_port dest_zone domain dhost dmac dpt dntdom dst dvc dvc_host eventtype extracted_eventtype extracted_host extracted_index extracted_linecount extracted_source extracted_sourcetype extracted_splunk_server file filename host index linecount misc msg name product protocol punct raw search_name sequence_number severity signature source sourcetype splunk_server splunk_server_group smac spt src src_class src_host src_interface src_ip src_location src_mac src_port src_user src_zone time timestamp unix_category unix_group vendor".split(" "),
m="EventID dest dest_hostname dest_ip dest_mac dest_user dhost dmac dst file filename msg sequence_number smac src src_host src_hostname src_ip src_mac src_user".split(" "),h={dhost:"url",dmac:"mac",dest:"ip",dest_hostname:"url",dest_ip:"ip",dest_location:"url",dest_mac:"mac",dest_port:"port",dest_user:"user",dst:"ip",EventID:"event",file:"file",filename:"file",host:"url",index:"log",msg:"alert",product:"product",search_name:"log",sequence_number:"id",source:"log",smac:"mac",src:"ip",src_host:"url",
src_hostname:"url",src_ip:"ip",src_location:"url",src_mac:"mac",src_port:"port",src_user:"user",vendor:"vendor"},k={dhost:"dst",dmac:"dst",dest:"dst",dest_hostname:"dst",dest_ip:"dst",dest_mac:"dst",dest_port:"dst",dest_user:"dst",dst:"dst",EventID:"event",file:"payload",filename:"payload",host:"session",index:"session",msg:"payload",product:"session",search_name:"session",sequence_number:"session",smac:"src",source:"session",src:"src",src_host:"src",src_hostname:"src",src_ip:"src",src_mac:"src",
src_port:"src",src_user:"src",vendor:"session"},l=f.filter(function(a){return-1===d.indexOf(a)&&-1===m.indexOf(a)}),n=f.filter(function(a){return-1===d.indexOf(a)}),q=f.filter(function(a){return-1===m.indexOf(a)}),p="Elasticsearch",g={}},function(e,b,a){(function(e){function d(a){return void 0===a||null===a?"":String(a).replace(/([\r\n])/gm,"").replace(/"/g,'\\"').replace(/\\/g,"\\\\").trim()}function f(a,b,c){c=d(c);if(c.length&&'""'!==c)if(a[b])a=a[b],a[c]||(a[c]=!0);else{var e;a[b]=(e={},e[c]=
!0,e)}}function h(a,b,c){b=d(c);b.length&&'""'!==b&&(a[b]||(a[b]=!0))}function k(a,b){if(!a||!b)return!1;for(var c=a.length,d=0;d<c;d++)if(-1!==b.indexOf(a[d]))return!0;return!1}function l(a){var b=a.pivotIds;b=void 0===b?[]:b;var c=a.pivotCache,d=void 0===c?{}:c;c=a.pivotFields;var e=void 0===c?[]:c;c=a.colMatch;c=void 0===c?!0:c;a=a.matchAttributes;var g=void 0===a?!0:a;r.info("EXPAND RECV",{colMatch:c,matchAttributes:g});var l=!e.length||e.filter(function(a){return"*"===a}).length,m={},n=c?f:h,
p="pointTitle pointIcon pointSize pointColor type node".split(" ");b.forEach(function(a){a=(d[a]||{}).results;((void 0===a?{}:a).labels||[]).forEach(function(a){(l||-1<e.indexOf(a.type)||-1<e.indexOf(a.canonicalType)||k(e,a.refTypes)||k(e,a.cols))&&n(m,a.type,a.node);if(g)for(var b in a)(l&&-1===p.indexOf(b)||-1<e.indexOf(b))&&n(m,b,a[b])})});return m}a.d(b,"a",function(){return u});var n=a(10);n=a.n(n);var q=a(0),p=a(51),g=a(86),c=a(52),r=q.b.createLogger(e),u=n()(c.e).map(function(a){var b=a.product,
c=a.desiredEntities;a=a.desiredAttributes;var d="Elasticsearch"===b?"":"-"+b.replace(/ /g,"");return new g.a({id:"expand-elasticsearch-plain"+d,name:b+": Expand",tags:["Splunk"],parameters:[{name:"ref",inputType:"pivotCombo",label:"Any entity in:"},{name:"query",inputType:"textarea",label:"Query:",placeholder:'{\n  "query": {\n    "exists": { "field" : "EventID" }\n  }\n}',defaultValue:'{\n  "query": {\n    "exists": { "field" : "EventID" }\n  }\n}'},{name:"index",inputType:"text",label:"Index:",
placeholder:"grfy-*",defaultValue:"grfy-*"},{name:"filter",inputType:"textarea",label:"Filter:",placeholder:"index=*",defaultValue:""},{name:"pivotFields",inputType:"multi",label:"Expand on:",placeholder:"(all)",options:p.b.map(function(a){return{id:a,name:a}})},{name:"matchAttributes",inputType:"bool",label:"Expand on attributes",defaultValue:!1},{name:"colMatch",inputType:"bool",label:"Match column name",defaultValue:!1},{name:"fields",inputType:"multi",label:"Entities:",options:c.map(function(a){return{id:a,
name:a}}),defaultValue:c},{name:"attributes",inputType:"multi",label:"Attributes:",options:a.map(function(a){return{id:a,name:a}})},{name:"time",label:"Time",inputType:"daterange",default:{from:null,to:null}}],toES:function(a){var b=a.ref,c=a.query,d=a.index,e=a.pivotFields;e=void 0===e?{value:[]}:e;var f=a.fields;f=void 0===f?{value:[]}:f;var g=a.filter;g=void 0===g?"":g;var h=a.filterPost;h=void 0===h?"":h;var k=a.colMatch,m=void 0===k?!1:k;k=a.matchAttributes;var n=void 0===k?!1:k,p=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:{};k=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).time;r.info("PARAMS",m,n);b=l({pivotCache:p,filter:g,filterPost:h,colMatch:m,matchAttributes:n,pivotIds:b.value||[],pivotFields:e.value||[],fields:f.value||[]});this.connections=f.value;c={index:d,type:"event",body:JSON.parse(c)};console.log(b.keys());null!==this.connections?c._source={includes:this.connections}:b!=={}&&null!==this.connections?c._source={includes:b.keys().concat(this.connections)}:
b!=={}&&(c._source={includes:b.keys()});c._source.excludes=g;r.info("Expansion query",c);return{searchQuery:c,searchParams:this.dayRangeToSplunkParams((k||{}).value,k)}},encodings:p.c})})}).call(b,"src/shared/services/templates/elasticsearch/expand.js")},function(e,b,a){(function(e){a.d(b,"a",function(){return g});var d=a(5),f=a.n(d);d=a(7);var h=a.n(d);d=a(8);var k=a.n(d),l=a(4);a.n(l);d=a(227);var n=a.n(d);d=a(64);var q=a.n(d);d=a(35);var p=a(0).b.createLogger(e);d=function(a){function b(c){f()(this,
b);var d=h()(this,a.call(this,c)),e=c.connections,g=c.encodings,k=c.attributes;d.fileName=c.fileName;d.connections=e;d.encodings=g;d.attributes=k;return d}k()(b,a);b.prototype.searchAndShape=function(a){var b=a.app,c=a.pivot;a=l.Observable.bindNodeCallback(q.a.get.bind(q.a));c.template=this;return a("https://s3-us-west-1.amazonaws.com/graphistry.data.public/"+this.fileName).map(function(a){a=JSON.parse(a[1]);var d=a.labels;c.results={graph:a.graph.map(function(a){return{source:a.src,destination:a.dst}}),
labels:d};return{app:b,pivot:c}}).catch(function(a){p.error(a,"Failed to download dataset");return l.Observable.throw("Failed to download dataset "+a)})};return b}(d.a);e=new d({id:"blazegraph-community-detection",name:"Community Detection",tags:["Blazegraph"],fileName:"blazegraph.json",parameters:[{name:"communities",inputType:"text",label:"Number of communities",placeholder:"2"}],encodings:{point:{pointColor:function(a){a.pointColor=n()(a.type)%12}}}});d=new d({id:"blazegraph-bfs",name:"BFS",tags:["Blazegraph"],
fileName:"darpa-1998-json-expand-two-194.027.251.021",parameters:[{name:"ip",inputType:"text",label:"Seed IP:",placeholder:"192.168.0.1"},{name:"depth",label:"Maximum Depth",inputType:"combo",options:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"}]}],encodings:{point:{pointColor:function(a){a.pointColor=n()(a.type)%12}}}});var g=[e,d]}).call(b,"src/shared/services/templates/blazegraph.js")},
function(e,b){e.exports=require("string-hash")},function(e,b,a){a.d(b,"a",function(){return f});e=a(87);a=a(91);var f=[].concat(e.b||[],a.b||[])},function(e,b){e.exports=require("string-template")},function(e,b){e.exports=require("child_process")},function(e,b){e.exports=require("flat")},function(e,b,a){(function(e){a.d(b,"a",function(){return n});var d=a(10);d=a.n(d);var f=a(13),h=a.n(f);f=a(0);var k=a(233),l=f.b.createLogger(e);e=global.__graphistry_convict_conf__.get("systemTemplates.pivots").reduce(function(a,
b){var d=b.template;b=h()(b,["template"]);var c=b.id,e=b.name;try{l.info("Adding system pivot",{id:c,name:e,base:d}),a[c]=Object(k.a)(d,b)}catch(u){l.error("Failure to load user pivot "+c+" ("+e+")",u)}return a},{});var n=d()(e)}).call(b,"src/shared/services/templates/systemTemplates/index.js")},function(e,b,a){b.a=function(a,b){if(!(a in f))throw Error("Unknown base template ID "+a+" \n\t\t\tfor deriving template "+(b||{}).id);return f[a].clone(b)};e=a(91);b=a(87);a=a(92);var f=[e.a,b.a,a.a].reduce(function(a,
b){a[b.id]=b;return a},{})},function(e,b,a){b.b=function(a){return"object"===("undefined"===typeof a?"undefined":f()(a))&&"atom"===a.$type?a.value:a};b.a=function(a){return"object"===("undefined"===typeof a?"undefined":f()(a))?Object(d.atom)(a):a};e=a(70);var f=a.n(e),d=a(6);a.n(d)},function(e,b,a){(function(e){function d(a){return{name:"Untitled Investigation "+a,id:Object(c.simpleflake)().toJSON(),description:"",tags:[],modifiedOn:Date.now(),layout:"stackedBushyGraph",pivots:[],time:{}}}function f(a){return{url:null,
axes:[],edgeOpacity:1,datasetType:"vgraph",datasetName:"",status:{ok:!0,etling:!1},eventTable:{},pivots:a.map(function(a){return Object(p.ref)("pivotsById['"+a+"']")}),detachedPivots:[]}}function h(a){a=g.a.pick(a,g.a.keys(d()));a.pivots=a.pivots.map(function(a){return a.value[1]});a.tags=Object(r.b)(a.tags);a.time=Object(r.b)(a.time);return a}b.b=function(a,b){a=q()({},d(b||""),a);a.tags=Object(r.a)(a.tags);a.time=Object(r.a)(a.time);return q()({},a,f(a.pivots))};b.c=h;b.a=function(a,b){var d=JSON.parse(n()(h(a))),
e=a.pivots.map(function(a){return a.value[1]}),k=b.map(function(a){return a.id});b=b.map(function(a){var b=a.pivotRefs;delete a.pivotRefs;var c=l()(a.pivotParameters).reduce(function(a,c){var d=c[0];c=c[1];0<=b.indexOf(d)&&(c.value=c.value.map(function(a){return k[e.indexOf(a)]}));a[d]=c;return a},{});return q()({pivotParameters:c},a)});return q()({},d,f(g.a.pluck(b,"id")),{id:Object(c.simpleflake)().toJSON(),name:"Copy of "+a.name})};var k=a(61),l=a.n(k);k=a(12);var n=a.n(k);k=a(1);var q=a.n(k),
p=a(6);a.n(p);k=a(2);var g=a.n(k),c=a(23);a.n(c);var r=a(67);a(0).b.createLogger(e)}).call(b,"src/shared/models/investigation.js")},function(e,b,a){(function(e){b.a=function(a){a=f()({},l,h.a.pick(a,["id","name","tags","pivotParametersUI","pivotParameterKeys"]));a.tags=Object(k.a)(a.tags);a.pivotParameterKeys=Object(k.a)(a.pivotParameterKeys);a.pivotParametersUI=Object(k.a)(a.pivotParametersUI);return a};var d=a(1),f=a.n(d);d=a(2);var h=a.n(d);d=a(0);var k=a(67);d.b.createLogger(e);var l={name:"Untitled pivot",
tags:[],pivotParameterKeys:[],pivotParametersUI:{}}}).call(b,"src/shared/models/template.js")},function(e,b){e.exports=require("babel-runtime/core-js/math/trunc")},function(e,b){e.exports=require("zlib")},function(e,b){e.exports=require("querystring")},function(e,b,a){(function(e){function d(a){var b=a.nodeIDs,c={};a.edges.forEach(function(a){var d=a.source,e=a.destination;if("EventID"===b[d].type){var f=c[d];a=a.refType||"all";if(f)(d=f[a])?d.push(b[e]):f[a]=[b[e]];else{var g;c[d]=(g={},g[a]=[b[e]],
g)}}});return c}function f(a){var b={};a.forEach(function(a){a=a.node;Object(c.a)(a)&&(b[a]=Object(c.b)(a)?w:A)});return b}function h(a){var b=a.ip_io;a=a.eventNeighborhood;var c=g()({},b);p()(a).forEach(function(a){var d=a.src;a=a.dst;[void 0===d?[]:d,void 0===a?[]:a].forEach(function(a){var d=a.reduce(function(a,c){return a|b[c.node]},v);d!==v&&a.forEach(function(a){a=a.node;c[a]|=d})})});return c}function k(a){var b=a.events,c=a.eventNeighborhood,d=a.srcdst_io,e=g()({},d);b.forEach(function(a){var b=
c[a.node]||{},f=b.src;f=void 0===f?[]:f;var g=b.dst;g=void 0===g?[]:g;b=q()(b,["src","dst"]);f=[f,g].map(function(a){return a.reduce(function(a,b){return a|d[b.node]},v)});var h=f[0]|f[1]<<2;e[a.node]=h;p()(b).forEach(function(a){a.forEach(function(a){a=a.node;var b=d.hasOwnProperty(a),c=d[a];e[a]=b?c:e[a]|h})})});return e}b.a=function(a){var b=a.data.labels.filter(function(a){return"EventID"===a.type}),c={};a.data.labels.forEach(function(a){c[a.node]=a});var e=d({edges:a.data.graph,nodeIDs:c}),g=
f(a.data.labels);g=h({ip_io:g,eventNeighborhood:e});var l=k({events:b,eventNeighborhood:e,srcdst_io:g});a.data.labels.forEach(function(a){a.canonicalInsideness=x[l[a.node]]||"mixed"});return a};b.b=function(a){var b={},c=u.a.idField,d=u.a.typeField;a.data.labels.forEach(function(a){var c=a.canonicalInsideness||"";void 0===b[c]&&(b[c]={});c=b[c];var e=a.canonicalType||a[d];void 0===c[e]&&(c[e]=[]);c[e].push(a)});z.forEach(function(a){!b[a]&&-1<B.indexOf(a)&&(b[a]={ip:[I]})});var f={},g={},h=0,k=!1,
l=!1;z.forEach(function(a,d){if(b[a]){0===d&&(k=!0);5===d&&(l=!0);0<d&&(h+=D,k?(g[h]={r:h,label:"Internal Network",internal:!0},k=null):l?(g[h]={r:h,label:"External Communications",external:!0},l=null):g[h]={r:h,space:!0});h+=D-E;var m=0===d?C:5===d?y:F;e.sortBy(n()(b[a]),function(a){return m.indexOf(a)}).forEach(function(d){h+=E;b[a][d].forEach(function(e,k){var l=h;k=k*Math.PI*2/b[a][d].length;e!==I&&(f[e[c]]={x:l*Math.cos(k),y:l*Math.sin(k)});g[l]={r:l}})})}});Object(r.a)(a.data.labels,f);a.data.edgeOpacity=
Object(r.b)(a.data.graph);a.data.axes=p()(g);return a};var l=a(11),n=a.n(l);l=a(13);var q=a.n(l);l=a(10);var p=a.n(l);l=a(65);var g=a.n(l),c=a(241),r=a(66),u=a(49),t,v=0,w=1,A=2,x=(t={},t[w]="inside",t[A]="outside",t[4]="inside",t[5]="inside",t[6]="mixed",t[8]="outside",t[9]="mixed",t[10]="outside",t),z="inside inside->outside mixed  outside->inside outside".split(" "),B=["inside","mixed","outside"],C="mac ip host user event alert hash filepath file".split(" "),y="mac ip host user alert event hash filepath file".split(" "),
F=["alert","event","hash","file","filepath"],D=400,E=200,I={}}).call(b,a(2))},function(e,b,a){b.b=function(a){return null!==String(a).match(/^10[.][^.]+[.][^.]+[.][^.]+$|172[.](?:1[6-9]|2\d|3[01])[.][^.]+[.][^.]+$|192[.]168[.][^.]+[.][^.]+$/)};b.a=function(a){return!!String(a).match(/^\d+[.]\d+[.]\d+[.]\d+$/)}},function(e,b,a){(function(e){function d(a,b,d){if("double"===b){var e=new c.a.DoubleAttributeVector;e.dest="double_vectors";e.transform=parseFloat}else"integer"===b?(e=new c.a.Int32AttributeVector,
e.dest="int32_vectors",e.transform=function(a){return parseInt(a)||0}):(e=new c.a.StringAttributeVector,e.dest="string_vectors",e.transform=function(a){return String(a).trim()});e.default=w[b];e.name=a;e.target=d;e.values=[];e.map={};return e}function f(a,b){a=u.map(a,function(a,c){if("empty"===a.type)return v.info("Skipping attribute",c,"because it has no data."),[];a=d(c,a.type,b);return[c,a]});return u.object(u.filter(a,function(a){return 0<a.length}))}function h(a){return void 0!==a&&null!==a&&
""!==a&&a!==w.string&&!("number"===typeof a&&isNaN(a))}function k(a){return 0===a.length?"empty":u.all(a,function(a){return!isNaN(a)})?u.all(a,r._isSafeNumber)?"integer":"double":"string"}function l(a,b,c){var d=void 0;if("empty"!==a&&b.length)d=a;else{a=!0;for(var e=0;e<b.length;e++)if(h(b[e][c])){a=!1;d=k([b[e][c]]);break}if(a)return"empty"}if("string"===d){for(d=0;d<b.length;d++)if(a=b[d][c],void 0!==a&&null!==a&&isNaN(a))return"string";return l("integer",b,c)}d=!0;a=!1;for(e=0;e<b.length;e++){var f=
b[e][c];if(void 0!==f&&null!==f){a=!0;if(isNaN(f))return"string";Object(r._isSafeNumber)(f)||(d=!1)}}return a?d?"integer":"double":"empty"}function n(a){var b={},c=0;u.each(a,function(a){u.each(u.keys(a),function(c){var d=b[c]||{count:0,samples:[],type:void 0,key:c},e=a[c];h(e)&&(d.count++,100>d.samples.length&&d.samples.push(e));b[c]=d});c++});return u.object(u.map(b,function(b,d){b.freq=b.count/c;b.type=l(k(b.samples),a,b.key);return[d,b]}))}function q(a,b,d,e,h,k){function l(a,b){u.each(a,function(a,
c){c in b&&null!==b[c]&&void 0!==b[c]?a.values.push(a.transform(b[c])):a.values.push(a.default)})}b=b||[];var m={},p=0,q=[],r={},w=function(a){m.hasOwnProperty(a)||(m[a]=p,p++)},y=100;v.trace("Infering schema...");var x=n(a);v.info("Edge Table");u.each(x,function(a,b){v.info(t("%36s: %3d%% filled    %s",b,Math.floor(100*a.freq).toFixed(0),a.type))});var z=n(b);v.info("Node Table");u.each(z,function(a,b){v.info(t("%36s: %3d%% filled    %s",b,Math.floor(100*a.freq).toFixed(0),a.type))});if(d in x)if(e in
x)if(0<b.length&&!(h in z))v.info("Nodes have no idField",h);else{var B=f(x,c.a.AttributeTarget.EDGE),A=f(z,c.a.AttributeTarget.VERTEX);v.trace("Loading",a.length,"edges...");u.each(a,function(a){var b=a[d],f=a[e];w(b);w(f);if(void 0===b||void 0===f||null===b||null===f){0<y--&&v.info("Edge %s <-> %s has null field",b,f,a);var g=!0}else g=!1;g||(g=new c.a.Edge,g.src=m[b],g.dst=m[f],q.push(g),g=r[b]||{},g[f]=!0,r[b]=g,l(B,a))});v.trace("Loading",b.length,"labels for",p,"nodes");p>b.length&&v.info("There are",
p-b.length,"labels missing");for(z=0;z<b.length;z++)x=b[z],a=x[h],a in m||w(a);var C=Array(p),P=100;for(z=0;z<b.length;z++)x=b[z],a=x[h],a in m?C[m[a]]=x:0<P--&&v.info(t("Skipping label #%6d (nodeId: %10s) which has no matching node. (ID field: %s, label: %s)",z,a,h,g()(x)));u.each(C,function(a){l(A,a||{})});v.trace("Encoding protobuf...");var L=new c.a;L.version=0;L.name=k;L.type=c.a.GraphType.DIRECTED;L.vertexCount=p;L.edgeCount=q.length;L.edges=q;u.each(u.omit(B,d,e),function(a){L[a.dest].push(a)});
u.each(u.omit(A,"_mkv_child","_timediff"),function(a){L[a.dest].push(a)});return{vg:L,sortedLabels:C,unsortedEdges:q}}else v.info("Edges have no dstField",e);else v.info("Edges have no srcField",d,"header",x)}a.d(b,"a",function(){return q});var p=a(12),g=a.n(p);p=a(0);var c=a(104),r=a(245);a.n(r);a(37);var u=a(2),t=a(81).sprintf,v=p.b.createLogger(e),w={double:NaN,integer:2147483647,string:"\x00"}}).call(b,"src/shared/services/vgraph/vgraph.js")},function(e,b){e.exports=require("babel-runtime/core-js/object/create")},
function(e,b){e.exports=require("protobufjs/minimal")},function(e,b){e.exports=require("@graphistry/falcor-path-utils/lib/toPaths.js")},function(e,b,a){(function(e){function d(a,b){return function(a){function b(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};q()(this,b);var e=p()(this,a.call(this,d));e.request=c;c=d||{};c=n()(c,["debug","streaming","bufferTime"]);for(var f in c)c.hasOwnProperty(f)&&(e[f]=c[f]);e.routeUnhandledPathsTo({get:function(a){A.error({falcorReqPath:a},
"Unhandled get");return r.Observable.empty()},set:function(a){A.error({falcorReqPath:a},"Unhandled set");return r.Observable.of(a)},call:function(a,b,c,d){A.error({falcorReqPath:a,falcorArgs:b,refPaths:c,thisPaths:d},"Unhandled call");return r.Observable.empty()}});return e}g()(b,a);return b}(t.a.createClass(b,a))}function f(a){["get","set","call"].forEach(function(b){"function"===typeof a[b]&&(a[b]=h(a,b))});return a}function h(a,b){var c=a[b];return function(){for(var a=this,d=arguments.length,
e=Array(d),f=0;f<d;f++)e[f]=arguments[f];A.trace({falcorReqPath:e[0],falcorArgs:e[1],falcorOp:b},"Falcor request");return r.Observable.defer(function(){return c.apply(a,e)||[]}).timeout(6E4).map(w.b).do(function(a){var b=a.path;void 0===a.value&&A.warn("Get handler is returning undefined for "+l()(b))}).do(function(a){return A.trace({falcorReqPath:e[0],falcorReqArgs:e[1],falcorResPath:a.path,falcorResValue:a.value,falcorOp:b},"Faclor reply")}).catch(function(a){a=Object(w.a)(A,{err:a,falcorPath:e[0],
falcorArgs:e[1],falcorOp:b});return r.Observable.from([Object(v.$pathValue)("serverStatus",Object(v.$error)({ok:!1,title:"Ooops!",message:"Unexpected server error (code: "+a+")."}))])})}}var k=a(12),l=a.n(k);k=a(13);var n=a.n(k);k=a(5);var q=a.n(k);k=a(7);var p=a.n(k);k=a(8);var g=a.n(k);k=a(1);var c=a.n(k),r=a(4);a.n(r);var u=a(54);k=a(247);var t=a.n(k),v=a(6);a.n(v);var w=a(39),A=a(0).b.createLogger(e);b.a=function(a){var b=d(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{bufferTime:10,
streaming:!1},u.a.schema(a).toArray().map(f));return function(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{bufferTime:10,streaming:!1};if(!a.user)throw Error("Request is not tagged with a user (no auth middleware?)");return new b(a,c()({},d,{userId:a.user.userId}))}}}).call(b,"src/router/falcor.js")},function(e,b){e.exports=require("@graphistry/falcor-router")},function(e,b,a){(function(e){var d=a(0),f=a(249);a.n(f);var h=Object(d.b)(e);b.a=function(a,b){a.removeAllListeners("connection");
a.on("connection",function(a){function d(){a.removeListener(c.event,c.response);a.removeListener("disconnect",d);h.info("User "+g.userId+" successfully disconnected.")}var e=a.handshake.query,g=void 0===e?{}:e,c=new f.FalcorPubSubDataSink(a,function(){return b({user:{userId:g.userId}})});a.on(c.event,c.response);a.on("disconnect",d)})}}).call(b,"src/server/socket.js")},function(e,b){e.exports=require("@graphistry/falcor-socket-datasource")},function(e,b,a){(function(e){function d(a,b){var d,e=a.user.userId;
b={currentUser:Object(h.ref)("usersById['"+e+"']"),usersById:(d={},d[e]={activeScreen:b},d)};a=a.params.investigationId;void 0!==a&&""!==a&&(a=Object(h.ref)("investigationsById['"+a+"']"),b.usersById[e].activeInvestigation=a);return b}var f=a(251);a.n(f);var h=a(6);a.n(h);a(0).b.createLogger(e);var k={connectors:function(a){return d(a,"connectors")},home:function(a){return d(a,"home")},investigation:function(a){return d(a,"investigation")}};b.a=function(a){return function(b){return new f.Model({cache:(k[b.params.activeScreen]||
k.home)(b),source:a(b),recycleJSON:!0,treatErrorsAsValues:!0})}}}).call(b,"src/router/model.js")},function(e,b){e.exports=require("@graphistry/falcor")},function(e,b,a){var f=a(253);a.d(b,"b",function(){return f.a});var d=a(257);a.d(b,"a",function(){return d.a})},function(e,b,a){(function(e){function d(a){return function(b,d,e){var c=a.get("authentication.username"),f=a.get("authentication.passwordHash");Object(n.compare)(d,f,function(a,d){if(a)return q.error({err:a},'Error while comparing plaintext password (in authentication request for username "'+
b+"\") to the configured hashed password (in config entry 'authentication.passwordHash')"),e(a,null);if(b!==c)return q.warn('Rejecting authentication attempt: invalid username "'+b+'"'),e(null,!1);if(d)return q.debug('Successfully authenticated credentials for username "'+b+'"'),e(null,{username:b,userId:p});q.warn('Rejecting authentication attempt: invalid password for username "'+b+'"');return e(null,!1)})}}function f(a){return function(b,d,e){b.user={username:a.get("authentication.username"),userId:p};
return e()}}b.a=function(a){if(a.get("authentication.passwordHash"))return k.a.use(new l.BasicStrategy(d(a))),k.a.authenticate("basic",{session:!1});q.warn('Authentication disabled because "authentication.passwordHash" is not set in your config. Anybody will be able to access this service without restriction.');return f(a)};var h=a(254),k=a.n(h),l=a(255);a.n(l);var n=a(256);a.n(n);h=a(0);var q=Object(h.a)(e),p=0}).call(b,"src/server/middleware/authenticate.js")},function(e,b){e.exports=require("passport")},
function(e,b){e.exports=require("passport-http")},function(e,b){e.exports=require("bcrypt")},function(e,b,a){b.a=function(){var a=Date.now(),b=Date.now();return function(){var d=Date.now(),e={success:!0,lookup_id:String(Math.random()).slice(2),uptime_ms:d-a,interval_ms:d-b};b=d;return{clear:e,secret:e}}}}]);

//# sourceMappingURL=server.33a0010d.js.map