<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Docs : Graphistry API information for cross-language use, e.g., REST">
	<link rel="stylesheet" type="text/css" media="screen" href="../css/bootstrap.css">

    <title>Docs</title>
  </head>

  <body>

<nav class="navbar navbar-default navbar-fixed-top navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-left">
	<img style="max-height:30px; margin-top: 10px; margin-left:30px;" src="../images/logo.png">
    </div>
	<div class="navbar-left"><a style="color:#E6E6E6;" class="navbar-text" href="#">Graphistry</a>
<!--	<a style="margin-top: 18px; margin-left: 40px; font-size: 11px; color:#E6E6E6;" class="navbar-text" href="#">Server Status: Active</a>
	<a style="margin-top: 18px; font-size: 11px; color:#E6E6E6;" class="navbar-text" href="#">Location: USA</a>		-->
</div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
      </ul>
      <ul class="nav navbar-nav navbar-right">
<!--        <li><a href="index.html">Dashboard</a></li>-->
        <li class="active"><a href="../index.html">Getting Started</a></li>
        <li><a style="margin-right:30px;" href="../docs.html">Docs</a></li>
		<li><!--<button style="margin-top:8px; margin-right:30px;" type="button" class="btn btn-info">Launch</button>--></li>
      </ul>
    </div>
  </div>
</nav>


<div class="jumbotron">
  <div class="container text-center">
	  <p style="font-size:21px;"><br><br>Admin Setup</p>
  </div>
</div>


<div class="container-fluid bg-3 text-center">





	<div style="text-align: center;" class="row">
    <div style="margin: 10px; width: 70em; float: none; display: inline-block; border-radius: 5px; padding:20px; " class="col-sm-18">
	<div class="panel panel-default">

  <div style="padding:30px; text-align:left;" class="panel-body">
      <!--Start of html from other site		-->

        <h1 id="installation-instructions">Installation Instructions</h1>
        <p>These are instructions to get a single-node setup of Graphistry up and running, on an Ubuntu/RedHat box that you have provisioned. You should have received this inside a package of:</p>
        <ul>
        <li><em>instructions.md</em> (these instructions)</li>
        <li><em>certs.txt</em> (how to generate certs)</li>
        <li><em>containers.lxc.gz</em> (the Docker containers with the relevant code)</li>
        <li><em>load.sh</em> (loads containers for use)</li>
        <li><em>launch.sh</em> (run the server)</li>
        </ul>
        <h3 id="what-will-we-be-doing-">What Will We Be Doing?</h3>
        <p>First, we will be preparing a machine to run Docker containers that can take advantage of the machine&#39;s GPU. This is a one-time task.<br>Second, we will be loading a few containers onto that machine that, in the ensemble, run Graphistry.</p>
        <h3 id="how-long-should-this-take-">How Long Should This Take?</h3>
        <p>Preparing a machine to run Docker containers should take around an hour (provisioning, finding a new version of Ubuntu/RedHat, running the scripts).<br>Loading new versions of the containers onto the machine should take a minute or two, and the launch script should take ten seconds or so.</p>
        <h2 id="1-prerequisites-and-supported-hardware">1 Prerequisites And Supported Hardware</h2>
        <p>You will need a box:</p>
        <ul>
        <li>connected to the Internet,</li>
        <li>connected to a box running an Ansible playbook, also connected to the Internet.</li>
        <li>with a GPU that can run Cuda 7.5,</li>
        <li>with the Docker engine installed,</li>
        <li>and optionally with the nvidia-docker standalone installation.</li>
        </ul>
        <p>Currently, the only supported and tested configuration are</p>
        <ul>
        <li>Ubuntu 14.04 Trusty LTS or RedHat Enterprise Linux (RHEL) 7.3</li>
        <li>NVIDIA Grid K2 (g2.2xlarge on AWS EC2) or NVIDIA Tesla K40/K80.</li>
        </ul>
        <h2 id="2-prepare-the-machine">2 Prepare The Machine</h2>
        <h4 id="set-up-nvidia-docker-with-our-process-option-a-">Set up Nvidia-Docker With Our Process (Option A)</h4>
        <ol>
        <li>Checkout the infrastructure repository at <a href="https://github.com/graphistry/infrastructure/">https://github.com/graphistry/infrastructure/</a>.</li>
        <li>Run through the setup at <a href="https://github.com/graphistry/infrastructure/tree/master/nvidia-docker-host">https://github.com/graphistry/infrastructure/tree/master/nvidia-docker-rhel</a>.</li>
        </ol>
        <p>If the script runs through, your machine will have passed a test of using Docker to run GPU computation (matrix multiplication in this case).</p>
        <h3 id="set-up-nvidia-docker-manually-option-b-">Set up Nvidia-Docker Manually (Option B)</h3>
        <ol>
        <li>(Use your process to set up nvidia-docker.)</li>
        <li><p>Verify that your process succeeds by pulling down the <code style="font-family: Hack;">nvidia/cuda:7.5-devel</code> image and running</p>
        <pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>nvidia-docker&nbsp;run&nbsp;--rm&nbsp;nvidia/cuda:7.5-devel&nbsp;nvidia-smi</span></span></span></div></pre></li>
        <li><p>To verify that the <a href="https://github.com/graphistry/cljs">cljs</a> tests pass, run</p>
        <pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span>&nbsp;</span><span class="syntax--meta syntax--paragraph syntax--text"><span>nvidia-docker&nbsp;run&nbsp;--rm&nbsp;graphistry/cljs:1.1&nbsp;npm&nbsp;test</span></span></span></div></pre></li>
        </ol>
        <h2 id="3-set-up-graphistry">3 Set Up Graphistry</h2>
        <ol>
        <li>Unpack the package of files into a directory, and run <code style="font-family: Hack;">load.sh</code> . This should load the airgapped Graphistry deploy into your local Docker engine.</li>
        <li>Graphistry can terminate SSL, but by default will not. Follow the instructions in certs.txt for making certs, and for subsequent runtime parameters during launch, if you intend for Graphistry itself to terminate SSL.</li>
        </ol>
        <h2 id="4-start-the-graphistry-services">4 Start The Graphistry Services</h2>
        <p>Once the containers are loaded, the app can be started (or restarted) with</p>
        <pre class="editor-colors lang-bash"><div class="line"><span class="syntax--source syntax--shell"><span>./launch.sh</span></span></div></pre>
        <h3 id="stop-or-restart-the-graphistry-services">Stop or Restart The Graphistry Services</h3>
        <p>Run <code style="font-family: Hack;">docker stop graphistry_httpd</code> or <code style="font-family: Hack;">docker restart graphistry_httpd</code>.</p>
        <h3 id="verify-that-graphistry-is-running">Verify That Graphistry is Running</h3>
        <p>When you have launched the app, you should be able to point your browser to that machine via HTTP and receive a Getting Started page. Under the section &quot;üëÅÔ∏è Learn More&quot;, click &quot;See examples of Graphistry Visualizations&quot;, and click (for example) the <em>Protein Interactions</em> at the lower right and ensure that you get a graph that resembles that image.</p>
        <h3 id="provision-an-api-key-for-someone-to-use-to-upload-data">Provision an API key for someone to use to upload data</h3>
        <p>Our upload service requires an API key for a user to upload a dataset.<br>These API keys are hashes of strings that identify the user, often the user&#39;s email address.<br>To provision a new API key via command line, please run <code style="font-family: Hack;">./make-api-key.sh</code>, passing in a first command-line parameter of a base62-clean/url-encoded email address.</p>
        <p>To provision an API key for &#39;someone@localhost&#39;, run</p>
        <pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>./make-api-key.sh&nbsp;someone@localhost</span></span></span></div></pre><h3 id="extra-use-jupyter-notebooks-with-pygraphsitry">Extra: Use Jupyter Notebooks With PyGraphsitry</h3>
        <p>These are public images, available on DockerHub, built on the Jupyter notebooks with pygraphistry installed, with several demo notebooks. Run</p>
        <pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>docker&nbsp;run&nbsp;-p&nbsp;8888:8888&nbsp;&nbsp;--restart=unless-stopped&nbsp;--name&nbsp;graphistry_notebook&nbsp;-d&nbsp;graphistry/jupyter-notebook:1.6</span></span></span></div></pre><h1 id="configuration-and-maintenance">Configuration and Maintenance</h1>
        <h2 id="view-the-logs">View the Logs</h2>
        <p>Logs are mounted in the working directory of where you run launch.sh.</p>
        <p>There are client logs, in clients/, server logs, in graphistry-json/, other assorted logs in central-app/ and worker/. Logs are in JSON. We recommend using <a href="https://github.com/trentm/node-bunyan">Bunyan</a> to print logs in a more readable format. For instance, you can use</p>
        <pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>bunyan&nbsp;-o&nbsp;short&nbsp;&lt;&nbsp;logfile</span></span></span></div></pre><p>If you want debug logs, launch with the <code style="font-family: Hack;">GRAPHISTRY_APP_CONFIG</code> environment variable having a key in its JSON hash of <code style="font-family: Hack;">LOG_LEVEL</code> set to <code style="font-family: Hack;">DEBUG</code>; i.e.</p>
        <pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>GRAPHISTRY_APP_CONFIG=&#39;{&quot;LOG_LEVEL&quot;:&quot;DEBUG&quot;}&#39;&nbsp;./launch.sh</span></span></span></div></pre><h2 id="workbooks-persistence">Workbooks Persistence</h2>
        <p>By default, the launch script will make a directory in its directory, <code style="font-family: Hack;">workbook_cache</code>, for all loaded workbooks.</p>
        <p>If you make a new directory for each release that you deploy, and you are running an airgapped Graphistry, you may want to keep around the workbooks that you have previously made.</p>
        <p>Please use the <code style="font-family: Hack;">GRAPHISTRY_WORKBOOK_CACHE</code> environment variable to set this to a directory of your choosing:</p>
        <pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>GRAPHISTRY_WORKBOOK_CACHE=/var/graphistry/workbooks&nbsp;GRAPHISTRY_APP_CONFIG=&#39;{&quot;LOG_LEVEL&quot;:&quot;INFO&quot;}&#39;&nbsp;./launch.sh`</span></span></span></div></pre><h2 id="dataset-persistence">Dataset Persistence</h2>
        <p>By default, the launch script will make a directory in its directory, <code style="font-family: Hack;">data_cache</code>, for all loaded datasets.</p>
        <p>If you make a new directory for each release that you deploy, and you are running an airgapped Graphistry, you may want to keep around the datasets that you have previously loaded.</p>
        <p>Please use the <code style="font-family: Hack;">GRAPHISTRY_DATA_CACHE</code> environment variable to set this to a directory of your choosing:</p>
        <pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>GRAPHISTRY_DATA_CACHE=/tmp/graphistry-data-cache&nbsp;./launch.sh</span></span></span></div></pre><h2 id="read-process-discard-for-datasets">Read-Process-Discard for Datasets</h2>
        <p>Your datasets live in two places: in the Node process memory and in the <code style="font-family: Hack;">data_cache</code> directory. They are not written anywhere else.</p>
        <p>If you would like to launch Graphistry so as to never write a dataset or workbook to disk, please first ensure that your machine has virtual memory turned off, to avoid swapping memory out to disk. (This is often a common requirement at an installation, and we defer to best practices therein.)</p>
        <p>Please set the <code style="font-family: Hack;">GRAPHISTRY_DATA_CACHE</code> environment variable to some subdirectory of <code style="font-family: Hack;">/run/shm</code> (on Ubuntu 14.04 LTS) or <code style="font-family: Hack;">/dev/shm</code> (on RHEL 7.2).</p>
        <p>This will ensure that Graphistry will never write your datasets to disk.</p>
        <h3 id="garbage-collection">Garbage Collection</h3>
        <p>For the discard part of read/process/discard, passing</p>
        <pre class="editor-colors lang-text"><div class="line"><span class="syntax--text syntax--plain"><span class="syntax--meta syntax--paragraph syntax--text"><span>GRAPHISTRY_APP_CONFIG=&#39;{&quot;READ_PROCESS_DISCARD&quot;:true}&#39;</span></span></span></div></pre><p>to <code style="font-family: Hack;">launch.sh</code> causes datasets to be deleted immediately after the start of processing.<br>(If this is on, refreshing a page with a visualization will be an error, because that dataset will have been discarded.)</p>
        <h2 id="software-updates">Software Updates</h2>
        <p>New versions of Graphistry will be provided as an updated bundle containers. Each such bundle will contain a <code style="font-family: Hack;">load.sh</code> and <code style="font-family: Hack;">launch.sh</code> script to load the new containers in Docker and start the graphistry services, respectively.</p>

      <!--End of html from other site		-->
  </div>
</div>
</div>
	</div>





</div>





	  <br>


  <div style="text-align: center;" class="row">
    <a href="notebook/notebook.html">
	  <div style="float: none; display: inline-block; border-radius: 5px; border: solid 1px; border-color:#E6E6E6; padding-top: 25px; "class="col-sm-5">
      <p>Next:Learn how to use Graphistry in a notebook</p><span style="font-size: 24px;" class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><br>
    </div>
	</a>
  </div>
<br><br><br><br>



<footer>
  <div class="container">
    <div class="row">
      <div class="col-md-3 col-sm-6 footerleft ">
        <div class="logofooter"> <img style="max-height:40px; margin-top: 10px;" src="../images/logo.png"></div>

      </div>
      <div class="col-md-2 col-sm-6 paddingtop-bottom">
        <ul class="footer-ul">
		  <li><a href="#"> Home </a></li>
		  <li><a href="#"> Learn More </a></li>
          <li><a href="#"> Setup Guide</a></li>
          <li><a href="#"> UI Guide</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-6 paddingtop-bottom">
			<p style="color:#E6E6E6; font-size:12px;">1212 Broadway Floor 11, Oakland, CA 94612</p>
        <p style="color:#E6E6E6; font-size:12px;">info@graphistry.com</p>
      </div>
      <div class="col-md-3 col-sm-6 paddingtop-bottom">
        </div>
      </div>
    </div>
</footer>
<!--footer start from here-->

<div class="copyright">
  <div class="container">
    <div class="col-md-6">
      <p>¬© Graphistry Inc 2017</p>
    </div>
    <div class="col-md-6">
      <ul class="bottom_ul">
        <li><a href="#">graphistry.com</a></li>
        <li><a href="#">About us</a></li>
        <li><a href="#">Getting Started</a></li>
        <li><a href="#">Docs</a></li>
      </ul>
    </div>
  </div>
</div>

  </body>
</html>
